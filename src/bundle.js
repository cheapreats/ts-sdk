!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10);class o extends n.Link{constructor(e){super(e),this._type="sync"}}t.SynchronousLink=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={version:"1.10.35"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMAIL="EMAIL",e.SMS="SMS"}(t.ResetCodeSendMethod||(t.ResetCodeSendMethod={}));t.EmployeeController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this),this.enrollTerminalFcm=this.enrollTerminalFcm.bind(this),this.revokeTerminalFcm=this.revokeTerminalFcm.bind(this),this.resetEmployeePassword=this.resetEmployeePassword.bind(this),this.sendPasswordResetCode=this.sendPasswordResetCode.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createEmployeeMutation ($employee: CreateEmployeeInput!) {\n                    createEmployee(employee: $employee) {\n                        _id\n                    }\n                }\n            ",{employee:e}).then(e=>{t(e.createEmployee._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateEmployeeMutation ($id: String!, $employee: UpdateEmployeeInput!) {\n                    updateEmployee(id: $id, employee: $employee) {\n                        _id\n                    }\n                }\n            ",{id:e,employee:t}).then(e=>{r(e.updateEmployee._id)}).catch(e=>{n(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation deleteEmployee ($id: String!) {\n                    deleteEmployee(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteEmployee)}).catch(e=>{r(e)})})}enrollTerminalFcm(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation enrollEmployeeTerminalFcmToken ($id: String!, $token: String!) {\n                    enrollEmployeeTerminalFcmToken(id: $id, token: $token) {\n                        _id\n                    }\n                }\n            ",{id:e,token:t}).then(e=>{r(e.enrollEmployeeTerminalFcmToken)}).catch(e=>{n(e)})})}revokeTerminalFcm(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation revokeEmployeeTerminalFcmToken ($token: String!) {\n                    revokeEmployeeTerminalFcmToken(token: $token)\n                }\n            ",{token:e}).then(e=>{t(e.revokeEmployeeTerminalFcmToken)}).catch(e=>{r(e)})})}resetEmployeePassword(e,t,r,n){return new Promise((o,i)=>{this.app.getAdaptor().mutate("\n                mutation resetEmployeePassword ($id: String, $email_address:String, $code:String!, $password:String!) {\n                    resetEmployeePassword(id: $id, email_address: $email_address, code: $code, password: $password) {\n                        _id\n                    }\n                }\n            ",{id:e,email_address:t,code:r,password:n}).then(e=>{o(e.resetEmployeePassword._id)}).catch(e=>{i(e)})})}sendPasswordResetCode(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation sendEmployeePasswordResetCode ($email_address: String!, $method:ResetCodeSendMethod) {\n                    sendEmployeePasswordResetCode(email_address: $email_address, method:$method)\n                }\n            ",{email_address:e,method:t}).then(e=>{r(e.sendEmployeePasswordResetCode)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(0),i=n(r(26));class a extends o.SynchronousLink{constructor(e){super(e)}get(e={}){return this.run(Object.assign(e,{method:"get"}))}post(e={}){return this.run(Object.assign(e,{method:"post"}))}put(e={}){return this.run(Object.assign(e,{method:"put"}))}delete(e={}){return this.run(Object.assign(e,{method:"delete"}))}run(e){return new Promise((t,r)=>{i.default.request({method:e.method,url:this._url,data:e.data?e.data:{},headers:e.headers?e.headers:{}}).then(e=>{t(e)}).catch(e=>{r(e)})})}}t.HttpLink=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new(r(5).App);t.default=n,"undefined"!=typeof window&&(window.CE=n)},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(6),i=r(7),a=n(r(1)),d=r(12),s=r(13),u=r(14),l=r(15),p=r(16),c=r(17),h=r(2),m=r(18),_=r(19),C=r(20),y=r(21),g=r(22),$=r(23),v=r(24),f=r(25),P=r(27),S=r(28),E=r(29),w=r(30),A=r(31),b=r(32),I=r(33),T=r(34),R=r(35),L=r(36),O=r(37);let k={endpoints:n(r(38)).default};t.App=class{constructor(){this._token=null,this._adaptor=new i.CheaprEatsGraphQLAdaptor({graphQLEndpoint:this.getConfiguration().endpoints.graphQLEndpoint.production}),this._authorizationController=new d.AuthorizationController(this),this._cartController=new s.CartController(this),this._categoryController=new u.CategoryController(this),this._customerController=new l.CustomerController(this),this._customerTokenController=new p.CustomerTokenController(this),this._couponController=new c.CouponController(this),this._employeeController=new h.EmployeeController(this),this._employeeTokenController=new m.EmployeeTokenController(this),this._graphController=new _.GraphController(this),this._headOfficeController=new C.HeadOfficeController(this),this._menuItemController=new y.MenuItemController(this),this._modifierController=new g.ModifierController(this),this._vendorController=new $.VendorController(this),this._verificationController=new v.VerificationController(this),this._validationController=new f.ValidationController(this),this._surveyController=new P.SurveyController(this),this._orderController=new S.OrderController(this),this._imageController=new E.ImageController(this),this._payoutController=new w.PayoutController(this),this._explorePageController=new A.ExplorePageController(this),this._flashSaleController=new b.FlashSaleController(this),this._tipController=new I.TipController(this),this._loyaltyProgramController=new T.LoyaltyProgramController(this),this._loyaltyCardController=new R.LoyaltyCardController(this),this._redeemableItemController=new L.RedeemableItemController(this),this._remoteConfigurationController=new O.RemoteConfigurationController(this)}get Authorization(){return{getTokenScope:this._authorizationController.getTokenScope}}get Cart(){return{updateNote:this._cartController.updateNote,removeCoupon:this._cartController.removeCoupon,applyCoupon:this._cartController.applyCoupon,delete:this._cartController.delete,removeItem:this._cartController.removeItem,addItem:this._cartController.addItem,create:this._cartController.create}}get Category(){return{create:this._categoryController.create,delete:this._categoryController.delete,update:this._categoryController.update,batchUpdate:this._categoryController.batchUpdate}}get Customer(){return{create:this._customerController.create,enrollApnsToken:this._customerController.enrollApnsToken,revokeApnsToken:this._customerController.revokeApnsToken,enrollFcmToken:this._customerController.enrollFcmToken,revokeFcmToken:this._customerController.revokeFcmToken,update:this._customerController.update,updateCreditCard:this._customerController.updateCreditCard,createWallet:this._customerController.createWallet,reloadWallet:this._customerController.reloadWallet,resetPassword:this._customerController.resetPassword,sendPasswordResetCode:this._customerController.sendPasswordResetCode,refundWallet:this._customerController.refundWallet,createWalletTransaction:this._customerController.createWalletTransaction,addFavouriteVendor:this._customerController.addFavouriteVendor,removeFavouriteVendor:this._customerController.removeFavouriteVendor,addFavouriteItem:this._customerController.addFavouriteItem,removeFavouriteItem:this._customerController.removeFavouriteItem}}get CustomerToken(){return{create:this._customerTokenController.create}}get Coupon(){return{create:this._couponController.create}}get Employee(){return{create:this._employeeController.create,update:this._employeeController.update,delete:this._employeeController.delete,enrollTerminalFcm:this._employeeController.enrollTerminalFcm,revokeTerminalFcm:this._employeeController.revokeTerminalFcm,resetEmployeePassword:this._employeeController.resetEmployeePassword,sendPasswordResetCode:this._employeeController.sendPasswordResetCode}}get EmployeeToken(){return{create:this._employeeTokenController.create}}get Graph(){return{query:this._graphController.query}}get MenuItem(){return{create:this._menuItemController.create,update:this._menuItemController.update,batchUpdate:this._menuItemController.batchUpdate,delete:this._menuItemController.delete}}get Modifier(){return{create:this._modifierController.create,update:this._modifierController.update,delete:this._modifierController.delete}}get Order(){return{create:this._orderController.create,cancel:this._orderController.cancel,beginPreparing:this._orderController.beginPreparing,prepared:this._orderController.prepared,complete:this._orderController.complete}}get HeadOffice(){return{create:this._headOfficeController.create,update:this._headOfficeController.update,delete:this._headOfficeController.delete}}get Verification(){return{startVerificationSession:this._verificationController.startVerificationSession,checkVerificationSession:this._verificationController.checkVerificationSession}}get Vendor(){return{create:this._vendorController.create,createWithEmployee:this._vendorController.createWithEmployee,update:this._vendorController.update,updateAllMenuItemsStatus:this._vendorController.updateAllMenuItemsStatus,deleteVendorTester:this._vendorController.deleteVendorTester,addVendorTesterByEmailAddress:this._vendorController.addVendorTesterByEmailAddress,updateVendorApprovalStatus:this._vendorController.updateVendorApprovalStatus,requestVendorApproval:this._vendorController.requestVendorApproval}}get Validation(){return{Customer:{signupEmail:this._validationController.customerSignupEmail,signupPhone:this._validationController.customerSignupPhone}}}get Survey(){return{create:this._surveyController.create,update:this._surveyController.update,archive:this._surveyController.archive,delete:this._surveyController.delete,release:this._surveyController.release,createSurveyResponse:this._surveyController.createSurveyResponse}}get Image(){return{upload:this._imageController.upload,getLink:this._imageController.getLink}}get Payout(){return{request:this._payoutController.request,update:this._payoutController.update,cancel:this._payoutController.cancel}}get ExplorePage(){return{replace:this._explorePageController.replace}}get FlashSale(){return{create:this._flashSaleController.create,update:this._flashSaleController.update}}get Tip(){return{create:this._tipController.create}}get LoyaltyProgram(){return{create:this._loyaltyProgramController.create,update:this._loyaltyProgramController.update,delete:this._loyaltyProgramController.delete}}get LoyaltyCard(){return{createLoyaltyCardAndEnroll:this._loyaltyCardController.createLoyaltyCardAndEnroll,awardPointsToLoyaltyCard:this._loyaltyCardController.awardPointsToLoyaltyCard,awardShareablePointsToLoyaltyCard:this._loyaltyCardController.awardShareablePointsToLoyaltyCard,shareLoyaltyPoints:this._loyaltyCardController.shareLoyaltyPoints,redeemLoyaltyPointsForCoupon:this._loyaltyCardController.redeemLoyaltyPointsForCoupon}}get RedeemableItem(){return{create:this._redeemableItemController.create,update:this._redeemableItemController.update,delete:this._redeemableItemController.delete}}get RemoteConfiguration(){return{fetch:this._remoteConfigurationController.fetch,deleteRawConfiguration:this._remoteConfigurationController.deleteRawConfiguration,updateRawConfiguration:this._remoteConfigurationController.updateRawConfiguration,createRawConfiguration:this._remoteConfigurationController.createRawConfiguration}}get Util(){return{strToIdentifier:o.strToIdentifier}}getAdaptor(){return this._adaptor}getConfiguration(){return k}setAuthenticationToken(e){this._token=e,this._adaptor.setAuthenticationToken(e)}getAuthenticationToken(){return this._token}isCompatible(){let e=`\n            query {\n                is_sdk_version_supported(version:"${a.default.version}")\n            }\n        `;return new Promise((t,r)=>{this.Graph.query(e).then(e=>{t(e.is_sdk_version_supported)}).catch(e=>{r(e)})})}setApolloEndpoint(e){this.setGraphQLEndpoint(e)}setGraphQLEndpoint(e){k.endpoints.graphQLEndpoint.production=e,this._adaptor=new i.CheaprEatsGraphQLAdaptor({graphQLEndpoint:this.getConfiguration().endpoints.graphQLEndpoint.production})}setVerificationEndpoint(e){k.endpoints.verificationEndpoint.production=e}setValidationEndpoint(e){k.endpoints.validationEndpoint.production=e}setImageEndpoint(e){k.endpoints.imageEndpoint.production=e}setImageDistributionEndpoint(e){k.endpoints.imageEndpoint.distribution=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strToIdentifier=function(e){let t="";for(let r=0;r<e.length;r++)e[r].match(/[A-Za-z0-9]/)?t+=e[r].toLowerCase():"_"!==e[r]&&" "!==e[r]&&"-"!==e[r]||"_"===t[t.length-1]||(t+="_");return"_"===t[t.length-1]&&(t=t.slice(0,t.length-1)),"_"===t[0]&&(t=t.slice(1,t.length)),t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(8),i=r(9),a=n(r(1));class d extends o.Adaptor{constructor(e){super(e),this._graphQLLink=new i.GraphQLLink(e.graphQLEndpoint,{version:a.default.version||null})}setAuthenticationToken(e){this._graphQLLink=new i.GraphQLLink(this._config.graphQLEndpoint,{headers:{version:a.default.version,authorization:e}})}setGraphQLEndpoint(e){this._graphQLLink=new i.GraphQLLink(e),this._config.graphQLEndpoint=e}query(e,t={}){return this._graphQLLink.query({query:e,variables:t})}mutate(e,t={}){return this._graphQLLink.mutate({query:e,variables:t})}}t.CheaprEatsGraphQLAdaptor=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Adaptor=class{constructor(e){this._config=e}run(e){throw new Error("Not implemented")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),o=r(11);class i extends n.SynchronousLink{constructor(e,t={}){super(e),this._headers=t.headers||{},this._constructClient()}_constructClient(){this._client=new o.GraphQLClient(this._url,{headers:this._headers})}async query(e){return await this.run(e)}async mutate(e){return await this.run(e)}async run(e){return await this._client.request(e.query,e.variables||{})}}t.GraphQLLink=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Link=class{constructor(e){this._url=e}run(e){throw new Error("Not implemented")}}},function(e,t){e.exports=graphql-request},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AuthorizationController=class{constructor(e){this.app=e,this.getTokenScope=this.getTokenScope.bind(this)}getTokenScope(e){let t=`\n            query {\n                auth_token_scope(token: "${e}")\n            }\n        `;return new Promise((e,r)=>this.app.getAdaptor().query(t).then(t=>{e(t.auth_token_scope)}).catch(e=>{r(e)}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CartController=class{constructor(e){this.app=e,this.updateNote=this.updateNote.bind(this),this.removeCoupon=this.removeCoupon.bind(this),this.applyCoupon=this.applyCoupon.bind(this),this.delete=this.delete.bind(this),this.removeItem=this.removeItem.bind(this),this.addItem=this.addItem.bind(this),this.create=this.create.bind(this)}updateNote(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($cartId: String!, $note: String!) {\n                    updateNoteForCart(cart_id: $cartId, note: $note) {\n                        _id\n                    }\n                }\n            ",{cartId:e,note:t}).then(e=>{r(e.updateNoteForCart)}).catch(e=>{n(e)})})}removeCoupon(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($cartId: String!, $cartCouponId: String!) {\n                    removeCouponFromCart(cart_id: $cartId, cart_coupon_id: $cartCouponId) {\n                        _id\n                    }\n                }\n            ",{cartId:e,cartCouponId:t}).then(e=>{r(e.removeCouponFromCart)}).catch(e=>{n(e)})})}applyCoupon(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($cartId: String!, $couponCode: String!) {\n                    applyCouponToCart(cart_id: $cartId, coupon_code: $couponCode) {\n                        _id\n                    }\n                }\n            ",{cartId:e,couponCode:t}).then(e=>{r(e.applyCouponToCart)}).catch(e=>{n(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($cartId: String!) {\n                    deleteCart(cart_id: $cartId)\n                }\n            ",{cartId:e}).then(e=>{t(e.deleteCart)}).catch(e=>{r(e)})})}removeItem(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($cartId: String!, $cartItemId: String!) {\n                    removeItemFromCart(\n                        cart_id: $cartId,\n                        cart_item_id: $cartItemId\n                    ) {\n                        _id\n                    }\n                }\n            ",{cartId:e,cartItemId:t}).then(e=>{r(e.removeItemFromCart)}).catch(e=>{n(e)})})}addItem(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($cartId: String!, $item: AddItemToCartInput!) {\n                    addItemToCart(\n                        cart_id: $cartId,\n                        item: $item\n                    ) {\n                        _id\n                    }\n                }\n            ",{cartId:e,item:t}).then(e=>{r(e.addItemCart)}).catch(e=>{n(e)})})}create(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($customerId: String!, $vendorId: String!) {\n                    createCart(\n                        customer_id: $customerId,\n                        vendor_id: $vendorId\n                    ) {\n                        _id\n                    }\n                }\n            ",{customerId:e,vendorId:t}).then(e=>{r(e.createCart)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CategoryController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this),this.batchUpdate=this.batchUpdate.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createCategoryMutation ($category: CreateCategoryInput!) {\n                    createCategory(category: $category) {\n                        _id\n                    }\n                }\n            ",{category:e}).then(e=>{t(e.createCategory._id)}).catch(e=>{r(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation deleteCategoryMutation ($id: String!) {\n                    deleteCategory(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteCategory)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateCategoryMutation ($id: String!, $category: UpdateCategoryInput!) {\n                    updateCategory(id: $id, category: $category) {\n                        _id\n                    }\n                }\n            ",{id:e,category:t}).then(e=>{r(e.updateCategory._id)}).catch(e=>{n(e)})})}batchUpdate(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($categories: [BatchUpdateCategoriesInput]!){\n                    batchUpdateCategories(categories: $categories) {\n                        _id\n                    }\n                }\n            ",{categories:e}).then(e=>{t(e.batchUpdateCategories)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.CustomerController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.updateCreditCard=this.updateCreditCard.bind(this),this.enrollApnsToken=this.enrollApnsToken.bind(this),this.revokeApnsToken=this.revokeApnsToken.bind(this),this.enrollFcmToken=this.enrollFcmToken.bind(this),this.revokeFcmToken=this.revokeFcmToken.bind(this),this.createWallet=this.createWallet.bind(this),this.reloadWallet=this.reloadWallet.bind(this),this.sendPasswordResetCode=this.sendPasswordResetCode.bind(this),this.resetPassword=this.resetPassword.bind(this),this.refundWallet=this.refundWallet.bind(this),this.createWalletTransaction=this.createWalletTransaction.bind(this),this.addFavouriteVendor=this.addFavouriteVendor.bind(this),this.removeFavouriteVendor=this.removeFavouriteVendor.bind(this),this.addFavouriteItem=this.addFavouriteItem.bind(this),this.removeFavouriteItem=this.removeFavouriteItem.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createCustomerMutation ($customer: CreateCustomerInput!) {\n                    createCustomer(customer: $customer) {\n                        _id\n                    }\n                }\n            ",{customer:e}).then(e=>{t(e.createCustomer._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateCustomerMutation ($id: String!, $customer: UpdateCustomerInput!) {\n                    updateCustomer(id: $id, customer: $customer) {\n                        _id\n                    }\n                }\n            ",{id:e,customer:t}).then(e=>{r(e.updateCustomer._id)}).catch(e=>{n(e)})})}enrollApnsToken(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation enrollCustomerApnsTokenMutation ($id: String!, $token: String!) {\n                    enrollCustomerApnsToken(id: $id, token: $token) {\n                        _id\n                    }\n                }\n            ",{id:e,token:t}).then(e=>{r(e.enrollCustomerApnsToken)}).catch(e=>{n(e)})})}revokeApnsToken(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation revokeCustomerApnsTokenMutation ($id: String!, $token: String!) {\n                    revokeCustomerApnsToken(id: $id, token: $token) {\n                        _id\n                    }\n                }\n            ",{id:e,token:t}).then(e=>{r(e.revokeCustomerApnsToken)}).catch(e=>{n(e)})})}enrollFcmToken(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation enrollCustomerFcmTokenMutation ($id: String!, $token: String!) {\n                    enrollCustomerFcmToken(id: $id, token: $token) {\n                        _id\n                    }\n                }\n            ",{id:e,token:t}).then(e=>{r(e.enrollCustomerFcmToken)}).catch(e=>{n(e)})})}revokeFcmToken(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation revokeCustomerFcmTokenMutation ($id: String!, $token: String!) {\n                    revokeCustomerFcmToken(id: $id, token: $token) {\n                        _id\n                    }\n                }\n            ",{id:e,token:t}).then(e=>{r(e.revokeCustomerFcmToken)}).catch(e=>{n(e)})})}updateCreditCard(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateCustomerCreditCardMutation ($id: String!, $token: String!) {\n                    updateCustomerCreditCard(id: $id, token: $token) {\n                        _id\n                    }\n                }\n            ",{id:e,token:t}).then(e=>{r(e.updateCustomerCreditCard)}).catch(e=>{n(e)})})}createWallet(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createCustomerWallet ($id: String!) {\n                    createCustomerWallet(id: $id) {\n                        _id\n                    }\n                }\n            ",{id:e}).then(e=>{t(e.createCustomerWallet._id)}).catch(e=>{r(e)})})}reloadWallet(e,t,r){return new Promise((n,o)=>{this.app.getAdaptor().mutate("\n                mutation reloadCustomerWallet ($id: String!, $amount: Int!, $payment_method: String!) {\n                    reloadCustomerWallet(id: $id, amount: $amount, payment_method: $payment_method) {\n                        _id\n                    }\n                }\n            ",{id:e,amount:t,payment_method:r}).then(e=>{n(e.reloadCustomerWallet._id)}).catch(e=>{o(e)})})}sendPasswordResetCode(e,t=n.ResetCodeSendMethod.EMAIL){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation sendCustomerPasswordResetCode ($email_address: String!, $method: ResetCodeSendMethod) {\n                    sendCustomerPasswordResetCode(email_address: $email_address, method:$method)\n                }\n            ",{email_address:e,method:t}).then(e=>{r(e.sendCustomerPasswordResetCode)}).catch(e=>{n(e)})})}resetPassword(e,t,r){return new Promise((n,o)=>{this.app.getAdaptor().mutate("\n                mutation resetCustomerPassword ($email_address: String!, $code: String!, $password: String!) {\n                    resetCustomerPassword(email_address: $email_address, code: $code, password: $password) {\n                        _id\n                    }\n                }\n            ",{email_address:e,code:t,password:r}).then(e=>{n(e.resetCustomerPassword._id)}).catch(e=>{o(e)})})}refundWallet(e,t,r,n){return new Promise((o,i)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $vendor_id: String!, $amount: Int!, $order_id: String) {\n                    refundCustomerWallet(id: $id, vendor_id: $vendor_id, amount: $amount, order_id: $order_id) {\n                        _id\n                    }\n                }\n            ",{id:e,vendor_id:t,amount:r,order_id:n}).then(e=>{o(e.refundCustomerWallet._id)}).catch(e=>{i(e)})})}createWalletTransaction(e,t,r,n){return new Promise((o,i)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $transaction_type: String!, $amount: Int!, $description: String) {\n                    createCustomerWalletTransaction(id: $id, transaction_type: $transaction_type, amount: $amount, description: $description) {\n                        _id\n                    }\n                }\n            ",{id:e,transaction_type:t,amount:r,description:n}).then(e=>{o(e.createCustomerWalletTransaction._id)}).catch(e=>{i(e)})})}addFavouriteVendor(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $vendor_id: String!) {\n                    addFavouriteVendorForCustomer (id: $id, vendor_id: $vendor_id) {\n                        _id\n                    }\n                }\n            ",{id:e,vendor_id:t}).then(e=>{r(e.addFavouriteVendorForCustomer._id)}).catch(e=>{n(e)})})}removeFavouriteVendor(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $vendor_id: String!) {\n                    removeFavouriteVendorForCustomer (id: $id, vendor_id: $vendor_id) {\n                        _id\n                    }\n                }\n            ",{id:e,vendor_id:t}).then(e=>{r(e.removeFavouriteVendorForCustomer._id)}).catch(e=>{n(e)})})}addFavouriteItem(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $item_id: String!) {\n                    addFavouriteItemForCustomer (id: $id, item_id: $item_id) {\n                        _id\n                    }\n                }\n            ",{id:e,item_id:t}).then(e=>{r(e.addFavouriteItemForCustomer._id)}).catch(e=>{n(e)})})}removeFavouriteItem(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id:String!, $item_id:String!) {\n                    removeFavouriteItemForCustomer (id:$id, item_id:$item_id) {\n                        _id\n                    }\n                }\n            ",{id:e,item_id:t}).then(e=>{r(e.removeFavouriteItemForCustomer._id)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CustomerTokenController=class{constructor(e){this.app=e,this.create=this.create.bind(this)}create(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation createCustomerTokenMutation ($email_address: String!, $password: String!) {\n                    createCustomerToken(email_address: $email_address, password: $password) {\n                        _id\n                        body\n                        created_at\n                        updated_at\n                    }\n                }\n            ",{email_address:e,password:t}).then(e=>{r(e.createCustomerToken)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CouponController=class{constructor(e){this.app=e,this.create=this.create.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createCouponMutation ($coupon: CreateCouponInput!) {\n                    createCoupon(coupon: $coupon) {\n                        _id\n                    }\n                }\n            ",{coupon:e}).then(e=>{t(e.createCoupon._id)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EmployeeTokenController=class{constructor(e){this.app=e,this.create=this.create.bind(this)}create(e,t,r){return new Promise((n,o)=>{this.app.getAdaptor().mutate("\n                mutation createEmployeeTokenMutation ($vendor_id: String!, $username: String!, $password: String!) {\n                    createEmployeeToken(vendor_id: $vendor_id, username: $username, password: $password) {\n                        body\n                    }\n                }\n            ",{vendor_id:e,username:t,password:r}).then(e=>{n(e.createEmployeeToken.body)}).catch(e=>{o(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VENDOR_ADMIN="VENDOR_ADMIN",e.VENDOR_EMPLOYEE="VENDOR_EMPLOYEE",e.CUSTOMER="CUSTOMER",e.MASTER="MASTER",e.INVALID="INVALID"}(t.UserTypes||(t.UserTypes={}));t.GraphController=class{constructor(e){this.app=e,this.query=this.query.bind(this)}query(e,t={}){return this.app.getAdaptor().query(e,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HeadOfficeController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createHeadOffice ($identifier: String!) {\n                    createHeadOffice(identifier: $identifier) {\n                        _id\n                    }\n                }\n            ",{identifier:e}).then(e=>{t(e.createHeadOffice._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateHeadOffice ($id: String!, $identifier: String!) {\n                    updateHeadOffice(id: $id, identifier: $identifier) {\n                        _id\n                    }\n                }\n            ",{id:e,identifier:t}).then(e=>{r(e.updateHeadOffice._id)}).catch(e=>{n(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation deleteHeadOffice ($id: String!) {\n                    deleteHeadOffice(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteHeadOffice)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MenuItemController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this),this.batchUpdate=this.batchUpdate.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createMenuItemMutation ($menu_item: CreateMenuItemInput!) {\n                    createMenuItem(menu_item: $menu_item) {\n                        _id\n                    }\n                }\n            ",{menu_item:e}).then(e=>{t(e.createMenuItem._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateMenuItemMutation ($id: String!, $menu_item: UpdateMenuItemInput!) {\n                    updateMenuItem(id: $id, menu_item: $menu_item) {\n                        _id\n                    }\n                }\n            ",{id:e,menu_item:t}).then(e=>{r(e.updateMenuItem._id)}).catch(e=>{n(e)})})}batchUpdate(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation batchUpdateMenuItems ($menu_items: [BatchUpdateMenuItemsInput]!) {\n                    batchUpdateMenuItems(menu_items: $menu_items) {\n                        _id\n                    }\n                }\n            ",{menu_items:e}).then(e=>{t(e.batchUpdateMenuItems)}).catch(e=>{r(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation deleteMenuItemMutation ($id: String!) {\n                    deleteMenuItem(id: $id)\n                }\n            ",{id:e}).then(()=>{t()}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModifierController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createModifier ($modifier: CreateModifierInput!) {\n                    createModifier(modifier: $modifier) {\n                        _id\n                    }\n                }\n            ",{modifier:e}).then(e=>{t(e.createModifier._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateModifier ($id: String!, $modifier: UpdateModifierInput!) {\n                    updateModifier(id: $id, modifier: $modifier) {\n                        _id\n                    }\n                }\n            ",{id:e,modifier:t}).then(e=>{r(e.updateModifier._id)}).catch(e=>{n(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation deleteModifier ($id: String!) {\n                    deleteModifier(id: $id)\n                }\n            ",{id:e}).then(()=>{t()}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NOT_APPROVED="NOT_APPROVED",e.PENDING="PENDING",e.APPROVED="APPROVED"}(t.VendorApprovalStatus||(t.VendorApprovalStatus={})),function(e){e.OFF="OFF",e.WEEKLY="WEEKLY",e.BI_WEEKLY="BI_WEEKLY",e.MONTHLY="MONTHLY"}(t.PayoutAutoRequestSchedule||(t.PayoutAutoRequestSchedule={})),function(e){e.FIRST_TIME="FIRST_TIME",e.CASUAL="CASUAL",e.REGULAR="REGULAR"}(t.VendorAnalyticsCustomerType||(t.VendorAnalyticsCustomerType={}));t.VendorController=class{constructor(e){this.app=e,this.deleteVendorTester=this.deleteVendorTester.bind(this),this.addVendorTesterByEmailAddress=this.addVendorTesterByEmailAddress.bind(this),this.updateVendorApprovalStatus=this.updateVendorApprovalStatus.bind(this),this.requestVendorApproval=this.requestVendorApproval.bind(this),this.create=this.create.bind(this),this.update=this.update.bind(this),this.createWithEmployee=this.createWithEmployee.bind(this),this.updateAllMenuItemsStatus=this.updateAllMenuItemsStatus.bind(this)}deleteVendorTester(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    deleteVendorTester(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteVendorTester)}).catch(e=>{r(e)})})}addVendorTesterByEmailAddress(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $email_address: String!) {\n                    addVendorTesterByEmailAddress(id: $id, email_address: $email_address) {\n                        _id\n                    }\n                }\n            ",{id:e,email_address:t}).then(e=>{r(e.addVendorTesterByEmailAddress)}).catch(e=>{n(e)})})}updateVendorApprovalStatus(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $approval_status: VendorApprovalStatus!) {\n                    updateVendorApprovalStatus(id: $id, approval_status: $approval_status) {\n                        _id\n                    }\n                }\n            ",{id:e,approval_status:t}).then(e=>{r(e.updateVendorApprovalStatus._id)}).catch(e=>{n(e)})})}requestVendorApproval(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    requestVendorApproval(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.requestVendorApproval)}).catch(e=>{r(e)})})}create(e){return console.warn("Vendor.create is deprecated, it is recommended for you to move to Vendor.createWithEmployee"),new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createVendorMutation ($vendor: CreateVendorInput!) {\n                    createVendor(vendor: $vendor) {\n                        _id\n                    }\n                }\n            ",{vendor:e}).then(e=>{t(e.createVendor._id)}).catch(e=>{r(e)})})}createWithEmployee(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createVendorWithEmployeeMutation($vendor: CreateVendorWithEmployeeInput!) {\n                    createVendorWithEmployee(vendor: $vendor) {\n                        _id\n                    }\n                }\n            ",{vendor:e}).then(e=>{t(e.createVendorWithEmployee._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation updateVendorMutation ($id: String!, $vendor: UpdateVendorInput!) {\n                    updateVendor(id: $id, vendor: $vendor) {\n                        _id\n                    }\n                }\n            ",{id:e,vendor:t}).then(e=>{r(e.updateVendor._id)}).catch(e=>{n(e)})})}updateAllMenuItemsStatus(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($vendor_id: String!, $status: String!) {\n                    updateAllMenuItemsStatusForVendor(vendor_id: $vendor_id, status: $status)\n                }\n            ",{vendor_id:e,status:t}).then(e=>{r(e.updateAllMenuItemsStatusForVendor)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VerificationController=class{constructor(e){this.app=e,this.startVerificationSession=this.startVerificationSession.bind(this),this.checkVerificationSession=this.checkVerificationSession.bind(this)}startVerificationSession(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createSmsVerificationSessionMutation ($phone_number:String!) {\n                    createSmsVerificationSession(phone_number:$phone_number) {\n                        uuid\n                    }\n                }\n            ",{phone_number:e}).then(e=>{t(e)}).catch(e=>{r(e)})})}checkVerificationSession(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation verifySmsVerificationSessionMutation ($uuid:String!, $verification_code:String!) {\n                    verifySmsVerificationSession(uuid:$uuid, verification_code:$verification_code) {\n                        phone_number,\n                        verified_status\n                    }\n                }\n            ",{uuid:e,verification_code:t}).then(e=>{r(e)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3);t.ValidationController=class{constructor(e){this.app=e,this.customerSignupEmail=this.customerSignupEmail.bind(this),this.customerSignupPhone=this.customerSignupPhone.bind(this)}getHttpLink(e=""){return new n.HttpLink(this.app.getConfiguration().endpoints.validationEndpoint.production+e)}customerSignupEmail(e){return new Promise((t,r)=>{this.getHttpLink("/customer/signup/email").post({data:{email:e}}).then(e=>{t(e.data)}).catch(e=>{r(e)})})}customerSignupPhone(e){return new Promise((t,r)=>{this.getHttpLink("/customer/signup/phone").post({data:{phone:e}}).then(e=>{t(e.data)}).catch(e=>{r(e)})})}}},function(e,t){e.exports=axios},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CHECKBOX="CHECKBOX",e.MULTI_CHECKBOX="MULTI_CHECKBOX",e.SHORT_ANSWER="SHORT_ANSWER",e.RATING="RATING"}(t.SurveyQuestionType||(t.SurveyQuestionType={})),function(e){e.AFTER_ORDER="AFTER_ORDER"}(t.SurveyDeliveryRule||(t.SurveyDeliveryRule={}));t.SurveyController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.archive=this.archive.bind(this),this.delete=this.delete.bind(this),this.release=this.release.bind(this),this.createSurveyResponse=this.createSurveyResponse.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($survey: CreateSurveyInput!) {\n                    createSurvey(survey: $survey) {\n                        _id\n                    }\n                }\n            ",{survey:e}).then(e=>{t(e.createSurvey._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $survey: UpdateSurveyInput!) {\n                    updateSurvey(id: $id, survey: $survey) {\n                        _id\n                    }\n                }\n            ",{id:e,survey:t}).then(e=>{r(e.updateSurvey._id)}).catch(e=>{n(e)})})}archive(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    archiveSurvey(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.archiveSurvey)}).catch(e=>{r(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    deleteSurvey(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteSurvey)}).catch(e=>{r(e)})})}release(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    releaseSurvey(id: $id) {\n                        _id\n                    }\n                }\n            ",{id:e}).then(e=>{t(e.releaseSurvey._id)}).catch(e=>{r(e)})})}createSurveyResponse(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($survey_id: String!, $survey_response: CreateSurveyResponseInput!) {\n                    createSurveyResponse(survey_id: $survey_id, survey_response: $survey_response) {\n                        _id\n                    }\n                }\n            ",{survey_id:e,survey_response:t}).then(e=>{r(e.createSurveyResponse._id)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EAT_IN="EAT_IN",e.TAKE_OUT="TAKE_OUT",e.DELIVERY="DELIVERY"}(t.OrderType||(t.OrderType={})),function(e){e.VENDOR_CANCELLED="VENDOR_CANCELLED",e.VENDOR_PREP_CANCELLED="VENDOR_PREP_CANCELLED",e.VENDOR_ITEM_SOLD_OUT="VENDOR_ITEM_SOLD_OUT",e.VENDOR_STORE_CLOSING_SOON="VENDOR_STORE_CLOSING_SOON",e.CUSTOMER_NOT_PICKED_UP="CUSTOMER_NOT_PICKED_UP",e.CUSTOMER_CANCELLED="CUSTOMER_CANCELLED",e.OTHER="OTHER"}(t.OrderCancellationReason||(t.OrderCancellationReason={}));t.OrderController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.cancel=this.cancel.bind(this),this.beginPreparing=this.beginPreparing.bind(this),this.prepared=this.prepared.bind(this),this.complete=this.complete.bind(this)}create(e,t,r){return new Promise((n,o)=>{this.app.getAdaptor().mutate("\n                mutation createOrderMutation ($order: CreateOrderInput!, $dry: Boolean, $clear_cart: Boolean) {\n                    createOrder(order: $order, dry: $dry, clear_cart: $clear_cart) {\n                        _id\n                    }\n                }\n            ",{order:e,dry:t,clear_cart:r}).then(e=>{n(e.createOrder._id)}).catch(e=>{o(e)})})}cancel(e,t,r){return new Promise((n,o)=>{this.app.getAdaptor().mutate("\n                mutation cancelOrderMutation ($id: String!, $reason: OrderCancellationReason!, $description: String){\n                    cancelOrder(id: $id, reason: $reason, description: $description){\n                        _id\n                    }\n                }\n            ",{id:e,reason:t,description:r}).then(e=>{n(e)}).catch(e=>{o(e)})})}beginPreparing(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation beginPreparingOrder($id: String!, $estimated_preparing_sec: Int!){\n                    beginPreparingOrder(id: $id, estimated_preparing_sec: $estimated_preparing_sec){\n                        _id\n                    }\n                }\n            ",{id:e,estimated_preparing_sec:t}).then(e=>{r(e)}).catch(e=>{n(e)})})}prepared(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation preparedOrderMutation ($id: String!){\n                    preparedOrder (id: $id){\n                        _id\n                    }\n                }\n            ",{id:e}).then(e=>{t(e)}).catch(e=>{r(e)})})}complete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation completeOrderMutation ($id: String!){\n                    completeOrder(id: $id){\n                        _id\n                    }\n                }\n            ",{id:e}).then(e=>{t(e)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3);t.ImageController=class{constructor(e){this.app=e,this.upload=this.upload.bind(this),this.getLink=this.getLink.bind(this)}getHttpLink(e=""){return new n.HttpLink(this.app.getConfiguration().endpoints.imageEndpoint.production+e)}upload(e){const t=this.getHttpLink("/upload");return new Promise((r,n)=>{t.post({data:{image:e}}).then(e=>{r(e.data)}).catch(e=>{n(e)})})}getLink(e,t){return this.app.getConfiguration().endpoints.imageEndpoint.distribution+"/"+e+"-"+t+".png"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MANUAL="MANUAL"}(t.PayoutMethod||(t.PayoutMethod={})),function(e){e.PENDING="PENDING",e.IN_TRANSIT="IN_TRANSIT",e.PAID="PAID",e.CANCELLED="CANCELLED"}(t.PayoutStatus||(t.PayoutStatus={})),function(e){e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(t.ServiceChargeType||(t.ServiceChargeType={})),function(e){e.ORDER_TRANSACTION_FEE="ORDER_TRANSACTION_FEE",e.PAYOUT_REQUEST_FEE="PAYOUT_REQUEST_FEE",e.OTHER="OTHER",e.OTHER_TAXABLE="OTHER_TAXABLE",e.TAX="TAX"}(t.ServiceChargeReason||(t.ServiceChargeReason={}));t.PayoutController=class{constructor(e){this.app=e,this.request=this.request.bind(this),this.update=this.update.bind(this),this.cancel=this.cancel.bind(this)}request(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($vendor_id: String!, $dry: Boolean) {\n                    requestPayout(vendor_id: $vendor_id, dry: $dry) {\n                        _id\n                        total\n                    }\n                }\n            ",{vendor_id:e,dry:t}).then(e=>{r(e.requestPayout)}).catch(e=>{n(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $payout:UpdatePayoutInput!) {\n                    updatePayout(id: $id, payout: $payout) {\n                        _id\n                    }\n                }\n            ",{id:e,payout:t}).then(e=>{r(e.updatePayout._id)}).catch(e=>{n(e)})})}cancel(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    cancelPayout(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.cancelPayout)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ExplorePageController=class{constructor(e){this.app=e,this.replace=this.replace.bind(this)}replace(e,t,r,n){return new Promise((o,i)=>{this.app.getAdaptor().mutate("\n                mutation ($advertisements: [AdvertisementInput], $daily_deals: [DailyDealsInput], $special_deals: [SpecialDealsInput], $timely_deals: [TimelyDealsInput]) { \n                    replaceExplorePage(advertisements: $advertisements, daily_deals: $daily_deals, special_deals: $special_deals, timely_deals: $timely_deals) {\n                        updated_at\n                    }\n                }\n            ",{advertisements:e,daily_deals:t,special_deals:r,timely_deals:n}).then(e=>{o(e.replaceExplorePage.updated_at)}).catch(e=>{i(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DOLLAR="DOLLAR",e.PERCENTAGE="PERCENTAGE"}(t.FlashSaleType||(t.FlashSaleType={}));t.FlashSaleController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this)}create(e,t,r,n,o,i){return new Promise((a,d)=>{this.app.getAdaptor().mutate("\n                mutation($vendor_id: String!, $type: FlashSaleType!, $amount: Int!, $items: [FlashSaleItemInput]!, $start_at: String!, $end_at: String!) {\n                    createFlashSale(vendor_id: $vendor_id, type: $type, amount: $amount, items:$items, start_at:$start_at, end_at:$end_at) {\n                        _id\n                    }\n                }\n            ",{vendor_id:e,type:t,amount:r,items:n,start_at:o,end_at:i}).then(e=>{a(e.createFlashSale._id)}).catch(e=>{d(e)})})}update(e,t,r){return new Promise((n,o)=>{this.app.getAdaptor().mutate("\n                mutation($id: String!, $items: [FlashSaleItemInput], $end_at: String) {\n                    updateFlashSale(id: $id, items:$items, end_at:$end_at) {\n                        _id\n                    }\n                }\n            ",{id:e,items:t,end_at:r}).then(e=>{n(e.updateFlashSale._id)}).catch(e=>{o(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TipController=class{constructor(e){this.app=e,this.create=this.create.bind(this)}create(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($order_id:String!, $amount:Int!) {\n                    createTip(order_id:$order_id, amount:$amount) {\n                        _id,\n                    }\n                }             \n            ",{order_id:e,amount:t}).then(e=>{r(e.createTip._id)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DOLLAR="DOLLAR",e.ORDER="ORDER",e.ITEM="ITEM"}(t.LoyaltyProgramType||(t.LoyaltyProgramType={}));t.LoyaltyProgramController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($loyalty_program: CreateLoyaltyProgramInput!) {\n                    createLoyaltyProgram(loyalty_program: $loyalty_program) {\n                        _id\n                    }\n                }\n            ",{loyalty_program:e}).then(e=>{t(e.createLoyaltyProgram._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id:String!, $loyalty_program: UpdateLoyaltyProgramInput!) {\n                    updateLoyaltyProgram(id:$id, loyalty_program: $loyalty_program) {\n                        _id\n                    }\n                }\n            ",{id:e,loyalty_program:t}).then(e=>{r(e.updateLoyaltyProgram._id)}).catch(e=>{n(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    deleteLoyaltyProgram(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteLoyaltyProgram)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EARNING="EARNING",e.EARNING_FRIEND="EARNING_FRIEND",e.SHARING="SHARING",e.REDEEMING="REDEEMING"}(t.LoyaltyTransactionType||(t.LoyaltyTransactionType={}));t.LoyaltyCardController=class{constructor(e){this.app=e,this.createLoyaltyCardAndEnroll=this.createLoyaltyCardAndEnroll.bind(this),this.awardPointsToLoyaltyCard=this.awardPointsToLoyaltyCard.bind(this),this.awardShareablePointsToLoyaltyCard=this.awardShareablePointsToLoyaltyCard.bind(this),this.shareLoyaltyPoints=this.shareLoyaltyPoints.bind(this),this.redeemLoyaltyPointsForCoupon=this.redeemLoyaltyPointsForCoupon.bind(this)}createLoyaltyCardAndEnroll(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($loyalty_card:CreateLoyaltyCardInput!) {\n                    createLoyaltyCardAndEnroll(loyalty_card: $loyalty_card) {\n                        _id\n                    }\n                }\n            ",{loyalty_card:e}).then(e=>{t(e.createLoyaltyCardAndEnroll._id)}).catch(e=>{r(e)})})}awardPointsToLoyaltyCard(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $amount: Int!) {\n                    awardPointsToLoyaltyCard(id: $id, amount: $amount) {\n                        _id\n                    }\n                }\n            ",{id:e,amount:t}).then(e=>{r(e.awardPointsToLoyaltyCard._id)}).catch(e=>{n(e)})})}awardShareablePointsToLoyaltyCard(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $amount: Int!) {\n                    awardShareablePointsToLoyaltyCard(id: $id, amount: $amount) {\n                        _id\n                    }\n                }\n            ",{id:e,amount:t}).then(e=>{r(e.awardShareablePointsToLoyaltyCard._id)}).catch(e=>{n(e)})})}shareLoyaltyPoints(e,t,r,n){return new Promise((o,i)=>{this.app.getAdaptor().mutate("\n                mutation ($sender_customer_id: String!, $receiver_phone_number: String!, $loyalty_program_id: String!, $no_of_points_to_share: Int!) {\n                    shareLoyaltyPoints(sender_customer_id: $sender_customer_id, receiver_phone_number: $receiver_phone_number, loyalty_program_id: $loyalty_program_id, no_of_points_to_share: $no_of_points_to_share) {\n                        _id\n                    }\n                }\n            ",{sender_customer_id:e,receiver_phone_number:t,loyalty_program_id:r,no_of_points_to_share:n}).then(e=>{o(e.shareLoyaltyPoints._id)}).catch(e=>{i(e)})})}redeemLoyaltyPointsForCoupon(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($loyalty_card_id: String!, $menu_item_id: String!) {\n                    redeemLoyaltyPointsForCoupon(loyalty_card_id: $loyalty_card_id, menu_item_id: $menu_item_id) {\n                        _id\n                    }\n                }\n            ",{loyalty_card_id:e,menu_item_id:t}).then(e=>{r(e.redeemLoyaltyPointsForCoupon._id)}).catch(e=>{n(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RedeemableItemController=class{constructor(e){this.app=e,this.create=this.create.bind(this),this.update=this.update.bind(this),this.delete=this.delete.bind(this)}create(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation createRedeemableItem ($redeemable_item: CreateRedeemableItemInput!) {\n                    createRedeemableItem(redeemable_item: $redeemable_item) {\n                        _id\n                    }\n                }\n            ",{redeemable_item:e}).then(e=>{t(e.createRedeemableItem._id)}).catch(e=>{r(e)})})}update(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id:String!, $redeemable_item: UpdateRedeemableItemInput!) {\n                    updateRedeemableItem(id: $id, redeemable_item: $redeemable_item) {\n                        _id\n                    }\n                }\n            ",{id:e,redeemable_item:t}).then(e=>{r(e.updateRedeemableItem._id)}).catch(e=>{n(e)})})}delete(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    deleteRedeemableItem(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteRedeemableItem)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RemoteConfigurationController=class{constructor(e){this.app=e,this.fetch=this.fetch.bind(this),this.deleteRawConfiguration=this.deleteRawConfiguration.bind(this),this.updateRawConfiguration=this.updateRawConfiguration.bind(this),this.createRawConfiguration=this.createRawConfiguration.bind(this)}fetch(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                query ($name: String!, $version: String!) {\n                    merged_configuration(name: $name, version: $version) {\n                        name\n                        data\n                    }\n                }\n            ",{name:e,version:t}).then(e=>{r(JSON.parse(e.merged_configuration.data))}).catch(e=>{n(e)})})}deleteRawConfiguration(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!) {\n                    deleteRawConfiguration(id: $id)\n                }\n            ",{id:e}).then(e=>{t(e.deleteRawConfiguration)}).catch(e=>{r(e)})})}updateRawConfiguration(e,t){return new Promise((r,n)=>{this.app.getAdaptor().mutate("\n                mutation ($id: String!, $rawConfiguration: UpdateRawConfigurationInput!) {\n                    updateRawConfiguration(id: $id, raw_configuration: $rawConfiguration) {\n                        _id\n                    }\n                }\n            ",{id:e,rawConfiguration:t}).then(e=>{r(e.updateRawConfiguration)}).catch(e=>{n(e)})})}createRawConfiguration(e){return new Promise((t,r)=>{this.app.getAdaptor().mutate("\n                mutation ($rawConfiguration: CreateRawConfigurationInput!) {\n                    createRawConfiguration(raw_configuration: $rawConfiguration) {\n                        _id\n                    }\n                }\n            ",{rawConfiguration:e}).then(e=>{t(e.createRawConfiguration)}).catch(e=>{r(e)})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={graphQLEndpoint:{production:"https://graphql-v1.cheapreats.com/graphql"},verificationEndpoint:{production:"https://ms-verification-v1.cheapreats.com"},validationEndpoint:{production:"https://ms-validation-v1.cheapreats.com"},imageEndpoint:{production:"https://ms-image-v1.cheapreats.com",distribution:"https://static.cheapreats.com"}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9saW5rcy9zeW5jaHJvbm91c2xpbmtzL1N5bmNocm9ub3VzTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmVyc2lvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL0VtcGxveWVlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvSHR0cExpbmsudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvdXRpbC9zdHJUb0lkZW50aWZpZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9hZGFwdG9ycy9DaGVhcHJFYXRzR3JhcGhRTEFkYXB0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9hZGFwdG9ycy9BZGFwdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2xpbmtzL0xpbmsudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZ3JhcGhxbC1yZXF1ZXN0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9BdXRob3JpemF0aW9uQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL0NhcnRDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvQ2F0ZWdvcnlDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvQ3VzdG9tZXJDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvQ3VzdG9tZXJUb2tlbkNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9Db3Vwb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvRW1wbG95ZWVUb2tlbkNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9HcmFwaENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9IZWFkT2ZmaWNlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL01lbnVJdGVtQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL01vZGlmaWVyQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL1ZlbmRvckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9WZXJpZmljYXRpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvVmFsaWRhdGlvbkNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYXhpb3NcIiIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL1N1cnZleUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9PcmRlckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9JbWFnZUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9QYXlvdXRDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvRXhwbG9yZVBhZ2VDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29udHJvbGxlcnMvRmxhc2hTYWxlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbnRyb2xsZXJzL1RpcENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9Mb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9Mb3lhbHR5Q2FyZENvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9SZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb250cm9sbGVycy9SZW1vdGVDb25maWd1cmF0aW9uQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnL2VuZHBvaW50cy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlN5bmNocm9ub3VzTGluayIsIkxpbmsiLCJ1cmwiLCJzdXBlciIsInRoaXMiLCJfdHlwZSIsInZlcnNpb24iLCJSZXNldENvZGVTZW5kTWV0aG9kIiwiYXBwIiwidXBkYXRlIiwiZGVsZXRlIiwiZW5yb2xsVGVybWluYWxGY20iLCJyZXZva2VUZXJtaW5hbEZjbSIsInJlc2V0RW1wbG95ZWVQYXNzd29yZCIsInNlbmRQYXNzd29yZFJlc2V0Q29kZSIsImVtcGxveWVlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRBZGFwdG9yIiwibXV0YXRlIiwidGhlbiIsInJlc3VsdCIsImNyZWF0ZUVtcGxveWVlIiwiX2lkIiwiY2F0Y2giLCJlIiwiaWQiLCJ1cGRhdGVFbXBsb3llZSIsImRlbGV0ZUVtcGxveWVlIiwidG9rZW4iLCJlbnJvbGxFbXBsb3llZVRlcm1pbmFsRmNtVG9rZW4iLCJyZXZva2VFbXBsb3llZVRlcm1pbmFsRmNtVG9rZW4iLCJlbWFpbF9hZGRyZXNzIiwiY29kZSIsInBhc3N3b3JkIiwibWV0aG9kIiwic2VuZEVtcGxveWVlUGFzc3dvcmRSZXNldENvZGUiLCJIdHRwTGluayIsImNvbmZpZyIsInJ1biIsImFzc2lnbiIsInJlcXVlc3QiLCJfdXJsIiwiZGF0YSIsImhlYWRlcnMiLCJBcHAiLCJ3aW5kb3ciLCJDRSIsImVuZHBvaW50cyIsIl90b2tlbiIsIl9hZGFwdG9yIiwiQ2hlYXByRWF0c0dyYXBoUUxBZGFwdG9yIiwiZ3JhcGhRTEVuZHBvaW50IiwiZ2V0Q29uZmlndXJhdGlvbiIsInByb2R1Y3Rpb24iLCJfYXV0aG9yaXphdGlvbkNvbnRyb2xsZXIiLCJBdXRob3JpemF0aW9uQ29udHJvbGxlciIsIl9jYXJ0Q29udHJvbGxlciIsIkNhcnRDb250cm9sbGVyIiwiX2NhdGVnb3J5Q29udHJvbGxlciIsIkNhdGVnb3J5Q29udHJvbGxlciIsIl9jdXN0b21lckNvbnRyb2xsZXIiLCJDdXN0b21lckNvbnRyb2xsZXIiLCJfY3VzdG9tZXJUb2tlbkNvbnRyb2xsZXIiLCJDdXN0b21lclRva2VuQ29udHJvbGxlciIsIl9jb3Vwb25Db250cm9sbGVyIiwiQ291cG9uQ29udHJvbGxlciIsIl9lbXBsb3llZUNvbnRyb2xsZXIiLCJFbXBsb3llZUNvbnRyb2xsZXIiLCJfZW1wbG95ZWVUb2tlbkNvbnRyb2xsZXIiLCJFbXBsb3llZVRva2VuQ29udHJvbGxlciIsIl9ncmFwaENvbnRyb2xsZXIiLCJHcmFwaENvbnRyb2xsZXIiLCJfaGVhZE9mZmljZUNvbnRyb2xsZXIiLCJIZWFkT2ZmaWNlQ29udHJvbGxlciIsIl9tZW51SXRlbUNvbnRyb2xsZXIiLCJNZW51SXRlbUNvbnRyb2xsZXIiLCJfbW9kaWZpZXJDb250cm9sbGVyIiwiTW9kaWZpZXJDb250cm9sbGVyIiwiX3ZlbmRvckNvbnRyb2xsZXIiLCJWZW5kb3JDb250cm9sbGVyIiwiX3ZlcmlmaWNhdGlvbkNvbnRyb2xsZXIiLCJWZXJpZmljYXRpb25Db250cm9sbGVyIiwiX3ZhbGlkYXRpb25Db250cm9sbGVyIiwiVmFsaWRhdGlvbkNvbnRyb2xsZXIiLCJfc3VydmV5Q29udHJvbGxlciIsIlN1cnZleUNvbnRyb2xsZXIiLCJfb3JkZXJDb250cm9sbGVyIiwiT3JkZXJDb250cm9sbGVyIiwiX2ltYWdlQ29udHJvbGxlciIsIkltYWdlQ29udHJvbGxlciIsIl9wYXlvdXRDb250cm9sbGVyIiwiUGF5b3V0Q29udHJvbGxlciIsIl9leHBsb3JlUGFnZUNvbnRyb2xsZXIiLCJFeHBsb3JlUGFnZUNvbnRyb2xsZXIiLCJfZmxhc2hTYWxlQ29udHJvbGxlciIsIkZsYXNoU2FsZUNvbnRyb2xsZXIiLCJfdGlwQ29udHJvbGxlciIsIlRpcENvbnRyb2xsZXIiLCJfbG95YWx0eVByb2dyYW1Db250cm9sbGVyIiwiTG95YWx0eVByb2dyYW1Db250cm9sbGVyIiwiX2xveWFsdHlDYXJkQ29udHJvbGxlciIsIkxveWFsdHlDYXJkQ29udHJvbGxlciIsIl9yZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIiLCJSZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIiLCJfcmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXIiLCJSZW1vdGVDb25maWd1cmF0aW9uQ29udHJvbGxlciIsImdldFRva2VuU2NvcGUiLCJ1cGRhdGVOb3RlIiwicmVtb3ZlQ291cG9uIiwiYXBwbHlDb3Vwb24iLCJyZW1vdmVJdGVtIiwiYWRkSXRlbSIsImJhdGNoVXBkYXRlIiwiZW5yb2xsQXBuc1Rva2VuIiwicmV2b2tlQXBuc1Rva2VuIiwiZW5yb2xsRmNtVG9rZW4iLCJyZXZva2VGY21Ub2tlbiIsInVwZGF0ZUNyZWRpdENhcmQiLCJjcmVhdGVXYWxsZXQiLCJyZWxvYWRXYWxsZXQiLCJyZXNldFBhc3N3b3JkIiwicmVmdW5kV2FsbGV0IiwiY3JlYXRlV2FsbGV0VHJhbnNhY3Rpb24iLCJhZGRGYXZvdXJpdGVWZW5kb3IiLCJyZW1vdmVGYXZvdXJpdGVWZW5kb3IiLCJhZGRGYXZvdXJpdGVJdGVtIiwicmVtb3ZlRmF2b3VyaXRlSXRlbSIsInF1ZXJ5IiwiY2FuY2VsIiwiYmVnaW5QcmVwYXJpbmciLCJwcmVwYXJlZCIsImNvbXBsZXRlIiwic3RhcnRWZXJpZmljYXRpb25TZXNzaW9uIiwiY2hlY2tWZXJpZmljYXRpb25TZXNzaW9uIiwiY3JlYXRlV2l0aEVtcGxveWVlIiwidXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzIiwiZGVsZXRlVmVuZG9yVGVzdGVyIiwiYWRkVmVuZG9yVGVzdGVyQnlFbWFpbEFkZHJlc3MiLCJ1cGRhdGVWZW5kb3JBcHByb3ZhbFN0YXR1cyIsInJlcXVlc3RWZW5kb3JBcHByb3ZhbCIsIkN1c3RvbWVyIiwic2lnbnVwRW1haWwiLCJjdXN0b21lclNpZ251cEVtYWlsIiwic2lnbnVwUGhvbmUiLCJjdXN0b21lclNpZ251cFBob25lIiwiYXJjaGl2ZSIsInJlbGVhc2UiLCJjcmVhdGVTdXJ2ZXlSZXNwb25zZSIsInVwbG9hZCIsImdldExpbmsiLCJyZXBsYWNlIiwiY3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGwiLCJhd2FyZFBvaW50c1RvTG95YWx0eUNhcmQiLCJhd2FyZFNoYXJlYWJsZVBvaW50c1RvTG95YWx0eUNhcmQiLCJzaGFyZUxveWFsdHlQb2ludHMiLCJyZWRlZW1Mb3lhbHR5UG9pbnRzRm9yQ291cG9uIiwiZmV0Y2giLCJkZWxldGVSYXdDb25maWd1cmF0aW9uIiwidXBkYXRlUmF3Q29uZmlndXJhdGlvbiIsImNyZWF0ZVJhd0NvbmZpZ3VyYXRpb24iLCJzdHJUb0lkZW50aWZpZXIiLCJzZXRBdXRoZW50aWNhdGlvblRva2VuIiwicXVlcnlTdHJpbmciLCJHcmFwaCIsImlzX3Nka192ZXJzaW9uX3N1cHBvcnRlZCIsImVuZHBvaW50Iiwic2V0R3JhcGhRTEVuZHBvaW50IiwidmVyaWZpY2F0aW9uRW5kcG9pbnQiLCJ2YWxpZGF0aW9uRW5kcG9pbnQiLCJpbWFnZUVuZHBvaW50IiwiZGlzdHJpYnV0aW9uIiwic3RyIiwibGVuZ3RoIiwibWF0Y2giLCJ0b0xvd2VyQ2FzZSIsInNsaWNlIiwiQWRhcHRvciIsIl9ncmFwaFFMTGluayIsIkdyYXBoUUxMaW5rIiwiX2NvbmZpZyIsImF1dGhvcml6YXRpb24iLCJ2YXJpYWJsZXMiLCJFcnJvciIsIl9oZWFkZXJzIiwiX2NvbnN0cnVjdENsaWVudCIsIl9jbGllbnQiLCJHcmFwaFFMQ2xpZW50IiwiZ3JhcGhxbCIsImF1dGhfdG9rZW5fc2NvcGUiLCJjYXJ0SWQiLCJub3RlIiwidXBkYXRlTm90ZUZvckNhcnQiLCJjYXJ0Q291cG9uSWQiLCJyZW1vdmVDb3Vwb25Gcm9tQ2FydCIsImNvdXBvbkNvZGUiLCJhcHBseUNvdXBvblRvQ2FydCIsImRlbGV0ZUNhcnQiLCJjYXJ0SXRlbUlkIiwicmVtb3ZlSXRlbUZyb21DYXJ0IiwiaXRlbSIsImFkZEl0ZW1DYXJ0IiwiY3VzdG9tZXJJZCIsInZlbmRvcklkIiwiY3JlYXRlQ2FydCIsImNhdGVnb3J5IiwiY3JlYXRlQ2F0ZWdvcnkiLCJkZWxldGVDYXRlZ29yeSIsInVwZGF0ZUNhdGVnb3J5IiwiY2F0ZWdvcmllcyIsImJhdGNoVXBkYXRlQ2F0ZWdvcmllcyIsImN1c3RvbWVyIiwiY3JlYXRlQ3VzdG9tZXIiLCJ1cGRhdGVDdXN0b21lciIsImVucm9sbEN1c3RvbWVyQXBuc1Rva2VuIiwicmV2b2tlQ3VzdG9tZXJBcG5zVG9rZW4iLCJlbnJvbGxDdXN0b21lckZjbVRva2VuIiwicmV2b2tlQ3VzdG9tZXJGY21Ub2tlbiIsInVwZGF0ZUN1c3RvbWVyQ3JlZGl0Q2FyZCIsImNyZWF0ZUN1c3RvbWVyV2FsbGV0IiwiYW1vdW50IiwicGF5bWVudF9tZXRob2QiLCJyZWxvYWRDdXN0b21lcldhbGxldCIsIkVNQUlMIiwic2VuZEN1c3RvbWVyUGFzc3dvcmRSZXNldENvZGUiLCJyZXNldEN1c3RvbWVyUGFzc3dvcmQiLCJ2ZW5kb3JfaWQiLCJvcmRlcl9pZCIsInJlZnVuZEN1c3RvbWVyV2FsbGV0IiwidHJhbnNhY3Rpb25fdHlwZSIsImRlc2NyaXB0aW9uIiwiY3JlYXRlQ3VzdG9tZXJXYWxsZXRUcmFuc2FjdGlvbiIsImFkZEZhdm91cml0ZVZlbmRvckZvckN1c3RvbWVyIiwicmVtb3ZlRmF2b3VyaXRlVmVuZG9yRm9yQ3VzdG9tZXIiLCJpdGVtX2lkIiwiYWRkRmF2b3VyaXRlSXRlbUZvckN1c3RvbWVyIiwicmVtb3ZlRmF2b3VyaXRlSXRlbUZvckN1c3RvbWVyIiwiY3JlYXRlQ3VzdG9tZXJUb2tlbiIsImNvdXBvbiIsImNyZWF0ZUNvdXBvbiIsInVzZXJuYW1lIiwiY3JlYXRlRW1wbG95ZWVUb2tlbiIsImJvZHkiLCJVc2VyVHlwZXMiLCJpZGVudGlmaWVyIiwiY3JlYXRlSGVhZE9mZmljZSIsInVwZGF0ZUhlYWRPZmZpY2UiLCJkZWxldGVIZWFkT2ZmaWNlIiwibWVudV9pdGVtIiwiY3JlYXRlTWVudUl0ZW0iLCJ1cGRhdGVNZW51SXRlbSIsIm1lbnVfaXRlbXMiLCJiYXRjaFVwZGF0ZU1lbnVJdGVtcyIsIm1vZGlmaWVyIiwiY3JlYXRlTW9kaWZpZXIiLCJ1cGRhdGVNb2RpZmllciIsIlZlbmRvckFwcHJvdmFsU3RhdHVzIiwiUGF5b3V0QXV0b1JlcXVlc3RTY2hlZHVsZSIsIlZlbmRvckFuYWx5dGljc0N1c3RvbWVyVHlwZSIsImFwcHJvdmFsX3N0YXR1cyIsInZlbmRvciIsImNvbnNvbGUiLCJ3YXJuIiwiY3JlYXRlVmVuZG9yIiwiY3JlYXRlVmVuZG9yV2l0aEVtcGxveWVlIiwidXBkYXRlVmVuZG9yIiwic3RhdHVzIiwidXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzRm9yVmVuZG9yIiwicGhvbmVfbnVtYmVyIiwidXVpZCIsInZlcmlmaWNhdGlvbl9jb2RlIiwiYXBwZW5kIiwiZW1haWwiLCJnZXRIdHRwTGluayIsInBvc3QiLCJwaG9uZSIsImF4aW9zIiwiU3VydmV5UXVlc3Rpb25UeXBlIiwiU3VydmV5RGVsaXZlcnlSdWxlIiwic3VydmV5IiwiY3JlYXRlU3VydmV5IiwidXBkYXRlU3VydmV5IiwiYXJjaGl2ZVN1cnZleSIsImRlbGV0ZVN1cnZleSIsInJlbGVhc2VTdXJ2ZXkiLCJzdXJ2ZXlfaWQiLCJzdXJ2ZXlfcmVzcG9uc2UiLCJPcmRlclR5cGUiLCJPcmRlckNhbmNlbGxhdGlvblJlYXNvbiIsIm9yZGVyIiwiZHJ5IiwiY2xlYXJfY2FydCIsImNyZWF0ZU9yZGVyIiwicmVhc29uIiwiZXN0aW1hdGVkX3ByZXBhcmluZ19zZWMiLCJpbWFnZSIsImxpbmsiLCJzaXplIiwiUGF5b3V0TWV0aG9kIiwiUGF5b3V0U3RhdHVzIiwiU2VydmljZUNoYXJnZVR5cGUiLCJTZXJ2aWNlQ2hhcmdlUmVhc29uIiwicmVxdWVzdFBheW91dCIsInBheW91dCIsInVwZGF0ZVBheW91dCIsImNhbmNlbFBheW91dCIsImFkdmVydGlzZW1lbnRzIiwiZGFpbHlfZGVhbHMiLCJzcGVjaWFsX2RlYWxzIiwidGltZWx5X2RlYWxzIiwicmVwbGFjZUV4cGxvcmVQYWdlIiwidXBkYXRlZF9hdCIsIkZsYXNoU2FsZVR5cGUiLCJ0eXBlIiwiaXRlbXMiLCJzdGFydF9hdCIsImVuZF9hdCIsImNyZWF0ZUZsYXNoU2FsZSIsInVwZGF0ZUZsYXNoU2FsZSIsImNyZWF0ZVRpcCIsIkxveWFsdHlQcm9ncmFtVHlwZSIsImxveWFsdHlfcHJvZ3JhbSIsImNyZWF0ZUxveWFsdHlQcm9ncmFtIiwidXBkYXRlTG95YWx0eVByb2dyYW0iLCJkZWxldGVMb3lhbHR5UHJvZ3JhbSIsIkxveWFsdHlUcmFuc2FjdGlvblR5cGUiLCJsb3lhbHR5X2NhcmQiLCJzZW5kZXJfY3VzdG9tZXJfaWQiLCJyZWNlaXZlcl9waG9uZV9udW1iZXIiLCJsb3lhbHR5X3Byb2dyYW1faWQiLCJub19vZl9wb2ludHNfdG9fc2hhcmUiLCJsb3lhbHR5X2NhcmRfaWQiLCJtZW51X2l0ZW1faWQiLCJyZWRlZW1hYmxlX2l0ZW0iLCJjcmVhdGVSZWRlZW1hYmxlSXRlbSIsInVwZGF0ZVJlZGVlbWFibGVJdGVtIiwiZGVsZXRlUmVkZWVtYWJsZUl0ZW0iLCJKU09OIiwicGFyc2UiLCJtZXJnZWRfY29uZmlndXJhdGlvbiIsInJhd0NvbmZpZ3VyYXRpb24iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FB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b0lBT0ssQ0FDdEJPLE9BRUROLEtBQU1DLElBQ0xMLEVBQVFLLEVBQU95SSwwQkFFaEJ0SSxNQUFPQyxJQUNOUixFQUFPUSxPQUtmLHVCQUNFQyxFQUNBMFQsR0FFQSxPQUFPLElBQUlyVSxRQUFRLENBQUNDLEVBQVNDLEtBUTNCZCxLQUFLSSxJQUNGVyxhQUNBQyxPQVRrQixpUkFTSyxDQUN0Qk8sS0FDQTBULHFCQUVEaFUsS0FBTUMsSUFDTEwsRUFBUUssRUFBTzBJLDBCQUVoQnZJLE1BQU9DLElBQ05SLEVBQU9RLE9BS2YsdUJBQ0UyVCxHQUVBLE9BQU8sSUFBSXJVLFFBQVEsQ0FBQ0MsRUFBU0MsS0FRM0JkLEtBQUtJLElBQ0ZXLGFBQ0FDLE9BVGtCLDBQQVNLLENBQ3RCaVUscUJBRURoVSxLQUFNQyxJQUNMTCxFQUFRSyxFQUFPMkksMEJBRWhCeEksTUFBT0MsSUFDTlIsRUFBT1EsVSw4RUNuSWpCLFVBQWUsQ0FDYjJCLGdCQUFpQixDQUNmRSxXQUFZLDZDQUVka0gscUJBQXNCLENBQ3BCbEgsV0FBWSw2Q0FFZG1ILG1CQUFvQixDQUNsQm5ILFdBQVksMkNBRWRvSCxjQUFlLENBQ2JwSCxXQUFZLHFDQUNacUgsYUFBYyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIvKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIG5ldHdvcmsgbGluayB0aGF0IGhhcyByZXF1ZXN0L3Jlc3BvbnNlIHN0cnVjdHVyZVxuICogQXV0aG9yOiBKdW4gWmhlbmdcbiAqIExpY2Vuc2U6IFVOTElDRU5TRURcbiAqL1xuXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL0xpbmtcIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNocm9ub3VzTGluayBleHRlbmRzIExpbmsge1xuICBfdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICogQHBhcmFtICB7fSB1cmxcbiAgICovXG4gIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nKSB7XG4gICAgc3VwZXIodXJsKTtcbiAgICB0aGlzLl90eXBlID0gXCJzeW5jXCI7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IHsgdmVyc2lvbjogXCIxLjEwLjM1XCIgfTtcbiIsImltcG9ydCB7IEVtYWlsUHJlZmVyZW5jZXNJbnB1dCwgRW1haWxQcmVmZXJlbmNlcyB9IGZyb20gXCIuL0N1c3RvbWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBWZW5kb3IgfSBmcm9tIFwiLi9WZW5kb3JDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVFbXBsb3llZUlucHV0IHtcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xuICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gIHBob25lX251bWJlcjogc3RyaW5nO1xuICB2ZW5kb3JfaWQ6IHN0cmluZztcbiAgZW1haWxfcHJlZmVyZW5jZXM6IEVtYWlsUHJlZmVyZW5jZXNJbnB1dDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRW1wbG95ZWVDb21tb25Qcm9wZXJ0aWVzIHtcbiAgZW1haWxfYWRkcmVzcz86IHN0cmluZztcbiAgcGFzc3dvcmQ/OiBzdHJpbmc7XG4gIHBob25lX251bWJlcj86IHN0cmluZztcbiAgcm9sZT86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlRW1wbG95ZWVJbnB1dCBleHRlbmRzIEVtcGxveWVlQ29tbW9uUHJvcGVydGllcyB7XG4gIGVtYWlsX3ByZWZlcmVuY2VzPzogRW1haWxQcmVmZXJlbmNlc0lucHV0O1xufVxuZXhwb3J0IGVudW0gUmVzZXRDb2RlU2VuZE1ldGhvZCB7XG4gIEVNQUlMID0gXCJFTUFJTFwiLFxuICBTTVMgPSBcIlNNU1wiXG59XG5leHBvcnQgaW50ZXJmYWNlIEVtcGxveWVlIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXIsIEVtcGxveWVlQ29tbW9uUHJvcGVydGllcyB7XG4gIHVzZXJuYW1lPzogc3RyaW5nO1xuICBlbWFpbF9wcmVmZXJlbmNlcz86IEVtYWlsUHJlZmVyZW5jZXM7XG4gIHZlbmRvcj86IFZlbmRvcjtcbiAgdGVybWluYWxfZmNtX3Rva2Vucz86IEFycmF5PHN0cmluZz47XG59XG5cbi8qKlxuICogQ29udHJvbGxlciBmb3IgZW1wbG95ZWVzLlxuICovXG5leHBvcnQgY2xhc3MgRW1wbG95ZWVDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbnJvbGxUZXJtaW5hbEZjbSA9IHRoaXMuZW5yb2xsVGVybWluYWxGY20uYmluZCh0aGlzKTtcbiAgICB0aGlzLnJldm9rZVRlcm1pbmFsRmNtID0gdGhpcy5yZXZva2VUZXJtaW5hbEZjbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVzZXRFbXBsb3llZVBhc3N3b3JkID0gdGhpcy5yZXNldEVtcGxveWVlUGFzc3dvcmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNlbmRQYXNzd29yZFJlc2V0Q29kZSA9IHRoaXMuc2VuZFBhc3N3b3JkUmVzZXRDb2RlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZW1wbG95ZWUsIHJldHVybiBlbXBsb3llZSBJRCBpZiBzdWNjZXNzZnVsXG4gICAqIEBwYXJhbSB7Q3JlYXRlRW1wbG95ZWVJbnB1dH0gZW1wbG95ZWUgLSBUaGUgRW1wbG95ZWUgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBFbXBsb3llZSBPYmplY3RcbiAgICovXG4gIGNyZWF0ZShlbXBsb3llZTogQ3JlYXRlRW1wbG95ZWVJbnB1dCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBjcmVhdGVFbXBsb3llZU11dGF0aW9uICgkZW1wbG95ZWU6IENyZWF0ZUVtcGxveWVlSW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVtcGxveWVlKGVtcGxveWVlOiAkZW1wbG95ZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGVtcGxveWVlXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmNyZWF0ZUVtcGxveWVlLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBlbXBsb3llZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEVtcGxveWVlIE9iamVjdFxuICAgKiBAcGFyYW0ge1VwZGF0ZUVtcGxveWVlSW5wdXR9IGVtcGxveWVlIC0gVGhlIEVtcGxveWVlIE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSAtIFRoZSBpZCBvZiB0aGUgRW1wbG95ZWUgT2JqZWN0XG4gICAqL1xuICB1cGRhdGUoaWQ6IHN0cmluZywgZW1wbG95ZWU6IFVwZGF0ZUVtcGxveWVlSW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gdXBkYXRlRW1wbG95ZWVNdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkZW1wbG95ZWU6IFVwZGF0ZUVtcGxveWVlSW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVtcGxveWVlKGlkOiAkaWQsIGVtcGxveWVlOiAkZW1wbG95ZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIGVtcGxveWVlXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZUVtcGxveWVlLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBFbXBsb3llZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEVtcGxveWVlIE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZGVsZXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gZGVsZXRlRW1wbG95ZWUgKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVFbXBsb3llZShpZDogJGlkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kZWxldGVFbXBsb3llZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnJvbGwgYSBuZXcgRkNNIHRva2VuIGZvciB0ZXJtaW5hbCBhcHBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBFbXBsb3llZSBPYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gVGhlIEZDTSB0b2tlbiBmb3IgdGhlIFRlcm1pbmFsIE1vYmlsZSBBcHBcbiAgICogQHJldHVybnMge1Byb21pc2U8RW1wbG95ZWU+fVxuICAgKi9cbiAgZW5yb2xsVGVybWluYWxGY20oaWQ6IHN0cmluZywgdG9rZW46IHN0cmluZyk6IFByb21pc2U8RW1wbG95ZWU+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGVucm9sbEVtcGxveWVlVGVybWluYWxGY21Ub2tlbiAoJGlkOiBTdHJpbmchLCAkdG9rZW46IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5yb2xsRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuKGlkOiAkaWQsIHRva2VuOiAkdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHRva2VuXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmVucm9sbEVtcGxveWVlVGVybWluYWxGY21Ub2tlbik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXZva2UgYSBGQ00gdG9rZW4gZm9yIHRlcm1pbmFsIGFwcFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBUaGUgRkNNIHRva2VuIGZvciB0aGUgVGVybWluYWwgTW9iaWxlIEFwcFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgcmV2b2tlVGVybWluYWxGY20odG9rZW46IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiByZXZva2VFbXBsb3llZVRlcm1pbmFsRmNtVG9rZW4gKCR0b2tlbjogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICByZXZva2VFbXBsb3llZVRlcm1pbmFsRmNtVG9rZW4odG9rZW46ICR0b2tlbilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgdG9rZW5cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQucmV2b2tlRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBhbiBlbXBsb3llZSBwYXNzd29yZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBJZCBvZiB0aGUgZW1wbG95ZWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsX2FkZHJlc3MgLSBFbWFpbCBhZGRyZXNzIG9mIHRoZSBlbXBsb3llZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29kZSAtIFJlc2V0IGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIC8vUVVFU1RJT04gaWQgYW5kIGVtYWlsX2FkZHJlc3MgYXJlIG9wdGlvbmFsPz9cbiAgcmVzZXRFbXBsb3llZVBhc3N3b3JkKFxuICAgIGlkOiBzdHJpbmcgfCBudWxsLFxuICAgIGVtYWlsX2FkZHJlc3M6IHN0cmluZyB8IG51bGwsXG4gICAgY29kZTogc3RyaW5nLFxuICAgIHBhc3N3b3JkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIHJlc2V0RW1wbG95ZWVQYXNzd29yZCAoJGlkOiBTdHJpbmcsICRlbWFpbF9hZGRyZXNzOlN0cmluZywgJGNvZGU6U3RyaW5nISwgJHBhc3N3b3JkOlN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRFbXBsb3llZVBhc3N3b3JkKGlkOiAkaWQsIGVtYWlsX2FkZHJlc3M6ICRlbWFpbF9hZGRyZXNzLCBjb2RlOiAkY29kZSwgcGFzc3dvcmQ6ICRwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICBjb2RlLFxuICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnJlc2V0RW1wbG95ZWVQYXNzd29yZC5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBwYXNzd29yZCByZXNldCBjb2RlIHRvIGVtcGxveWVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbF9hZGRyZXNzIC0gSWQgb2YgdGhlIGVtcGxveWVlXG4gICAqIEBwYXJhbSB7TWV0aG9kfSBtZXRob2QgLSBUaGUgbmV3IHBhc3N3b3JkIHRvIHNldFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgc2VuZFBhc3N3b3JkUmVzZXRDb2RlKFxuICAgIGVtYWlsX2FkZHJlc3M6IHN0cmluZyxcbiAgICBtZXRob2Q6IFJlc2V0Q29kZVNlbmRNZXRob2QgfCBudWxsXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBzZW5kRW1wbG95ZWVQYXNzd29yZFJlc2V0Q29kZSAoJGVtYWlsX2FkZHJlc3M6IFN0cmluZyEsICRtZXRob2Q6UmVzZXRDb2RlU2VuZE1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICBzZW5kRW1wbG95ZWVQYXNzd29yZFJlc2V0Q29kZShlbWFpbF9hZGRyZXNzOiAkZW1haWxfYWRkcmVzcywgbWV0aG9kOiRtZXRob2QpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgbWV0aG9kXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnNlbmRFbXBsb3llZVBhc3N3b3JkUmVzZXRDb2RlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIHNpbXBsZSBIVFRQIHNlcnZlciBsaW5rXG4gKiBBdXRob3I6IEp1biBaaGVuZ1xuICogTGljZW5zZTogVU5MSUNFTlNFRFxuICovXG5cbmltcG9ydCB7IFN5bmNocm9ub3VzTGluayB9IGZyb20gXCIuL1N5bmNocm9ub3VzTGlua1wiO1xuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuXG5leHBvcnQgY2xhc3MgSHR0cExpbmsgZXh0ZW5kcyBTeW5jaHJvbm91c0xpbmsge1xuICAvLyBfdXJsOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgdGhlIGxpbmsgd2l0aCBVUkxcbiAgICogQHBhcmFtIHVybFxuICAgKi9cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcpIHtcbiAgICBzdXBlcih1cmwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBhIGdldCByZXF1ZXN0XG4gICAqIEBwYXJhbSBjb25maWdcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn1cbiAgICovXG4gIGdldChjb25maWc6IG9iamVjdCA9IHt9KTogUHJvbWlzZTxvYmplY3Q+IHtcbiAgICByZXR1cm4gdGhpcy5ydW4oT2JqZWN0LmFzc2lnbihjb25maWcsIHsgbWV0aG9kOiBcImdldFwiIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gYSBwb3N0IHJlcXVlc3RcbiAgICogQHBhcmFtIGNvbmZpZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fVxuICAgKi9cbiAgcG9zdChjb25maWc6IG9iamVjdCA9IHt9KTogUHJvbWlzZTx7IGRhdGE6IHsgaWQ6IHN0cmluZyB9IH0+IHtcbiAgICByZXR1cm4gdGhpcy5ydW4oT2JqZWN0LmFzc2lnbihjb25maWcsIHsgbWV0aG9kOiBcInBvc3RcIiB9KSk7XG4gIH1cblxuICAvKipcbiAgICogUnVuIGEgcHV0IHJlcXVlc3RcbiAgICogQHBhcmFtIGNvbmZpZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fVxuICAgKi9cbiAgcHV0KGNvbmZpZzogb2JqZWN0ID0ge30pOiBQcm9taXNlPG9iamVjdD4ge1xuICAgIHJldHVybiB0aGlzLnJ1bihPYmplY3QuYXNzaWduKGNvbmZpZywgeyBtZXRob2Q6IFwicHV0XCIgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBhIGRlbGV0ZSByZXF1ZXN0XG4gICAqIEBwYXJhbSBjb25maWdcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn1cbiAgICovXG4gIGRlbGV0ZShjb25maWc6IG9iamVjdCA9IHt9KTogUHJvbWlzZTxvYmplY3Q+IHtcbiAgICByZXR1cm4gdGhpcy5ydW4oT2JqZWN0LmFzc2lnbihjb25maWcsIHsgbWV0aG9kOiBcImRlbGV0ZVwiIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIGEgbmV3IGh0dHAgcmVxdWVzdFxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XG4gICAqL1xuICBydW4oY29uZmlnOiB7IG1ldGhvZDogYW55OyBkYXRhPzogYW55OyBoZWFkZXJzPzogYW55IH0pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBheGlvc1xuICAgICAgICAucmVxdWVzdCh7XG4gICAgICAgICAgbWV0aG9kOiBjb25maWcubWV0aG9kLFxuICAgICAgICAgIHVybDogdGhpcy5fdXJsLFxuICAgICAgICAgIGRhdGE6IGNvbmZpZy5kYXRhID8gY29uZmlnLmRhdGEgOiB7fSxcbiAgICAgICAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyA/IGNvbmZpZy5oZWFkZXJzIDoge31cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogRW50cnkgZmlsZSBmb3IgQ2hlYXByRWF0cyBOb2RlLmpzIFNES1xuICogQXV0aG9yOiBKdW4gWmhlbmdcbiAqIExpY2Vuc2U6IFVOTElDRU5TRURcbiAqL1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHAvQXBwXCI7XG5cbi8vIGRlY2xhcmUgZ2xvYmFsIHtcbi8vICAgaW50ZXJmYWNlIFdpbmRvdyB7XG4vLyAgICAgQ0U6IEFwcDtcbi8vICAgfVxuLy8gfVxuXG5jb25zdCBhcHA6IEFwcCA9IG5ldyBBcHAoKTtcbmV4cG9ydCBkZWZhdWx0IGFwcDtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgKDxhbnk+d2luZG93KS5DRSA9IGFwcDtcbn1cbiIsImltcG9ydCB7IHN0clRvSWRlbnRpZmllciB9IGZyb20gXCIuL3V0aWwvc3RyVG9JZGVudGlmaWVyXCI7XG5pbXBvcnQgeyBDaGVhcHJFYXRzR3JhcGhRTEFkYXB0b3IgfSBmcm9tIFwiLi9hZGFwdG9ycy9DaGVhcHJFYXRzR3JhcGhRTEFkYXB0b3JcIjtcbmltcG9ydCBwYWNrYWdlRG90SnNvbiBmcm9tIFwiLi4vdmVyc2lvblwiO1xuXG4vLyBBREQgQ09OVFJPTExFUiBJTVBPUlRTIEJFTE9XXG5pbXBvcnQgeyBBdXRob3JpemF0aW9uQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0F1dGhvcml6YXRpb25Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBDYXJ0Q29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0NhcnRDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBDYXRlZ29yeUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9DYXRlZ29yeUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEN1c3RvbWVyQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0N1c3RvbWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ3VzdG9tZXJUb2tlbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9DdXN0b21lclRva2VuQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ291cG9uQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0NvdXBvbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEVtcGxveWVlQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0VtcGxveWVlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgRW1wbG95ZWVUb2tlbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9FbXBsb3llZVRva2VuQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgR3JhcGhDb250cm9sbGVyLCBRdWVyeVJlc3VsdCB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0dyYXBoQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgSGVhZE9mZmljZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9IZWFkT2ZmaWNlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTWVudUl0ZW1Db250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvTWVudUl0ZW1Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNb2RpZmllckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9Nb2RpZmllckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFZlbmRvckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9WZW5kb3JDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBWZXJpZmljYXRpb25Db250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvVmVyaWZpY2F0aW9uQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9WYWxpZGF0aW9uQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgU3VydmV5Q29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL1N1cnZleUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE9yZGVyQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL09yZGVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgSW1hZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvSW1hZ2VDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBQYXlvdXRDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvUGF5b3V0Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgRXhwbG9yZVBhZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvRXhwbG9yZVBhZ2VDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBGbGFzaFNhbGVDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvRmxhc2hTYWxlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgVGlwQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL1RpcENvbnRyb2xsZXJcIjtcbmltcG9ydCB7IExveWFsdHlQcm9ncmFtQ29udHJvbGxlciB9IGZyb20gXCIuL2NvbnRyb2xsZXJzL0xveWFsdHlQcm9ncmFtQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTG95YWx0eUNhcmRDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvTG95YWx0eUNhcmRDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBSZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb250cm9sbGVycy9SZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFJlbW90ZUNvbmZpZ3VyYXRpb25Db250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlcnMvUmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXJcIjtcbmltcG9ydCBlbmRwb2ludHMgZnJvbSBcIi4uL2NvbmZpZy9lbmRwb2ludHNcIjtcblxubGV0IGNvbmZpZyA9IHtcbiAgZW5kcG9pbnRzOiBlbmRwb2ludHNcbn07XG5cbi8qKlxuICogTWFpbiBlbnRyeSBwb2ludCBvZiB0aGUgU0RLXG4gKi9cbmV4cG9ydCBjbGFzcyBBcHAge1xuICBfdG9rZW46IHN0cmluZyB8IG51bGw7XG4gIF9hZGFwdG9yOiBDaGVhcHJFYXRzR3JhcGhRTEFkYXB0b3I7XG4gIF9hdXRob3JpemF0aW9uQ29udHJvbGxlcjogQXV0aG9yaXphdGlvbkNvbnRyb2xsZXI7XG4gIF9jYXJ0Q29udHJvbGxlcjogQ2FydENvbnRyb2xsZXI7XG4gIF9jYXRlZ29yeUNvbnRyb2xsZXI6IENhdGVnb3J5Q29udHJvbGxlcjtcbiAgX2N1c3RvbWVyQ29udHJvbGxlcjogQ3VzdG9tZXJDb250cm9sbGVyO1xuICBfY3VzdG9tZXJUb2tlbkNvbnRyb2xsZXI6IEN1c3RvbWVyVG9rZW5Db250cm9sbGVyO1xuICBfY291cG9uQ29udHJvbGxlcjogQ291cG9uQ29udHJvbGxlcjtcbiAgX2VtcGxveWVlQ29udHJvbGxlcjogRW1wbG95ZWVDb250cm9sbGVyO1xuICBfZW1wbG95ZWVUb2tlbkNvbnRyb2xsZXI6IEVtcGxveWVlVG9rZW5Db250cm9sbGVyO1xuICBfZ3JhcGhDb250cm9sbGVyOiBHcmFwaENvbnRyb2xsZXI7XG4gIF9oZWFkT2ZmaWNlQ29udHJvbGxlcjogSGVhZE9mZmljZUNvbnRyb2xsZXI7XG4gIF9tZW51SXRlbUNvbnRyb2xsZXI6IE1lbnVJdGVtQ29udHJvbGxlcjtcbiAgX21vZGlmaWVyQ29udHJvbGxlcjogTW9kaWZpZXJDb250cm9sbGVyO1xuICBfdmVuZG9yQ29udHJvbGxlcjogVmVuZG9yQ29udHJvbGxlcjtcbiAgX3ZlcmlmaWNhdGlvbkNvbnRyb2xsZXI6IFZlcmlmaWNhdGlvbkNvbnRyb2xsZXI7XG4gIF92YWxpZGF0aW9uQ29udHJvbGxlcjogVmFsaWRhdGlvbkNvbnRyb2xsZXI7XG4gIF9zdXJ2ZXlDb250cm9sbGVyOiBTdXJ2ZXlDb250cm9sbGVyO1xuICBfb3JkZXJDb250cm9sbGVyOiBPcmRlckNvbnRyb2xsZXI7XG4gIF9pbWFnZUNvbnRyb2xsZXI6IEltYWdlQ29udHJvbGxlcjtcbiAgX3BheW91dENvbnRyb2xsZXI6IFBheW91dENvbnRyb2xsZXI7XG4gIF9leHBsb3JlUGFnZUNvbnRyb2xsZXI6IEV4cGxvcmVQYWdlQ29udHJvbGxlcjtcbiAgX2ZsYXNoU2FsZUNvbnRyb2xsZXI6IEZsYXNoU2FsZUNvbnRyb2xsZXI7XG4gIF90aXBDb250cm9sbGVyOiBUaXBDb250cm9sbGVyO1xuICBfbG95YWx0eVByb2dyYW1Db250cm9sbGVyOiBMb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXI7XG4gIF9sb3lhbHR5Q2FyZENvbnRyb2xsZXI6IExveWFsdHlDYXJkQ29udHJvbGxlcjtcbiAgX3JlZGVlbWFibGVJdGVtQ29udHJvbGxlcjogUmVkZWVtYWJsZUl0ZW1Db250cm9sbGVyO1xuICBfcmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXI6IFJlbW90ZUNvbmZpZ3VyYXRpb25Db250cm9sbGVyO1xuICAvKipcbiAgICogQ29uc3RydWN0IHRoZSBBcHAgaW5zdGFuY2UuXG4gICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3Rva2VuID0gbnVsbDtcblxuICAgIHRoaXMuX2FkYXB0b3IgPSBuZXcgQ2hlYXByRWF0c0dyYXBoUUxBZGFwdG9yKHtcbiAgICAgIGdyYXBoUUxFbmRwb2ludDogdGhpcy5nZXRDb25maWd1cmF0aW9uKCkuZW5kcG9pbnRzLmdyYXBoUUxFbmRwb2ludFxuICAgICAgICAucHJvZHVjdGlvblxuICAgIH0pO1xuICAgIC8vIEFERCBDT05UUk9MTEVSUyBCRUxPV1xuICAgIHRoaXMuX2F1dGhvcml6YXRpb25Db250cm9sbGVyID0gbmV3IEF1dGhvcml6YXRpb25Db250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX2NhcnRDb250cm9sbGVyID0gbmV3IENhcnRDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX2NhdGVnb3J5Q29udHJvbGxlciA9IG5ldyBDYXRlZ29yeUNvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fY3VzdG9tZXJDb250cm9sbGVyID0gbmV3IEN1c3RvbWVyQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9jdXN0b21lclRva2VuQ29udHJvbGxlciA9IG5ldyBDdXN0b21lclRva2VuQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9jb3Vwb25Db250cm9sbGVyID0gbmV3IENvdXBvbkNvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fZW1wbG95ZWVDb250cm9sbGVyID0gbmV3IEVtcGxveWVlQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9lbXBsb3llZVRva2VuQ29udHJvbGxlciA9IG5ldyBFbXBsb3llZVRva2VuQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9ncmFwaENvbnRyb2xsZXIgPSBuZXcgR3JhcGhDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX2hlYWRPZmZpY2VDb250cm9sbGVyID0gbmV3IEhlYWRPZmZpY2VDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX21lbnVJdGVtQ29udHJvbGxlciA9IG5ldyBNZW51SXRlbUNvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fbW9kaWZpZXJDb250cm9sbGVyID0gbmV3IE1vZGlmaWVyQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl92ZW5kb3JDb250cm9sbGVyID0gbmV3IFZlbmRvckNvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fdmVyaWZpY2F0aW9uQ29udHJvbGxlciA9IG5ldyBWZXJpZmljYXRpb25Db250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX3ZhbGlkYXRpb25Db250cm9sbGVyID0gbmV3IFZhbGlkYXRpb25Db250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX3N1cnZleUNvbnRyb2xsZXIgPSBuZXcgU3VydmV5Q29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9vcmRlckNvbnRyb2xsZXIgPSBuZXcgT3JkZXJDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX2ltYWdlQ29udHJvbGxlciA9IG5ldyBJbWFnZUNvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fcGF5b3V0Q29udHJvbGxlciA9IG5ldyBQYXlvdXRDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX2V4cGxvcmVQYWdlQ29udHJvbGxlciA9IG5ldyBFeHBsb3JlUGFnZUNvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fZmxhc2hTYWxlQ29udHJvbGxlciA9IG5ldyBGbGFzaFNhbGVDb250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX3RpcENvbnRyb2xsZXIgPSBuZXcgVGlwQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9sb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXIgPSBuZXcgTG95YWx0eVByb2dyYW1Db250cm9sbGVyKHRoaXMpO1xuICAgIHRoaXMuX2xveWFsdHlDYXJkQ29udHJvbGxlciA9IG5ldyBMb3lhbHR5Q2FyZENvbnRyb2xsZXIodGhpcyk7XG4gICAgdGhpcy5fcmVkZWVtYWJsZUl0ZW1Db250cm9sbGVyID0gbmV3IFJlZGVlbWFibGVJdGVtQ29udHJvbGxlcih0aGlzKTtcbiAgICB0aGlzLl9yZW1vdGVDb25maWd1cmF0aW9uQ29udHJvbGxlciA9IG5ldyBSZW1vdGVDb25maWd1cmF0aW9uQ29udHJvbGxlcihcbiAgICAgIHRoaXNcbiAgICApO1xuICB9XG5cbiAgLy8gQUREIEdFVFRFUlMgQkVMT1dcblxuICBnZXQgQXV0aG9yaXphdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0VG9rZW5TY29wZTogdGhpcy5fYXV0aG9yaXphdGlvbkNvbnRyb2xsZXIuZ2V0VG9rZW5TY29wZVxuICAgIH07XG4gIH1cblxuICBnZXQgQ2FydCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlTm90ZTogdGhpcy5fY2FydENvbnRyb2xsZXIudXBkYXRlTm90ZSxcbiAgICAgIHJlbW92ZUNvdXBvbjogdGhpcy5fY2FydENvbnRyb2xsZXIucmVtb3ZlQ291cG9uLFxuICAgICAgYXBwbHlDb3Vwb246IHRoaXMuX2NhcnRDb250cm9sbGVyLmFwcGx5Q291cG9uLFxuICAgICAgZGVsZXRlOiB0aGlzLl9jYXJ0Q29udHJvbGxlci5kZWxldGUsXG4gICAgICByZW1vdmVJdGVtOiB0aGlzLl9jYXJ0Q29udHJvbGxlci5yZW1vdmVJdGVtLFxuICAgICAgYWRkSXRlbTogdGhpcy5fY2FydENvbnRyb2xsZXIuYWRkSXRlbSxcbiAgICAgIGNyZWF0ZTogdGhpcy5fY2FydENvbnRyb2xsZXIuY3JlYXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2F0ZWdvcnkgcmVsYXRlZCBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogQ2F0ZWdvcnlDb250cm9sbGVyLmNyZWF0ZSwgZGVsZXRlOiBDYXRlZ29yeUNvbnRyb2xsZXIuZGVsZXRlLCB1cGRhdGU6IENhdGVnb3J5Q29udHJvbGxlci51cGRhdGUsIGJhdGNoVXBkYXRlOiBDYXRlZ29yeUNvbnRyb2xsZXIuYmF0Y2hVcGRhdGV9fVxuICAgKi9cbiAgZ2V0IENhdGVnb3J5KCkge1xuICAgIHJldHVybiB7XG4gICAgICBjcmVhdGU6IHRoaXMuX2NhdGVnb3J5Q29udHJvbGxlci5jcmVhdGUsXG4gICAgICBkZWxldGU6IHRoaXMuX2NhdGVnb3J5Q29udHJvbGxlci5kZWxldGUsXG4gICAgICB1cGRhdGU6IHRoaXMuX2NhdGVnb3J5Q29udHJvbGxlci51cGRhdGUsXG4gICAgICBiYXRjaFVwZGF0ZTogdGhpcy5fY2F0ZWdvcnlDb250cm9sbGVyLmJhdGNoVXBkYXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VzdG9tZXIgcmVsYXRlZCBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogQ3VzdG9tZXJDb250cm9sbGVyLmNyZWF0ZSwgZW5yb2xsQXBuc1Rva2VuOiBDdXN0b21lckNvbnRyb2xsZXIuZW5yb2xsQXBuc1Rva2VuLCByZXZva2VBcG5zVG9rZW46IEN1c3RvbWVyQ29udHJvbGxlci5yZXZva2VBcG5zVG9rZW4sIGVucm9sbEZjbVRva2VuOiBDdXN0b21lckNvbnRyb2xsZXIuZW5yb2xsRmNtVG9rZW4sIHJldm9rZUZjbVRva2VuOiBDdXN0b21lckNvbnRyb2xsZXIucmV2b2tlRmNtVG9rZW4sIHVwZGF0ZTogQ3VzdG9tZXJDb250cm9sbGVyLnVwZGF0ZSwgdXBkYXRlQ3JlZGl0Q2FyZDogQ3VzdG9tZXJDb250cm9sbGVyLnVwZGF0ZUNyZWRpdENhcmQsIGNyZWF0ZVdhbGxldDogQ3VzdG9tZXJDb250cm9sbGVyLmNyZWF0ZVdhbGxldCwgcmVsb2FkV2FsbGV0OiBDdXN0b21lckNvbnRyb2xsZXIucmVsb2FkV2FsbGV0LCByZXNldFBhc3N3b3JkOiBDdXN0b21lckNvbnRyb2xsZXIucmVzZXRQYXNzd29yZCwgc2VuZFBhc3N3b3JkUmVzZXRDb2RlOiBDdXN0b21lckNvbnRyb2xsZXIuc2VuZFBhc3N3b3JkUmVzZXRDb2RlLCByZWZ1bmRXYWxsZXQ6IEN1c3RvbWVyQ29udHJvbGxlci5yZWZ1bmRXYWxsZXQsIGNyZWF0ZVdhbGxldFRyYW5zYWN0aW9uOkN1c3RvbWVyQ29udHJvbGxlci5jcmVhdGVXYWxsZXRUcmFuc2FjdGlvbiwgYWRkRmF2b3VyaXRlVmVuZG9yOkN1c3RvbWVyQ29udHJvbGxlci5hZGRGYXZvdXJpdGVWZW5kb3IsIHJlbW92ZUZhdm91cml0ZVZlbmRvcjpDdXN0b21lckNvbnRyb2xsZXIucmVtb3ZlRmF2b3VyaXRlVmVuZG9yLCBhZGRGYXZvdXJpdGVJdGVtOkN1c3RvbWVyQ29udHJvbGxlci5hZGRGYXZvdXJpdGVJdGVtLCByZW1vdmVGYXZvdXJpdGVJdGVtOkN1c3RvbWVyQ29udHJvbGxlci5yZW1vdmVGYXZvdXJpdGVJdGVtfX1cbiAgICovXG4gIGdldCBDdXN0b21lcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgZW5yb2xsQXBuc1Rva2VuOiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIuZW5yb2xsQXBuc1Rva2VuLFxuICAgICAgcmV2b2tlQXBuc1Rva2VuOiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIucmV2b2tlQXBuc1Rva2VuLFxuICAgICAgZW5yb2xsRmNtVG9rZW46IHRoaXMuX2N1c3RvbWVyQ29udHJvbGxlci5lbnJvbGxGY21Ub2tlbixcbiAgICAgIHJldm9rZUZjbVRva2VuOiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIucmV2b2tlRmNtVG9rZW4sXG4gICAgICB1cGRhdGU6IHRoaXMuX2N1c3RvbWVyQ29udHJvbGxlci51cGRhdGUsXG4gICAgICB1cGRhdGVDcmVkaXRDYXJkOiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIudXBkYXRlQ3JlZGl0Q2FyZCxcbiAgICAgIGNyZWF0ZVdhbGxldDogdGhpcy5fY3VzdG9tZXJDb250cm9sbGVyLmNyZWF0ZVdhbGxldCxcbiAgICAgIHJlbG9hZFdhbGxldDogdGhpcy5fY3VzdG9tZXJDb250cm9sbGVyLnJlbG9hZFdhbGxldCxcbiAgICAgIHJlc2V0UGFzc3dvcmQ6IHRoaXMuX2N1c3RvbWVyQ29udHJvbGxlci5yZXNldFBhc3N3b3JkLFxuICAgICAgc2VuZFBhc3N3b3JkUmVzZXRDb2RlOiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIuc2VuZFBhc3N3b3JkUmVzZXRDb2RlLFxuICAgICAgcmVmdW5kV2FsbGV0OiB0aGlzLl9jdXN0b21lckNvbnRyb2xsZXIucmVmdW5kV2FsbGV0LFxuICAgICAgY3JlYXRlV2FsbGV0VHJhbnNhY3Rpb246IHRoaXMuX2N1c3RvbWVyQ29udHJvbGxlci5jcmVhdGVXYWxsZXRUcmFuc2FjdGlvbixcbiAgICAgIGFkZEZhdm91cml0ZVZlbmRvcjogdGhpcy5fY3VzdG9tZXJDb250cm9sbGVyLmFkZEZhdm91cml0ZVZlbmRvcixcbiAgICAgIHJlbW92ZUZhdm91cml0ZVZlbmRvcjogdGhpcy5fY3VzdG9tZXJDb250cm9sbGVyLnJlbW92ZUZhdm91cml0ZVZlbmRvcixcbiAgICAgIGFkZEZhdm91cml0ZUl0ZW06IHRoaXMuX2N1c3RvbWVyQ29udHJvbGxlci5hZGRGYXZvdXJpdGVJdGVtLFxuICAgICAgcmVtb3ZlRmF2b3VyaXRlSXRlbTogdGhpcy5fY3VzdG9tZXJDb250cm9sbGVyLnJlbW92ZUZhdm91cml0ZUl0ZW1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXN0b21lciB0b2tlbiByZWxhdGVkIG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7Y3JlYXRlOiBDdXN0b21lclRva2VuQ29udHJvbGxlci5jcmVhdGV9fVxuICAgKi9cbiAgZ2V0IEN1c3RvbWVyVG9rZW4oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZTogdGhpcy5fY3VzdG9tZXJUb2tlbkNvbnRyb2xsZXIuY3JlYXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY291cG9uIHJlbGF0ZWQgbWV0aG9kcy5cbiAgICogQHJldHVybnMge3tjcmVhdGU6IENvdXBvbkNvbnRyb2xsZXIuY3JlYXRlfX1cbiAgICovXG4gIGdldCBDb3Vwb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZTogdGhpcy5fY291cG9uQ29udHJvbGxlci5jcmVhdGVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbXBsb3llZSByZWxhdGVkIG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7Y3JlYXRlOiBFbXBsb3llZUNvbnRyb2xsZXIuY3JlYXRlLCB1cGRhdGU6IEVtcGxveWVlQ29udHJvbGxlci51cGRhdGUsIGRlbGV0ZTogRW1wbG95ZWVDb250cm9sbGVyLmRlbGV0ZSwgZW5yb2xsVGVybWluYWxGY206IEVtcGxveWVlQ29udHJvbGxlci5lbnJvbGxUZXJtaW5hbEZjbSwgcmV2b2tlVGVybWluYWxGY206IEVtcGxveWVlQ29udHJvbGxlci5yZXZva2VUZXJtaW5hbEZjbSwgc2VuZFBhc3N3b3JkUmVzZXRDb2RlOiBFbXBsb3llZUNvbnRyb2xsZXIuc2VuZFBhc3N3b3JkUmVzZXRDb2RlfX1cbiAgICovXG4gIGdldCBFbXBsb3llZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9lbXBsb3llZUNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgdXBkYXRlOiB0aGlzLl9lbXBsb3llZUNvbnRyb2xsZXIudXBkYXRlLFxuICAgICAgZGVsZXRlOiB0aGlzLl9lbXBsb3llZUNvbnRyb2xsZXIuZGVsZXRlLFxuICAgICAgZW5yb2xsVGVybWluYWxGY206IHRoaXMuX2VtcGxveWVlQ29udHJvbGxlci5lbnJvbGxUZXJtaW5hbEZjbSxcbiAgICAgIHJldm9rZVRlcm1pbmFsRmNtOiB0aGlzLl9lbXBsb3llZUNvbnRyb2xsZXIucmV2b2tlVGVybWluYWxGY20sXG4gICAgICByZXNldEVtcGxveWVlUGFzc3dvcmQ6IHRoaXMuX2VtcGxveWVlQ29udHJvbGxlci5yZXNldEVtcGxveWVlUGFzc3dvcmQsXG4gICAgICBzZW5kUGFzc3dvcmRSZXNldENvZGU6IHRoaXMuX2VtcGxveWVlQ29udHJvbGxlci5zZW5kUGFzc3dvcmRSZXNldENvZGVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbXBsb3llZSB0b2tlbiByZWxhdGVkIG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7Y3JlYXRlOiBFbXBsb3llZVRva2VuQ29udHJvbGxlci5jcmVhdGV9fVxuICAgKi9cbiAgZ2V0IEVtcGxveWVlVG9rZW4oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZTogdGhpcy5fZW1wbG95ZWVUb2tlbkNvbnRyb2xsZXIuY3JlYXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZ3JhcGggcmVsYXRlZCBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e3F1ZXJ5OiBHcmFwaENvbnRyb2xsZXIucXVlcnl9fVxuICAgKi9cbiAgZ2V0IEdyYXBoKCk6IHsgcXVlcnk6IEdyYXBoQ29udHJvbGxlcltcInF1ZXJ5XCJdIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBxdWVyeTogdGhpcy5fZ3JhcGhDb250cm9sbGVyLnF1ZXJ5XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbWVudSBpdGVtIHJlbGF0ZWQgbWV0aG9kcy5cbiAgICogQHJldHVybnMge3tjcmVhdGU6IE1lbnVJdGVtQ29udHJvbGxlci5jcmVhdGUsIHVwZGF0ZTogTWVudUl0ZW1Db250cm9sbGVyLnVwZGF0ZSwgZGVsZXRlOiBNZW51SXRlbUNvbnRyb2xsZXIuZGVsZXRlfX1cbiAgICovXG4gIGdldCBNZW51SXRlbSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9tZW51SXRlbUNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgdXBkYXRlOiB0aGlzLl9tZW51SXRlbUNvbnRyb2xsZXIudXBkYXRlLFxuICAgICAgYmF0Y2hVcGRhdGU6IHRoaXMuX21lbnVJdGVtQ29udHJvbGxlci5iYXRjaFVwZGF0ZSxcbiAgICAgIGRlbGV0ZTogdGhpcy5fbWVudUl0ZW1Db250cm9sbGVyLmRlbGV0ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1vZGlmaWVyIHJlbGF0ZWQgbWV0aG9kcy5cbiAgICogQHJldHVybnMge3tjcmVhdGU6IE1vZGlmaWVyQ29udHJvbGxlci5jcmVhdGUsIHVwZGF0ZTogTW9kaWZpZXJDb250cm9sbGVyLnVwZGF0ZSwgZGVsZXRlOiBNb2RpZmllckNvbnRyb2xsZXIuZGVsZXRlfX1cbiAgICovXG4gIGdldCBNb2RpZmllcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9tb2RpZmllckNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgdXBkYXRlOiB0aGlzLl9tb2RpZmllckNvbnRyb2xsZXIudXBkYXRlLFxuICAgICAgZGVsZXRlOiB0aGlzLl9tb2RpZmllckNvbnRyb2xsZXIuZGVsZXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgb3JkZXIgcmVsYXRlZCBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogT3JkZXJDb250cm9sbGVyLmNyZWF0ZSwgY2FuY2VsOiBPcmRlckNvbnRyb2xsZXIuY2FuY2VsLCBiZWdpblByZXBhcmluZzogT3JkZXJDb250cm9sbGVyLmJlZ2luUHJlcGFyaW5nLCBwcmVwYXJlZDogT3JkZXJDb250cm9sbGVyLnByZXBhcmVkLCBjb21wbGV0ZTogT3JkZXJDb250cm9sbGVyLmNvbXBsZXRlfX1cbiAgICovXG4gIGdldCBPcmRlcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9vcmRlckNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgY2FuY2VsOiB0aGlzLl9vcmRlckNvbnRyb2xsZXIuY2FuY2VsLFxuICAgICAgYmVnaW5QcmVwYXJpbmc6IHRoaXMuX29yZGVyQ29udHJvbGxlci5iZWdpblByZXBhcmluZyxcbiAgICAgIHByZXBhcmVkOiB0aGlzLl9vcmRlckNvbnRyb2xsZXIucHJlcGFyZWQsXG4gICAgICBjb21wbGV0ZTogdGhpcy5fb3JkZXJDb250cm9sbGVyLmNvbXBsZXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgaGVhZCBvZmZpY2UgcmVsYXRlZCBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogSGVhZE9mZmljZUNvbnRyb2xsZXIuY3JlYXRlLCB1cGRhdGU6IEhlYWRPZmZpY2VDb250cm9sbGVyLnVwZGF0ZSwgZGVsZXRlOiBIZWFkT2ZmaWNlQ29udHJvbGxlci5kZWxldGV9fVxuICAgKi9cbiAgZ2V0IEhlYWRPZmZpY2UoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZTogdGhpcy5faGVhZE9mZmljZUNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgdXBkYXRlOiB0aGlzLl9oZWFkT2ZmaWNlQ29udHJvbGxlci51cGRhdGUsXG4gICAgICBkZWxldGU6IHRoaXMuX2hlYWRPZmZpY2VDb250cm9sbGVyLmRlbGV0ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZlcmlmaWNhdGlvbiBzZXJ2aWNlcyBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e3N0YXJ0VmVyaWZpY2F0aW9uU2Vzc2lvbjogVmVyaWZpY2F0aW9uQ29udHJvbGxlci5zdGFydFZlcmlmaWNhdGlvblNlc3Npb24sIGNoZWNrVmVyaWZpY2F0aW9uU2Vzc2lvbjogVmVyaWZpY2F0aW9uQ29udHJvbGxlci5jaGVja1ZlcmlmaWNhdGlvblNlc3Npb259fVxuICAgKi9cbiAgZ2V0IFZlcmlmaWNhdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRWZXJpZmljYXRpb25TZXNzaW9uOiB0aGlzLl92ZXJpZmljYXRpb25Db250cm9sbGVyXG4gICAgICAgIC5zdGFydFZlcmlmaWNhdGlvblNlc3Npb24sXG4gICAgICBjaGVja1ZlcmlmaWNhdGlvblNlc3Npb246IHRoaXMuX3ZlcmlmaWNhdGlvbkNvbnRyb2xsZXJcbiAgICAgICAgLmNoZWNrVmVyaWZpY2F0aW9uU2Vzc2lvblxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZlbmRvciByZWxhdGVkIG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7Y3JlYXRlOiBWZW5kb3JDb250cm9sbGVyLmNyZWF0ZSwgY3JlYXRlV2l0aEVtcGxveWVlOiBWZW5kb3JDb250cm9sbGVyLmNyZWF0ZVdpdGhFbXBsb3llZSwgdXBkYXRlOiBWZW5kb3JDb250cm9sbGVyLnVwZGF0ZSwgdXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzOiBWZW5kb3JDb250cm9sbGVyLnVwZGF0ZUFsbE1lbnVJdGVtc1N0YXR1cywgZGVsZXRlVmVuZG9yVGVzdGVyOiBWZW5kb3JDb250cm9sbGVyLmRlbGV0ZVZlbmRvclRlc3RlciwgYWRkVmVuZG9yVGVzdGVyQnlFbWFpbEFkZHJlc3M6IFZlbmRvckNvbnRyb2xsZXIuYWRkVmVuZG9yVGVzdGVyQnlFbWFpbEFkZHJlc3MsIHVwZGF0ZVZlbmRvckFwcHJvdmFsU3RhdHVzOiBWZW5kb3JDb250cm9sbGVyLnVwZGF0ZVZlbmRvckFwcHJvdmFsU3RhdHVzLCByZXF1ZXN0VmVuZG9yQXBwcm92YWw6IFZlbmRvckNvbnRyb2xsZXIucmVxdWVzdFZlbmRvckFwcHJvdmFsfX1cbiAgICovXG4gIGdldCBWZW5kb3IoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZTogdGhpcy5fdmVuZG9yQ29udHJvbGxlci5jcmVhdGUsXG4gICAgICBjcmVhdGVXaXRoRW1wbG95ZWU6IHRoaXMuX3ZlbmRvckNvbnRyb2xsZXIuY3JlYXRlV2l0aEVtcGxveWVlLFxuICAgICAgdXBkYXRlOiB0aGlzLl92ZW5kb3JDb250cm9sbGVyLnVwZGF0ZSxcbiAgICAgIHVwZGF0ZUFsbE1lbnVJdGVtc1N0YXR1czogdGhpcy5fdmVuZG9yQ29udHJvbGxlci51cGRhdGVBbGxNZW51SXRlbXNTdGF0dXMsXG4gICAgICBkZWxldGVWZW5kb3JUZXN0ZXI6IHRoaXMuX3ZlbmRvckNvbnRyb2xsZXIuZGVsZXRlVmVuZG9yVGVzdGVyLFxuICAgICAgYWRkVmVuZG9yVGVzdGVyQnlFbWFpbEFkZHJlc3M6IHRoaXMuX3ZlbmRvckNvbnRyb2xsZXJcbiAgICAgICAgLmFkZFZlbmRvclRlc3RlckJ5RW1haWxBZGRyZXNzLFxuICAgICAgdXBkYXRlVmVuZG9yQXBwcm92YWxTdGF0dXM6IHRoaXMuX3ZlbmRvckNvbnRyb2xsZXJcbiAgICAgICAgLnVwZGF0ZVZlbmRvckFwcHJvdmFsU3RhdHVzLFxuICAgICAgcmVxdWVzdFZlbmRvckFwcHJvdmFsOiB0aGlzLl92ZW5kb3JDb250cm9sbGVyLnJlcXVlc3RWZW5kb3JBcHByb3ZhbFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbGlkYXRpb24gc2VydmljZXMgbWV0aG9kcy5cbiAgICogQHJldHVybnMge3tDdXN0b21lcjoge3NpZ251cEVtYWlsOiBWYWxpZGF0aW9uQ29udHJvbGxlci5jdXN0b21lclNpZ251cEVtYWlsLCBzaWdudXBQaG9uZTogVmFsaWRhdGlvbkNvbnRyb2xsZXIuY3VzdG9tZXJTaWdudXBQaG9uZX19fVxuICAgKi9cbiAgZ2V0IFZhbGlkYXRpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEN1c3RvbWVyOiB7XG4gICAgICAgIHNpZ251cEVtYWlsOiB0aGlzLl92YWxpZGF0aW9uQ29udHJvbGxlci5jdXN0b21lclNpZ251cEVtYWlsLFxuICAgICAgICBzaWdudXBQaG9uZTogdGhpcy5fdmFsaWRhdGlvbkNvbnRyb2xsZXIuY3VzdG9tZXJTaWdudXBQaG9uZVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN1cnZleSByZWxhdGVkIG1ldGhvZHNcbiAgICogQHJldHVybnMge3tjcmVhdGU6IFN1cnZleUNvbnRyb2xsZXIuY3JlYXRlLCB1cGRhdGU6IFN1cnZleUNvbnRyb2xsZXIudXBkYXRlLCBhcmNoaXZlOiBTdXJ2ZXlDb250cm9sbGVyLmFyY2hpdmUsIGRlbGV0ZTogU3VydmV5Q29udHJvbGxlci5kZWxldGUsIHJlbGVhc2U6IFN1cnZleUNvbnRyb2xsZXIucmVsZWFzZSwgY3JlYXRlU3VydmV5UmVzcG9uc2U6IFN1cnZleUNvbnRyb2xsZXIuY3JlYXRlU3VydmV5UmVzcG9uc2V9fVxuICAgKi9cbiAgZ2V0IFN1cnZleSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9zdXJ2ZXlDb250cm9sbGVyLmNyZWF0ZSxcbiAgICAgIHVwZGF0ZTogdGhpcy5fc3VydmV5Q29udHJvbGxlci51cGRhdGUsXG4gICAgICBhcmNoaXZlOiB0aGlzLl9zdXJ2ZXlDb250cm9sbGVyLmFyY2hpdmUsXG4gICAgICBkZWxldGU6IHRoaXMuX3N1cnZleUNvbnRyb2xsZXIuZGVsZXRlLFxuICAgICAgcmVsZWFzZTogdGhpcy5fc3VydmV5Q29udHJvbGxlci5yZWxlYXNlLFxuICAgICAgY3JlYXRlU3VydmV5UmVzcG9uc2U6IHRoaXMuX3N1cnZleUNvbnRyb2xsZXIuY3JlYXRlU3VydmV5UmVzcG9uc2VcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbWFnZSBzZXJ2aWNlcyBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e3VwbG9hZDogSW1hZ2VDb250cm9sbGVyLnVwbG9hZCwgZ2V0TGluazogSW1hZ2VDb250cm9sbGVyLmdldExpbmt9fVxuICAgKi9cbiAgZ2V0IEltYWdlKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1cGxvYWQ6IHRoaXMuX2ltYWdlQ29udHJvbGxlci51cGxvYWQsXG4gICAgICBnZXRMaW5rOiB0aGlzLl9pbWFnZUNvbnRyb2xsZXIuZ2V0TGlua1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBheW91dCBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e3JlcXVlc3Q6IFBheW91dENvbnRyb2xsZXIucmVxdWVzdCwgdXBkYXRlOiBQYXlvdXRDb250cm9sbGVyLnVwZGF0ZSwgY2FuY2VsOiBQYXlvdXRDb250cm9sbGVyLmNhbmNlbCwgfX1cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBnZXQgUGF5b3V0KCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0OiB0aGlzLl9wYXlvdXRDb250cm9sbGVyLnJlcXVlc3QsXG4gICAgICB1cGRhdGU6IHRoaXMuX3BheW91dENvbnRyb2xsZXIudXBkYXRlLFxuICAgICAgY2FuY2VsOiB0aGlzLl9wYXlvdXRDb250cm9sbGVyLmNhbmNlbFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGV4cGxvcmUgcGFnZSBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e3JlcGxhY2U6IEV4cGxvcmVQYWdlQ29udHJvbGxlci5yZXBsYWNlfX1cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBnZXQgRXhwbG9yZVBhZ2UoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcGxhY2U6IHRoaXMuX2V4cGxvcmVQYWdlQ29udHJvbGxlci5yZXBsYWNlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZmxhc2ggc2FsZSBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogRmxhc2hTYWxlQ29udHJvbGxlci5jcmVhdGUsIHVwZGF0ZTogRmxhc2hTYWxlQ29udHJvbGxlci51cGRhdGV9fVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGdldCBGbGFzaFNhbGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNyZWF0ZTogdGhpcy5fZmxhc2hTYWxlQ29udHJvbGxlci5jcmVhdGUsXG4gICAgICB1cGRhdGU6IHRoaXMuX2ZsYXNoU2FsZUNvbnRyb2xsZXIudXBkYXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGlwIG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7Y3JlYXRlOiBUaXBDb250cm9sbGVyLmNyZWF0ZX19XG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgZ2V0IFRpcCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl90aXBDb250cm9sbGVyLmNyZWF0ZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxveWFsdHkgcHJvZ3JhbSBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogTG95YWx0eVByb2dyYW1Db250cm9sbGVyLmNyZWF0ZSwgdXBkYXRlOiBMb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXIudXBkYXRlLCBkZWxldGU6IExveWFsdHlQcm9ncmFtQ29udHJvbGxlci5kZWxldGV9fVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGdldCBMb3lhbHR5UHJvZ3JhbSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9sb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgdXBkYXRlOiB0aGlzLl9sb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXIudXBkYXRlLFxuICAgICAgZGVsZXRlOiB0aGlzLl9sb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXIuZGVsZXRlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbG95YWx0eSBjYXJkIG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7Y3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGw6IExveWFsdHlDYXJkQ29udHJvbGxlci5jcmVhdGVMb3lhbHR5Q2FyZEFuZEVucm9sbCwgYXdhcmRQb2ludHNUb0xveWFsdHlDYXJkOiBMb3lhbHR5Q2FyZENvbnRyb2xsZXIuYXdhcmRQb2ludHNUb0xveWFsdHlDYXJkLCBhd2FyZFNoYXJlYWJsZVBvaW50c1RvTG95YWx0eUNhcmQ6IExveWFsdHlDYXJkQ29udHJvbGxlci5hd2FyZFNoYXJlYWJsZVBvaW50c1RvTG95YWx0eUNhcmQsIHNoYXJlTG95YWx0eVBvaW50czogTG95YWx0eUNhcmRDb250cm9sbGVyLnNoYXJlTG95YWx0eVBvaW50cywgcmVkZWVtTG95YWx0eVBvaW50c0ZvckNvdXBvbjogTG95YWx0eUNhcmRDb250cm9sbGVyLnJlZGVlbUxveWFsdHlQb2ludHNGb3JDb3Vwb259fVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGdldCBMb3lhbHR5Q2FyZCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGw6IHRoaXMuX2xveWFsdHlDYXJkQ29udHJvbGxlclxuICAgICAgICAuY3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGwsXG4gICAgICBhd2FyZFBvaW50c1RvTG95YWx0eUNhcmQ6IHRoaXMuX2xveWFsdHlDYXJkQ29udHJvbGxlclxuICAgICAgICAuYXdhcmRQb2ludHNUb0xveWFsdHlDYXJkLFxuICAgICAgYXdhcmRTaGFyZWFibGVQb2ludHNUb0xveWFsdHlDYXJkOiB0aGlzLl9sb3lhbHR5Q2FyZENvbnRyb2xsZXJcbiAgICAgICAgLmF3YXJkU2hhcmVhYmxlUG9pbnRzVG9Mb3lhbHR5Q2FyZCxcbiAgICAgIHNoYXJlTG95YWx0eVBvaW50czogdGhpcy5fbG95YWx0eUNhcmRDb250cm9sbGVyLnNoYXJlTG95YWx0eVBvaW50cyxcbiAgICAgIHJlZGVlbUxveWFsdHlQb2ludHNGb3JDb3Vwb246IHRoaXMuX2xveWFsdHlDYXJkQ29udHJvbGxlclxuICAgICAgICAucmVkZWVtTG95YWx0eVBvaW50c0ZvckNvdXBvblxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlZGVlbWFibGUgaXRlbSBtZXRob2RzLlxuICAgKiBAcmV0dXJucyB7e2NyZWF0ZTogUmVkZWVtYWJsZUl0ZW1Db250cm9sbGVyLmNyZWF0ZSwgdXBkYXRlOiBSZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIudXBkYXRlLCBkZWxldGU6IFJlZGVlbWFibGVJdGVtQ29udHJvbGxlci5kZWxldGV9fVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGdldCBSZWRlZW1hYmxlSXRlbSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3JlYXRlOiB0aGlzLl9yZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIuY3JlYXRlLFxuICAgICAgdXBkYXRlOiB0aGlzLl9yZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIudXBkYXRlLFxuICAgICAgZGVsZXRlOiB0aGlzLl9yZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXIuZGVsZXRlXG4gICAgfTtcbiAgfVxuXG4gIGdldCBSZW1vdGVDb25maWd1cmF0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmZXRjaDogdGhpcy5fcmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXIuZmV0Y2gsXG4gICAgICBkZWxldGVSYXdDb25maWd1cmF0aW9uOiB0aGlzLl9yZW1vdGVDb25maWd1cmF0aW9uQ29udHJvbGxlclxuICAgICAgICAuZGVsZXRlUmF3Q29uZmlndXJhdGlvbixcbiAgICAgIHVwZGF0ZVJhd0NvbmZpZ3VyYXRpb246IHRoaXMuX3JlbW90ZUNvbmZpZ3VyYXRpb25Db250cm9sbGVyXG4gICAgICAgIC51cGRhdGVSYXdDb25maWd1cmF0aW9uLFxuICAgICAgY3JlYXRlUmF3Q29uZmlndXJhdGlvbjogdGhpcy5fcmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXJcbiAgICAgICAgLmNyZWF0ZVJhd0NvbmZpZ3VyYXRpb25cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB1dGlsaXR5IG1ldGhvZHMuXG4gICAqIEByZXR1cm5zIHt7c3RyVG9JZGVudGlmaWVyOiAoKnwoZnVuY3Rpb24oKTogcmVzdWx0KSl9fVxuICAgKi9cbiAgZ2V0IFV0aWwoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0clRvSWRlbnRpZmllclxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgbmV0d29yayBhZGFwdG9yIGluc3RhbmNlXG4gICAqIEByZXR1cm5zIHtDaGVhcHJFYXRzR3JhcGhRTEFkYXB0b3J9XG4gICAqL1xuICBnZXRBZGFwdG9yKCkge1xuICAgIHJldHVybiB0aGlzLl9hZGFwdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHt7ZW5kcG9pbnRzOiAoe2dyYXBoUUxFbmRwb2ludDoge3Byb2R1Y3Rpb246IHN0cmluZ30sIHZlcmlmaWNhdGlvbkVuZHBvaW50OiB7cHJvZHVjdGlvbjogc3RyaW5nfSwgdmFsaWRhdGlvbkVuZHBvaW50OiB7cHJvZHVjdGlvbjogc3RyaW5nfSwgaW1hZ2VFbmRwb2ludDoge3Byb2R1Y3Rpb246IHN0cmluZywgZGlzdHJpYnV0aW9uOiBzdHJpbmd9fXx7Z3JhcGhRTEVuZHBvaW50LCB2ZXJpZmljYXRpb25FbmRwb2ludCwgdmFsaWRhdGlvbkVuZHBvaW50LCBpbWFnZUVuZHBvaW50fSl9fVxuICAgKi9cbiAgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjdXJyZW50IGF1dGhlbnRpY2F0aW9uIHRva2VuXG4gICAqIEBwYXJhbSB0b2tlblxuICAgKi9cbiAgc2V0QXV0aGVudGljYXRpb25Ub2tlbih0b2tlbjogc3RyaW5nKSB7XG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgICB0aGlzLl9hZGFwdG9yLnNldEF1dGhlbnRpY2F0aW9uVG9rZW4odG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGF1dGhlbnRpY2F0aW9uIHRva2VuXG4gICAqIEByZXR1cm5zIHtudWxsfHN0cmluZ31cbiAgICovXG4gIGdldEF1dGhlbnRpY2F0aW9uVG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiBjdXJyZW50IFNESyBWZXJzaW9uIGluIGNvbXBhdGlibGVcbiAgICogQHJldHVybnMge251bGx8Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29tcGF0aWJsZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBzZGtWZXJzaW9uID0gcGFja2FnZURvdEpzb24udmVyc2lvbjtcbiAgICBsZXQgcXVlcnlTdHJpbmcgPSBgXG4gICAgICAgICAgICBxdWVyeSB7XG4gICAgICAgICAgICAgICAgaXNfc2RrX3ZlcnNpb25fc3VwcG9ydGVkKHZlcnNpb246XCIke3Nka1ZlcnNpb259XCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuR3JhcGgucXVlcnkocXVlcnlTdHJpbmcpXG4gICAgICAgIC50aGVuKChkYXRhOiBRdWVyeVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoZGF0YS5pc19zZGtfdmVyc2lvbl9zdXBwb3J0ZWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgQXBvbGxvIGVuZHBvaW50LlxuICAgKiBXQVJOSU5HOiBFTkQgT0YgTElGRVxuICAgKiBQbGVhc2UgdXNlIHNldEdyYXBoUUxFbmRwb2ludEluc3RlYWRcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogQHBhcmFtIGVuZHBvaW50XG4gICAqL1xuICBzZXRBcG9sbG9FbmRwb2ludChlbmRwb2ludDogc3RyaW5nKSB7XG4gICAgdGhpcy5zZXRHcmFwaFFMRW5kcG9pbnQoZW5kcG9pbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBHcmFwaFFMIGVuZHBvaW50LlxuICAgKiBAcGFyYW0gZW5kcG9pbnRcbiAgICovXG4gIHNldEdyYXBoUUxFbmRwb2ludChlbmRwb2ludDogc3RyaW5nKSB7XG4gICAgY29uZmlnLmVuZHBvaW50cy5ncmFwaFFMRW5kcG9pbnQucHJvZHVjdGlvbiA9IGVuZHBvaW50O1xuICAgIHRoaXMuX2FkYXB0b3IgPSBuZXcgQ2hlYXByRWF0c0dyYXBoUUxBZGFwdG9yKHtcbiAgICAgIGdyYXBoUUxFbmRwb2ludDogdGhpcy5nZXRDb25maWd1cmF0aW9uKCkuZW5kcG9pbnRzLmdyYXBoUUxFbmRwb2ludFxuICAgICAgICAucHJvZHVjdGlvblxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2ZXJpZmljYXRpb25FbmRwb2ludC5wcm9kdWN0aW9uXG4gICAqIEBwYXJhbSBlbmRwb2ludFxuICAgKi9cbiAgc2V0VmVyaWZpY2F0aW9uRW5kcG9pbnQoZW5kcG9pbnQ6IHN0cmluZykge1xuICAgIGNvbmZpZy5lbmRwb2ludHMudmVyaWZpY2F0aW9uRW5kcG9pbnQucHJvZHVjdGlvbiA9IGVuZHBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2YWxpZGF0aW9uRW5kcG9pbnQucHJvZHVjdGlvblxuICAgKiBAcGFyYW0gZW5kcG9pbnRcbiAgICovXG4gIHNldFZhbGlkYXRpb25FbmRwb2ludChlbmRwb2ludDogc3RyaW5nKSB7XG4gICAgY29uZmlnLmVuZHBvaW50cy52YWxpZGF0aW9uRW5kcG9pbnQucHJvZHVjdGlvbiA9IGVuZHBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBpbWFnZUVuZHBvaW50LnByb2R1Y3Rpb25cbiAgICogQHBhcmFtIGVuZHBvaW50XG4gICAqL1xuICBzZXRJbWFnZUVuZHBvaW50KGVuZHBvaW50OiBzdHJpbmcpIHtcbiAgICBjb25maWcuZW5kcG9pbnRzLmltYWdlRW5kcG9pbnQucHJvZHVjdGlvbiA9IGVuZHBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBpbWFnZUVuZHBvaW50LmRpc3RyaWJ1dGlvblxuICAgKiBAcGFyYW0gZW5kcG9pbnRcbiAgICovXG4gIHNldEltYWdlRGlzdHJpYnV0aW9uRW5kcG9pbnQoZW5kcG9pbnQ6IHN0cmluZykge1xuICAgIGNvbmZpZy5lbmRwb2ludHMuaW1hZ2VFbmRwb2ludC5kaXN0cmlidXRpb24gPSBlbmRwb2ludDtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHN0clRvSWRlbnRpZmllcihzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCByZXN1bHQ6IHN0cmluZyA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0cltpXS5tYXRjaCgvW0EtWmEtejAtOV0vKSkge1xuICAgICAgcmVzdWx0ICs9IHN0cltpXS50b0xvd2VyQ2FzZSgpO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAoc3RyW2ldID09PSBcIl9cIiB8fCBzdHJbaV0gPT09IFwiIFwiIHx8IHN0cltpXSA9PT0gXCItXCIpICYmXG4gICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdICE9PSBcIl9cIlxuICAgICkge1xuICAgICAgcmVzdWx0ICs9IFwiX1wiO1xuICAgIH1cbiAgfVxuICBpZiAocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9PT0gXCJfXCIpIHtcbiAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgcmVzdWx0Lmxlbmd0aCAtIDEpO1xuICB9XG4gIGlmIChyZXN1bHRbMF0gPT09IFwiX1wiKSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDEsIHJlc3VsdC5sZW5ndGgpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKlxuICogTmV0d29yayBhZGFwdG9yIGZvciBDaGVhcHJFYXRzIEdyYXBoUUxcbiAqIEF1dGhvcjogSnVuIFpoZW5nXG4gKiBMaWNlbnNlOiBVTkxJQ0VOU0VEXG4gKi9cbmltcG9ydCB7IEFkYXB0b3IgfSBmcm9tIFwiLi9BZGFwdG9yXCI7XG5pbXBvcnQgeyBHcmFwaFFMTGluayB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5pbXBvcnQgcGFja2FnZURvdEpzb24gZnJvbSBcIi4uLy4uL3ZlcnNpb25cIjtcblxuZXhwb3J0IGNsYXNzIENoZWFwckVhdHNHcmFwaFFMQWRhcHRvciBleHRlbmRzIEFkYXB0b3Ige1xuICAvLyBfY29uZmlnOiB7IGdyYXBoUUxFbmRwb2ludDogc3RyaW5nIH07XG4gIF9ncmFwaFFMTGluazogR3JhcGhRTExpbms7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogeyBncmFwaFFMRW5kcG9pbnQ6IHN0cmluZyB9KSB7XG4gICAgc3VwZXIoY29uZmlnKTtcbiAgICB0aGlzLl9ncmFwaFFMTGluayA9IG5ldyBHcmFwaFFMTGluayhjb25maWcuZ3JhcGhRTEVuZHBvaW50LCB7XG4gICAgICB2ZXJzaW9uOiBwYWNrYWdlRG90SnNvbi52ZXJzaW9uIHx8IG51bGxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIHNldHMgdGhlIGF1dGhlbnRpY2F0aW9uIGZvciBhbiBhcHBsaWNhdGlvbiB0byBiZSBhdXRob3JpemVkIHRvIG1ha2UgY2FsbHMgdG8gQ2hlYXByRWF0cyBBUElcbiAgICogQHBhcmFtICB7c3RyaW5nfSB0b2tlbiAtIFRoZSBBdXRoZW50aWNhdGlvbiBUb2tlblxuICAgKi9cbiAgc2V0QXV0aGVudGljYXRpb25Ub2tlbih0b2tlbjogc3RyaW5nKSB7XG4gICAgdGhpcy5fZ3JhcGhRTExpbmsgPSBuZXcgR3JhcGhRTExpbmsodGhpcy5fY29uZmlnLmdyYXBoUUxFbmRwb2ludCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICB2ZXJzaW9uOiBwYWNrYWdlRG90SnNvbi52ZXJzaW9uLFxuICAgICAgICBhdXRob3JpemF0aW9uOiB0b2tlblxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdXJsIC0gVGhlIFVSTCBvZiB0aGUgR3JhcGhRTCBBUElcbiAgICovXG4gIHNldEdyYXBoUUxFbmRwb2ludCh1cmw6IHN0cmluZykge1xuICAgIHRoaXMuX2dyYXBoUUxMaW5rID0gbmV3IEdyYXBoUUxMaW5rKHVybCk7XG4gICAgdGhpcy5fY29uZmlnLmdyYXBoUUxFbmRwb2ludCA9IHVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHF1ZXJ5XG4gICAqIEBwYXJhbSAge29iamVjdH0gdmFyaWFibGVzID0ge31cbiAgICovXG4gIHF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIHZhcmlhYmxlczogb2JqZWN0ID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5fZ3JhcGhRTExpbmsucXVlcnkoeyBxdWVyeSwgdmFyaWFibGVzIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gcXVlcnlcbiAgICogQHBhcmFtICB7b2JqZWN0fSB2YXJpYWJsZXMgPSB7fVxuICAgKi9cbiAgbXV0YXRlKHF1ZXJ5OiBzdHJpbmcsIHZhcmlhYmxlczogb2JqZWN0ID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5fZ3JhcGhRTExpbmsubXV0YXRlKHsgcXVlcnksIHZhcmlhYmxlcyB9KTtcbiAgfVxufVxuXG4vLyBtb2R1bGUuZXhwb3J0cyA9IENoZWFwckVhdHNHcmFwaFFMQWRhcHRvcjtcbiIsIi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgc2ltcGxlIG5ldHdvcmsgYWRhcHRvclxuICogQXV0aG9yOiBKdW4gWmhlbmdcbiAqIExpY2Vuc2U6IFVOTElDRU5TRURcbiAqL1xuXG5leHBvcnQgY2xhc3MgQWRhcHRvciB7XG4gIF9jb25maWc6IHsgZ3JhcGhRTEVuZHBvaW50OiBzdHJpbmcgfTtcbiAgY29uc3RydWN0b3IoY29uZmlnOiB7IGdyYXBoUUxFbmRwb2ludDogc3RyaW5nIH0pIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgdGhlIGFkYXB0b3JcbiAgICAgKiBAcGFyYW0ge2FueX0gY29uZmlnXG4gICAgICovXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBhbiBhZGFwdG9yIHJlcXVlc3RcbiAgICogQHBhcmFtIHthbnl9IGNvbmZpZ1xuICAgKi9cbiAgcnVuKGNvbmZpZzogYW55KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICB9XG59XG4iLCIvKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIHNpbXBsZSBHcmFwaFFMIHNlcnZlciBsaW5rXG4gKiBBdXRob3I6IEp1biBaaGVuZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbmltcG9ydCB7IFN5bmNocm9ub3VzTGluayB9IGZyb20gXCIuL1N5bmNocm9ub3VzTGlua1wiO1xuaW1wb3J0IHsgR3JhcGhRTENsaWVudCB9IGZyb20gXCJncmFwaHFsLXJlcXVlc3RcIjtcbmltcG9ydCB7IENhdGVnb3J5IH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL0NhdGVnb3J5Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ2FydCB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9DYXJ0Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ291cG9uIH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL0NvdXBvbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL0N1c3RvbWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgRW1wbG95ZWUgfSBmcm9tIFwiLi4vLi4vY29udHJvbGxlcnMvRW1wbG95ZWVDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBFeHBsb3JlUGFnZSB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9FeHBsb3JlUGFnZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEZsYXNoU2FsZSB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9GbGFzaFNhbGVDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBIZWFkT2ZmaWNlIH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL0hlYWRPZmZpY2VDb250cm9sbGVyXCI7XG5pbXBvcnQge1xuICBMb3lhbHR5Q2FyZCxcbiAgTG95YWx0eVRyYW5zYWN0aW9uXG59IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9Mb3lhbHR5Q2FyZENvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL01lbnVJdGVtQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgT3JkZXIgfSBmcm9tIFwiLi4vLi4vY29udHJvbGxlcnMvT3JkZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBQYXlvdXQgfSBmcm9tIFwiLi4vLi4vY29udHJvbGxlcnMvUGF5b3V0Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgUmF3Q29uZmlndXJhdGlvbiB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9SZW1vdGVDb25maWd1cmF0aW9uQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgU3VydmV5LCBTdXJ2ZXlSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9TdXJ2ZXlDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBWZW5kb3IsIFZlbmRvclRlc3RlciB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9WZW5kb3JDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBWZXJpZmljYXRpb25TZXNzaW9uIH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL1ZlcmlmaWNhdGlvbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7XG4gIE1lcmdlZENvbmZpZ3VyYXRpb24sXG4gIFF1ZXJ5UmVzdWx0XG59IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9HcmFwaENvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEN1c3RvbWVyVG9rZW4gfSBmcm9tIFwiLi4vLi4vY29udHJvbGxlcnMvQ3VzdG9tZXJUb2tlbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEVtcGxveWVlVG9rZW4gfSBmcm9tIFwiLi4vLi4vY29udHJvbGxlcnMvRW1wbG95ZWVUb2tlbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IExveWFsdHlQcm9ncmFtIH0gZnJvbSBcIi4uLy4uL2NvbnRyb2xsZXJzL0xveWFsdHlQcm9ncmFtQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTW9kaWZpZXIgfSBmcm9tIFwiLi4vLi4vY29udHJvbGxlcnMvTW9kaWZpZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBSZWRlZW1hYmxlSXRlbSB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9SZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFRpcCB9IGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9UaXBDb250cm9sbGVyXCI7XG5pbXBvcnQgeyB0eXBlIH0gZnJvbSBcIm9zXCI7XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZU5vdGVGb3JDYXJ0IHtcbiAgdXBkYXRlTm90ZUZvckNhcnQ6IENhcnQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUNhdGVnb3J5IHtcbiAgdXBkYXRlQ2F0ZWdvcnk6IENhdGVnb3J5O1xufVxuZXhwb3J0IGludGVyZmFjZSBCYXRjaFVwZGF0ZUNhdGVnb3JpZXMge1xuICBiYXRjaFVwZGF0ZUNhdGVnb3JpZXM6IEFycmF5PENhdGVnb3J5Pjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVtb3ZlQ291cG9uRnJvbUNhcnQge1xuICByZW1vdmVDb3Vwb25Gcm9tQ2FydDogQ2FydDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQXBwbHlDb3Vwb25Ub0NhcnQge1xuICBhcHBseUNvdXBvblRvQ2FydDogQ2FydDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlQ2FydCB7XG4gIGRlbGV0ZUNhcnQ6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQ2F0ZWdvcnkge1xuICBjcmVhdGVDYXRlZ29yeTogQ2F0ZWdvcnk7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUNvdXBvbiB7XG4gIGNyZWF0ZUNvdXBvbjogQ291cG9uO1xufVxuZXhwb3J0IGludGVyZmFjZSBSZW1vdmVJdGVtRnJvbUNhcnQge1xuICByZW1vdmVJdGVtRnJvbUNhcnQ6IENhcnQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIEFkZEl0ZW1DYXJ0IHtcbiAgYWRkSXRlbUNhcnQ6IENhcnQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUNhcnQge1xuICBjcmVhdGVDYXJ0OiBDYXJ0O1xufVxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVDYXRlZ29yeSB7XG4gIGRlbGV0ZUNhdGVnb3J5OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUN1c3RvbWVyIHtcbiAgY3JlYXRlQ3VzdG9tZXI6IEN1c3RvbWVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDdXN0b21lciB7XG4gIHVwZGF0ZUN1c3RvbWVyOiBDdXN0b21lcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZEN1c3RvbWVyUGFzc3dvcmRSZXNldENvZGUge1xuICBzZW5kQ3VzdG9tZXJQYXNzd29yZFJlc2V0Q29kZTogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBSZXNldEN1c3RvbWVyUGFzc3dvcmQge1xuICByZXNldEN1c3RvbWVyUGFzc3dvcmQ6IEN1c3RvbWVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBFbnJvbGxDdXN0b21lckFwbnNUb2tlbiB7XG4gIGVucm9sbEN1c3RvbWVyQXBuc1Rva2VuOiBDdXN0b21lcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmV2b2tlQ3VzdG9tZXJBcG5zVG9rZW4ge1xuICByZXZva2VDdXN0b21lckFwbnNUb2tlbjogQ3VzdG9tZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIEVucm9sbEN1c3RvbWVyRmNtVG9rZW4ge1xuICBlbnJvbGxDdXN0b21lckZjbVRva2VuOiBDdXN0b21lcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmV2b2tlQ3VzdG9tZXJGY21Ub2tlbiB7XG4gIHJldm9rZUN1c3RvbWVyRmNtVG9rZW46IEN1c3RvbWVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDdXN0b21lckNyZWRpdENhcmQge1xuICB1cGRhdGVDdXN0b21lckNyZWRpdENhcmQ6IEN1c3RvbWVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVDdXN0b21lcldhbGxldCB7XG4gIGNyZWF0ZUN1c3RvbWVyV2FsbGV0OiBDb3Vwb247XG59XG5leHBvcnQgaW50ZXJmYWNlIFJlbG9hZEN1c3RvbWVyV2FsbGV0IHtcbiAgcmVsb2FkQ3VzdG9tZXJXYWxsZXQ6IENvdXBvbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVmdW5kQ3VzdG9tZXJXYWxsZXQge1xuICByZWZ1bmRDdXN0b21lcldhbGxldDogQ291cG9uO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVDdXN0b21lcldhbGxldFRyYW5zYWN0aW9uIHtcbiAgY3JlYXRlQ3VzdG9tZXJXYWxsZXRUcmFuc2FjdGlvbjogQ291cG9uO1xufVxuZXhwb3J0IGludGVyZmFjZSBBZGRGYXZvdXJpdGVWZW5kb3JGb3JDdXN0b21lciB7XG4gIGFkZEZhdm91cml0ZVZlbmRvckZvckN1c3RvbWVyOiBDdXN0b21lcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVtb3ZlRmF2b3VyaXRlVmVuZG9yRm9yQ3VzdG9tZXIge1xuICByZW1vdmVGYXZvdXJpdGVWZW5kb3JGb3JDdXN0b21lcjogQ3VzdG9tZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIEFkZEZhdm91cml0ZUl0ZW1Gb3JDdXN0b21lciB7XG4gIGFkZEZhdm91cml0ZUl0ZW1Gb3JDdXN0b21lcjogQ3VzdG9tZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIFJlbW92ZUZhdm91cml0ZUl0ZW1Gb3JDdXN0b21lciB7XG4gIHJlbW92ZUZhdm91cml0ZUl0ZW1Gb3JDdXN0b21lcjogQ3VzdG9tZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUN1c3RvbWVyVG9rZW4ge1xuICBjcmVhdGVDdXN0b21lclRva2VuOiBDdXN0b21lclRva2VuO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVFbXBsb3llZSB7XG4gIGNyZWF0ZUVtcGxveWVlOiBFbXBsb3llZTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlRW1wbG95ZWUge1xuICB1cGRhdGVFbXBsb3llZTogRW1wbG95ZWU7XG59XG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZUVtcGxveWVlIHtcbiAgZGVsZXRlRW1wbG95ZWU6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRW5yb2xsRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuIHtcbiAgZW5yb2xsRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuOiBFbXBsb3llZTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmV2b2tlRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuIHtcbiAgcmV2b2tlRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIFNlbmRFbXBsb3llZVBhc3N3b3JkUmVzZXRDb2RlIHtcbiAgc2VuZEVtcGxveWVlUGFzc3dvcmRSZXNldENvZGU6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVzZXRFbXBsb3llZVBhc3N3b3JkIHtcbiAgcmVzZXRFbXBsb3llZVBhc3N3b3JkOiBFbXBsb3llZTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlRW1wbG95ZWVUb2tlbiB7XG4gIGNyZWF0ZUVtcGxveWVlVG9rZW46IEVtcGxveWVlVG9rZW47XG59XG5leHBvcnQgaW50ZXJmYWNlIFJlcGxhY2VFeHBsb3JlUGFnZSB7XG4gIHJlcGxhY2VFeHBsb3JlUGFnZTogRXhwbG9yZVBhZ2U7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUZsYXNoU2FsZSB7XG4gIGNyZWF0ZUZsYXNoU2FsZTogRmxhc2hTYWxlO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVGbGFzaFNhbGUge1xuICB1cGRhdGVGbGFzaFNhbGU6IEZsYXNoU2FsZTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlSGVhZE9mZmljZSB7XG4gIGNyZWF0ZUhlYWRPZmZpY2U6IEhlYWRPZmZpY2U7XG59XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUhlYWRPZmZpY2Uge1xuICB1cGRhdGVIZWFkT2ZmaWNlOiBIZWFkT2ZmaWNlO1xufVxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVIZWFkT2ZmaWNlIHtcbiAgZGVsZXRlSGVhZE9mZmljZTogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVMb3lhbHR5Q2FyZEFuZEVucm9sbCB7XG4gIGNyZWF0ZUxveWFsdHlDYXJkQW5kRW5yb2xsOiBMb3lhbHR5Q2FyZDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQXdhcmRQb2ludHNUb0xveWFsdHlDYXJkIHtcbiAgYXdhcmRQb2ludHNUb0xveWFsdHlDYXJkOiBMb3lhbHR5VHJhbnNhY3Rpb247XG59XG5leHBvcnQgaW50ZXJmYWNlIEF3YXJkU2hhcmVhYmxlUG9pbnRzVG9Mb3lhbHR5Q2FyZCB7XG4gIGF3YXJkU2hhcmVhYmxlUG9pbnRzVG9Mb3lhbHR5Q2FyZDogTG95YWx0eVRyYW5zYWN0aW9uO1xufVxuZXhwb3J0IGludGVyZmFjZSBTaGFyZUxveWFsdHlQb2ludHMge1xuICBzaGFyZUxveWFsdHlQb2ludHM6IExveWFsdHlUcmFuc2FjdGlvbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVkZWVtTG95YWx0eVBvaW50c0ZvckNvdXBvbiB7XG4gIHJlZGVlbUxveWFsdHlQb2ludHNGb3JDb3Vwb246IENvdXBvbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlTG95YWx0eVByb2dyYW0ge1xuICBjcmVhdGVMb3lhbHR5UHJvZ3JhbTogTG95YWx0eVByb2dyYW07XG59XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUxveWFsdHlQcm9ncmFtIHtcbiAgdXBkYXRlTG95YWx0eVByb2dyYW06IExveWFsdHlDYXJkO1xufVxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVMb3lhbHR5UHJvZ3JhbSB7XG4gIGRlbGV0ZUxveWFsdHlQcm9ncmFtOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZU1lbnVJdGVtIHtcbiAgY3JlYXRlTWVudUl0ZW06IE1lbnVJdGVtO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVNZW51SXRlbSB7XG4gIHVwZGF0ZU1lbnVJdGVtOiBNZW51SXRlbTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlTWVudUl0ZW0ge1xuICBkZWxldGVNZW51SXRlbTogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBCYXRjaFVwZGF0ZU1lbnVJdGVtcyB7XG4gIGJhdGNoVXBkYXRlTWVudUl0ZW1zOiBBcnJheTxNZW51SXRlbT47XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZU1vZGlmaWVyIHtcbiAgY3JlYXRlTW9kaWZpZXI6IE1vZGlmaWVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVNb2RpZmllciB7XG4gIHVwZGF0ZU1vZGlmaWVyOiBNb2RpZmllcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlTW9kaWZpZXIge1xuICBkZWxldGVNb2RpZmllcjogTW9kaWZpZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZU9yZGVyIHtcbiAgY3JlYXRlT3JkZXI6IE9yZGVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBDYW5jZWxPcmRlciB7XG4gIGNhbmNlbE9yZGVyOiBPcmRlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQmVnaW5QcmVwYXJpbmdPcmRlciB7XG4gIGJlZ2luUHJlcGFyaW5nT3JkZXI6IE9yZGVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBQcmVwYXJlZE9yZGVyIHtcbiAgcHJlcGFyZWRPcmRlcjogT3JkZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRlT3JkZXIge1xuICBjb21wbGV0ZU9yZGVyOiBPcmRlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdFBheW91dCB7XG4gIHJlcXVlc3RQYXlvdXQ6IFBheW91dDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlUGF5b3V0IHtcbiAgdXBkYXRlUGF5b3V0OiBQYXlvdXQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIENhbmNlbFBheW91dCB7XG4gIGNhbmNlbFBheW91dDogUGF5b3V0O1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVSZWRlZW1hYmxlSXRlbSB7XG4gIGNyZWF0ZVJlZGVlbWFibGVJdGVtOiBSZWRlZW1hYmxlSXRlbTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgdXBkYXRlUmVkZWVtYWJsZUl0ZW0ge1xuICB1cGRhdGVSZWRlZW1hYmxlSXRlbTogUmVkZWVtYWJsZUl0ZW07XG59XG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZVJlZGVlbWFibGVJdGVtIHtcbiAgZGVsZXRlUmVkZWVtYWJsZUl0ZW06IHN0cmluZztcbn1cbi8vc2hvdWxkIGJlIG9ubHkgaW4gcXVlcnkgc2VlIFJlbW90ZUNvbmZpZ3VyYXRpb25Db250cm9sbGVyXG5leHBvcnQgaW50ZXJmYWNlIE1lcmdlZF9Db25maWd1cmF0aW9uIHtcbiAgbWVyZ2VkX2NvbmZpZ3VyYXRpb246IE1lcmdlZENvbmZpZ3VyYXRpb247XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVJhd0NvbmZpZ3VyYXRpb24ge1xuICBjcmVhdGVSYXdDb25maWd1cmF0aW9uOiBSYXdDb25maWd1cmF0aW9uO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVSYXdDb25maWd1cmF0aW9uIHtcbiAgdXBkYXRlUmF3Q29uZmlndXJhdGlvbjogUmF3Q29uZmlndXJhdGlvbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlUmF3Q29uZmlndXJhdGlvbiB7XG4gIGRlbGV0ZVJhd0NvbmZpZ3VyYXRpb246IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlU3VydmV5IHtcbiAgY3JlYXRlU3VydmV5OiBTdXJ2ZXk7XG59XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVN1cnZleSB7XG4gIHVwZGF0ZVN1cnZleTogU3VydmV5O1xufVxuZXhwb3J0IGludGVyZmFjZSBSZWxlYXNlU3VydmV5IHtcbiAgcmVsZWFzZVN1cnZleTogU3VydmV5O1xufVxuZXhwb3J0IGludGVyZmFjZSBBcmNoaXZlU3VydmV5IHtcbiAgYXJjaGl2ZVN1cnZleTogU3VydmV5O1xufVxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVTdXJ2ZXkge1xuICBkZWxldGVTdXJ2ZXk6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlU3VydmV5UmVzcG9uc2Uge1xuICBjcmVhdGVTdXJ2ZXlSZXNwb25zZTogU3VydmV5UmVzcG9uc2U7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVRpcCB7XG4gIGNyZWF0ZVRpcDogVGlwO1xufVxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVWZW5kb3JUZXN0ZXIge1xuICBkZWxldGVWZW5kb3JUZXN0ZXI6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQWRkVmVuZG9yVGVzdGVyQnlFbWFpbEFkZHJlc3Mge1xuICBhZGRWZW5kb3JUZXN0ZXJCeUVtYWlsQWRkcmVzczogVmVuZG9yVGVzdGVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVWZW5kb3JBcHByb3ZhbFN0YXR1cyB7XG4gIHVwZGF0ZVZlbmRvckFwcHJvdmFsU3RhdHVzOiBWZW5kb3I7XG59XG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RWZW5kb3JBcHByb3ZhbCB7XG4gIHJlcXVlc3RWZW5kb3JBcHByb3ZhbDogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVWZW5kb3JXaXRoRW1wbG95ZWUge1xuICBjcmVhdGVWZW5kb3JXaXRoRW1wbG95ZWU6IFZlbmRvcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlVmVuZG9yIHtcbiAgdXBkYXRlVmVuZG9yOiBWZW5kb3I7XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVNtc1ZlcmlmaWNhdGlvblNlc3Npb24ge1xuICBjcmVhdGVTbXNWZXJpZmljYXRpb25TZXNzaW9uOiBWZXJpZmljYXRpb25TZXNzaW9uO1xufVxuZXhwb3J0IGludGVyZmFjZSBWZXJpZnlTbXNWZXJpZmljYXRpb25TZXNzaW9uIHtcbiAgdmVyaWZ5U21zVmVyaWZpY2F0aW9uU2Vzc2lvbjogVmVyaWZpY2F0aW9uU2Vzc2lvbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzRm9yVmVuZG9yIHtcbiAgdXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzRm9yVmVuZG9yOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXV0YXRlUmVzdWx0XG4gIGV4dGVuZHMgQ3JlYXRlQ2F0ZWdvcnksXG4gICAgQ3JlYXRlQ291cG9uLFxuICAgIFVwZGF0ZUFsbE1lbnVJdGVtc1N0YXR1c0ZvclZlbmRvcixcbiAgICBVcGRhdGVDdXN0b21lcixcbiAgICBVcGRhdGVOb3RlRm9yQ2FydCxcbiAgICBSZW1vdmVDb3Vwb25Gcm9tQ2FydCxcbiAgICBBcHBseUNvdXBvblRvQ2FydCxcbiAgICBWZXJpZnlTbXNWZXJpZmljYXRpb25TZXNzaW9uLFxuICAgIENyZWF0ZVNtc1ZlcmlmaWNhdGlvblNlc3Npb24sXG4gICAgVXBkYXRlVmVuZG9yLFxuICAgIENyZWF0ZVZlbmRvcldpdGhFbXBsb3llZSxcbiAgICBSZXF1ZXN0VmVuZG9yQXBwcm92YWwsXG4gICAgVXBkYXRlVmVuZG9yQXBwcm92YWxTdGF0dXMsXG4gICAgQWRkVmVuZG9yVGVzdGVyQnlFbWFpbEFkZHJlc3MsXG4gICAgRGVsZXRlVmVuZG9yVGVzdGVyLFxuICAgIENyZWF0ZVRpcCxcbiAgICBDcmVhdGVTdXJ2ZXlSZXNwb25zZSxcbiAgICBEZWxldGVTdXJ2ZXksXG4gICAgQXJjaGl2ZVN1cnZleSxcbiAgICBSZWxlYXNlU3VydmV5LFxuICAgIFVwZGF0ZVN1cnZleSxcbiAgICBDcmVhdGVTdXJ2ZXksXG4gICAgRGVsZXRlUmF3Q29uZmlndXJhdGlvbixcbiAgICBVcGRhdGVSYXdDb25maWd1cmF0aW9uLFxuICAgIENyZWF0ZVJhd0NvbmZpZ3VyYXRpb24sXG4gICAgTWVyZ2VkX0NvbmZpZ3VyYXRpb24sXG4gICAgRGVsZXRlUmVkZWVtYWJsZUl0ZW0sXG4gICAgdXBkYXRlUmVkZWVtYWJsZUl0ZW0sXG4gICAgQ3JlYXRlUmVkZWVtYWJsZUl0ZW0sXG4gICAgQ2FuY2VsUGF5b3V0LFxuICAgIFVwZGF0ZVBheW91dCxcbiAgICBSZXF1ZXN0UGF5b3V0LFxuICAgIENvbXBsZXRlT3JkZXIsXG4gICAgUHJlcGFyZWRPcmRlcixcbiAgICBCZWdpblByZXBhcmluZ09yZGVyLFxuICAgIENhbmNlbE9yZGVyLFxuICAgIENyZWF0ZU9yZGVyLFxuICAgIERlbGV0ZU1vZGlmaWVyLFxuICAgIFVwZGF0ZU1vZGlmaWVyLFxuICAgIENyZWF0ZU1vZGlmaWVyLFxuICAgIEJhdGNoVXBkYXRlTWVudUl0ZW1zLFxuICAgIERlbGV0ZU1lbnVJdGVtLFxuICAgIFVwZGF0ZU1lbnVJdGVtLFxuICAgIENyZWF0ZU1lbnVJdGVtLFxuICAgIERlbGV0ZUxveWFsdHlQcm9ncmFtLFxuICAgIFVwZGF0ZUxveWFsdHlQcm9ncmFtLFxuICAgIENyZWF0ZUxveWFsdHlQcm9ncmFtLFxuICAgIFJlZGVlbUxveWFsdHlQb2ludHNGb3JDb3Vwb24sXG4gICAgU2hhcmVMb3lhbHR5UG9pbnRzLFxuICAgIEF3YXJkU2hhcmVhYmxlUG9pbnRzVG9Mb3lhbHR5Q2FyZCxcbiAgICBBd2FyZFBvaW50c1RvTG95YWx0eUNhcmQsXG4gICAgQ3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGwsXG4gICAgRGVsZXRlSGVhZE9mZmljZSxcbiAgICBVcGRhdGVIZWFkT2ZmaWNlLFxuICAgIENyZWF0ZUhlYWRPZmZpY2UsXG4gICAgVXBkYXRlRmxhc2hTYWxlLFxuICAgIENyZWF0ZUZsYXNoU2FsZSxcbiAgICBSZXBsYWNlRXhwbG9yZVBhZ2UsXG4gICAgQ3JlYXRlRW1wbG95ZWVUb2tlbixcbiAgICBSZXNldEVtcGxveWVlUGFzc3dvcmQsXG4gICAgU2VuZEVtcGxveWVlUGFzc3dvcmRSZXNldENvZGUsXG4gICAgUmV2b2tlRW1wbG95ZWVUZXJtaW5hbEZjbVRva2VuLFxuICAgIEVucm9sbEVtcGxveWVlVGVybWluYWxGY21Ub2tlbixcbiAgICBEZWxldGVFbXBsb3llZSxcbiAgICBVcGRhdGVFbXBsb3llZSxcbiAgICBDcmVhdGVFbXBsb3llZSxcbiAgICBDcmVhdGVDdXN0b21lclRva2VuLFxuICAgIFJlbW92ZUZhdm91cml0ZUl0ZW1Gb3JDdXN0b21lcixcbiAgICBBZGRGYXZvdXJpdGVJdGVtRm9yQ3VzdG9tZXIsXG4gICAgUmVtb3ZlRmF2b3VyaXRlVmVuZG9yRm9yQ3VzdG9tZXIsXG4gICAgQWRkRmF2b3VyaXRlVmVuZG9yRm9yQ3VzdG9tZXIsXG4gICAgQ3JlYXRlQ3VzdG9tZXJXYWxsZXRUcmFuc2FjdGlvbixcbiAgICBSZWZ1bmRDdXN0b21lcldhbGxldCxcbiAgICBSZWxvYWRDdXN0b21lcldhbGxldCxcbiAgICBDcmVhdGVDdXN0b21lcldhbGxldCxcbiAgICBVcGRhdGVDdXN0b21lckNyZWRpdENhcmQsXG4gICAgUmV2b2tlQ3VzdG9tZXJGY21Ub2tlbixcbiAgICBFbnJvbGxDdXN0b21lckZjbVRva2VuLFxuICAgIFJldm9rZUN1c3RvbWVyQXBuc1Rva2VuLFxuICAgIEVucm9sbEN1c3RvbWVyQXBuc1Rva2VuLFxuICAgIFJlc2V0Q3VzdG9tZXJQYXNzd29yZCxcbiAgICBTZW5kQ3VzdG9tZXJQYXNzd29yZFJlc2V0Q29kZSxcbiAgICBVcGRhdGVDdXN0b21lcixcbiAgICBDcmVhdGVDdXN0b21lcixcbiAgICBEZWxldGVDYXRlZ29yeSxcbiAgICBDcmVhdGVDYXJ0LFxuICAgIEFkZEl0ZW1DYXJ0LFxuICAgIFJlbW92ZUl0ZW1Gcm9tQ2FydCxcbiAgICBDcmVhdGVDb3Vwb24sXG4gICAgQ3JlYXRlQ2F0ZWdvcnksXG4gICAgRGVsZXRlQ2FydCxcbiAgICBBcHBseUNvdXBvblRvQ2FydCxcbiAgICBSZW1vdmVDb3Vwb25Gcm9tQ2FydCxcbiAgICBVcGRhdGVOb3RlRm9yQ2FydCxcbiAgICBVcGRhdGVDYXRlZ29yeSxcbiAgICBCYXRjaFVwZGF0ZUNhdGVnb3JpZXMge31cblxuZXhwb3J0IGNsYXNzIEdyYXBoUUxMaW5rIGV4dGVuZHMgU3luY2hyb25vdXNMaW5rIHtcbiAgX2hlYWRlcnM6IHsgdmVyc2lvbjogc3RyaW5nOyBhdXRob3JpemF0aW9uOiBzdHJpbmcgfSB8IHt9O1xuICBfY2xpZW50ITogR3JhcGhRTENsaWVudDtcbiAgLyoqXG4gICAqIENvbnN0cnVjdCBhIG5ldyBHcmFwaFFMTGlua1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7b2JlamN0fSBjb25maWcgPSB7fVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgY29uZmlnOiB7XG4gICAgICBoZWFkZXJzPzogeyB2ZXJzaW9uOiBzdHJpbmc7IGF1dGhvcml6YXRpb246IHN0cmluZyB9O1xuICAgICAgdmVyc2lvbj86IHN0cmluZyB8IG51bGw7XG4gICAgfSA9IHt9XG4gICkge1xuICAgIHN1cGVyKHVybCk7XG4gICAgdGhpcy5faGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgIHRoaXMuX2NvbnN0cnVjdENsaWVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY29uc3RydWN0IGEgY2xpZW50IGluc3RhbmNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NvbnN0cnVjdENsaWVudCgpIHtcbiAgICB0aGlzLl9jbGllbnQgPSBuZXcgR3JhcGhRTENsaWVudCh0aGlzLl91cmwsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgcnVuXG4gICAqIEBwYXJhbSBjb25maWdcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIHF1ZXJ5KGNvbmZpZzoge1xuICAgIHF1ZXJ5OiBzdHJpbmc7XG4gICAgdmFyaWFibGVzOiBvYmplY3Q7XG4gIH0pOiBQcm9taXNlPFF1ZXJ5UmVzdWx0PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucnVuKGNvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIHJ1blxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBtdXRhdGUoY29uZmlnOiB7XG4gICAgcXVlcnk6IHN0cmluZztcbiAgICB2YXJpYWJsZXM6IG9iamVjdDtcbiAgfSk6IFByb21pc2U8TXV0YXRlUmVzdWx0PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucnVuKGNvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogUnVuIGEgbmV3IGdyYXBocWwgcmVxdWVzdFxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59XG4gICAqL1xuXG4gIGFzeW5jIHJ1bihjb25maWc6IHsgcXVlcnk6IHN0cmluZzsgdmFyaWFibGVzOiBvYmplY3QgfSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9jbGllbnQucmVxdWVzdChjb25maWcucXVlcnksIGNvbmZpZy52YXJpYWJsZXMgfHwge30pO1xuICB9XG59XG4iLCIvKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIG5ldHdvcmsgbGlua1xuICogQXV0aG9yOiBKdW4gWmhlbmdcbiAqIExpY2Vuc2U6IFVOTElDRU5TRURcbiAqL1xuXG5leHBvcnQgY2xhc3MgTGluayB7XG4gIF91cmw6IHN0cmluZztcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGxpbmsgd2l0aCBhbiBVUkxcbiAgICogQHBhcmFtIHVybFxuICAgKi9cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLl91cmwgPSB1cmw7XG4gIH1cblxuICAvKipcbiAgICogUnVuIGEgcmVxdWVzdFxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqL1xuICBydW4oY29uZmlnOiBhbnkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZ3JhcGhxbC1yZXF1ZXN0OyIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IFF1ZXJ5UmVzdWx0IH0gZnJvbSBcIi4vR3JhcGhDb250cm9sbGVyXCI7XG5leHBvcnQgY2xhc3MgQXV0aG9yaXphdGlvbkNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLmdldFRva2VuU2NvcGUgPSB0aGlzLmdldFRva2VuU2NvcGUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGdldFRva2VuU2NvcGUodG9rZW46IHN0cmluZykge1xuICAgIGxldCBxdWVyeVN0cmluZyA9IGBcbiAgICAgICAgICAgIHF1ZXJ5IHtcbiAgICAgICAgICAgICAgICBhdXRoX3Rva2VuX3Njb3BlKHRva2VuOiBcIiR7dG9rZW59XCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLnF1ZXJ5KHF1ZXJ5U3RyaW5nKVxuICAgICAgICAudGhlbigoZGF0YTogUXVlcnlSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKGRhdGEuYXV0aF90b2tlbl9zY29wZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9DdXN0b21lckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFZlbmRvciB9IGZyb20gXCIuL1ZlbmRvckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IENvdXBvbiB9IGZyb20gXCIuL0NvdXBvbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSBcIi4vTWVudUl0ZW1Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNb2RpZmllciB9IGZyb20gXCIuL01vZGlmaWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkZEl0ZW1Ub0NhcnRNb2RpZmllcklucHV0IHtcbiAgbW9kaWZpZXJfaWQ6IHN0cmluZztcbiAgY2hvaWNlczogQXJyYXk8c3RyaW5nPjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQWRkSXRlbVRvQ2FydElucHV0IHtcbiAgaXRlbV9pZDogc3RyaW5nO1xuICBtb2RpZmllcnM6IEFycmF5PEFkZEl0ZW1Ub0NhcnRNb2RpZmllcklucHV0Pjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ2FydEl0ZW1Nb2RpZmllciB7XG4gIG1vZGlmaWVyPzogTW9kaWZpZXI7XG4gIGNob2ljZXM/OiBBcnJheTxzdHJpbmc+O1xufVxuZXhwb3J0IGludGVyZmFjZSBDYXJ0SXRlbSB7XG4gIF9pZD86IHN0cmluZztcbiAgbWVudV9pdGVtPzogTWVudUl0ZW07XG4gIG1vZGlmaWVycz86IEFycmF5PENhcnRJdGVtTW9kaWZpZXI+O1xufVxuZXhwb3J0IGludGVyZmFjZSBDYXJ0Q291cG9uIHtcbiAgX2lkPzogc3RyaW5nO1xuICBjb3Vwb24/OiBDb3Vwb247XG59XG5leHBvcnQgaW50ZXJmYWNlIENhcnQgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlciB7XG4gIGN1c3RvbWVyPzogQ3VzdG9tZXI7XG4gIHZlbmRvcj86IFZlbmRvcjtcbiAgaXRlbXM/OiBBcnJheTxDYXJ0SXRlbT47XG4gIHN1YnRvdGFsPzogbnVtYmVyO1xuICB0b3RhbD86IG51bWJlcjtcbiAgY291cG9ucz86IEFycmF5PENhcnRDb3Vwb24+O1xuICBub3RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQ2FydENvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLnVwZGF0ZU5vdGUgPSB0aGlzLnVwZGF0ZU5vdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbW92ZUNvdXBvbiA9IHRoaXMucmVtb3ZlQ291cG9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hcHBseUNvdXBvbiA9IHRoaXMuYXBwbHlDb3Vwb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW1vdmVJdGVtID0gdGhpcy5yZW1vdmVJdGVtLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hZGRJdGVtID0gdGhpcy5hZGRJdGVtLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICB1cGRhdGVOb3RlKGNhcnRJZDogc3RyaW5nLCBub3RlOiBzdHJpbmcpOiBQcm9taXNlPENhcnQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkY2FydElkOiBTdHJpbmchLCAkbm90ZTogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVOb3RlRm9yQ2FydChjYXJ0X2lkOiAkY2FydElkLCBub3RlOiAkbm90ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgY2FydElkLFxuICAgICAgICAgIG5vdGVcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQudXBkYXRlTm90ZUZvckNhcnQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVDb3Vwb24oY2FydElkOiBzdHJpbmcsIGNhcnRDb3Vwb25JZDogc3RyaW5nKTogUHJvbWlzZTxDYXJ0PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGNhcnRJZDogU3RyaW5nISwgJGNhcnRDb3Vwb25JZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVDb3Vwb25Gcm9tQ2FydChjYXJ0X2lkOiAkY2FydElkLCBjYXJ0X2NvdXBvbl9pZDogJGNhcnRDb3Vwb25JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgY2FydElkLFxuICAgICAgICAgIGNhcnRDb3Vwb25JZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5yZW1vdmVDb3Vwb25Gcm9tQ2FydCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFwcGx5Q291cG9uKGNhcnRJZDogc3RyaW5nLCBjb3Vwb25Db2RlOiBzdHJpbmcpOiBQcm9taXNlPENhcnQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkY2FydElkOiBTdHJpbmchLCAkY291cG9uQ29kZTogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBhcHBseUNvdXBvblRvQ2FydChjYXJ0X2lkOiAkY2FydElkLCBjb3Vwb25fY29kZTogJGNvdXBvbkNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICBjb3Vwb25Db2RlXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmFwcGx5Q291cG9uVG9DYXJ0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGNhcnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhcnRJZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDYXJ0Pn1cbiAgICovXG4gIGRlbGV0ZShjYXJ0SWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGNhcnRJZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVDYXJ0KGNhcnRfaWQ6ICRjYXJ0SWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGNhcnRJZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kZWxldGVDYXJ0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBpdGVtIGZyb20gY3VycmVudGx5IGFjdGl2ZSBjYXJ0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2FydElkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYXJ0SXRlbUlkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPENhcnQ+fVxuICAgKi9cbiAgcmVtb3ZlSXRlbShjYXJ0SWQ6IHN0cmluZywgY2FydEl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTxDYXJ0PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGNhcnRJZDogU3RyaW5nISwgJGNhcnRJdGVtSWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSXRlbUZyb21DYXJ0KFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FydF9pZDogJGNhcnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcnRfaXRlbV9pZDogJGNhcnRJdGVtSWRcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgY2FydEl0ZW1JZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5yZW1vdmVJdGVtRnJvbUNhcnQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIG5ldyBpdGVtIHRvIGN1cnJlbnRseSBhY3RpdmUgY2FydC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNhcnRJZFxuICAgKiBAcGFyYW0ge0FkZEl0ZW1Ub0NhcnRJbnB1dH0gaXRlbVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDYXJ0Pn1cbiAgICovXG4gIGFkZEl0ZW0oY2FydElkOiBzdHJpbmcsIGl0ZW06IEFkZEl0ZW1Ub0NhcnRJbnB1dCk6IFByb21pc2U8Q2FydD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRjYXJ0SWQ6IFN0cmluZyEsICRpdGVtOiBBZGRJdGVtVG9DYXJ0SW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEl0ZW1Ub0NhcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJ0X2lkOiAkY2FydElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogJGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgaXRlbVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5hZGRJdGVtQ2FydCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgY2FydCwgcmVtb3ZlIGFsbCBvbGQgY2FydHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjdXN0b21lcklkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2ZW5kb3JJZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDYXJ0Pn1cbiAgICovXG4gIGNyZWF0ZShjdXN0b21lcklkOiBzdHJpbmcsIHZlbmRvcklkOiBzdHJpbmcpOiBQcm9taXNlPENhcnQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkY3VzdG9tZXJJZDogU3RyaW5nISwgJHZlbmRvcklkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNhcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lcl9pZDogJGN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZW5kb3JfaWQ6ICR2ZW5kb3JJZFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGN1c3RvbWVySWQsXG4gICAgICAgICAgdmVuZG9ySWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlQ2FydCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tIFwiLi9NZW51SXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFZlbmRvciB9IGZyb20gXCIuL1ZlbmRvckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgU2VsZWN0SW5wdXQgfSBmcm9tIFwiLi9Db21tb25JbnRlcmZhY2VcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG4vLyBpbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuZXhwb3J0IGludGVyZmFjZSBDYXRlZ29yeSBleHRlbmRzIFVwZGF0ZUNhdGVnb3J5SW5wdXQsIERlZmF1bHRDb250cm9sbGVyIHtcbiAgbWVudV9pdGVtcyhzZWxlY3Q6IFNlbGVjdElucHV0KTogQXJyYXk8TWVudUl0ZW0+O1xuICBtZW51X2l0ZW1fY291bnQ/OiBudW1iZXI7XG4gIHZlbmRvcj86IFZlbmRvcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQ2F0ZWdvcnlJbnB1dCB7XG4gIG5hbWU6IHN0cmluZztcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB2ZW5kb3JfaWQ6IHN0cmluZztcbiAgc29ydF9vcmRlcj86IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQ2F0ZWdvcnlJbnB1dCB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBzb3J0X29yZGVyPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBCYXRjaFVwZGF0ZUNhdGVnb3JpZXNJbnB1dCB7XG4gIGlkOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBVcGRhdGVDYXRlZ29yeUlucHV0O1xufVxuXG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIGNhdGVnb3JpZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYXRlZ29yeUNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLmNyZWF0ZSA9IHRoaXMuY3JlYXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlID0gdGhpcy5kZWxldGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmJhdGNoVXBkYXRlID0gdGhpcy5iYXRjaFVwZGF0ZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGNhdGVnb3J5LCByZXR1cm4gY2F0ZWdvcnkgSUQgaWYgc3VjY2Vzc2Z1bFxuICAgKiBAcGFyYW0ge0NyZWF0ZUNhdGVnb3J5SW5wdXR9IGNhdGVnb3J5IC0gVGhlIGNhdGVnb3J5IG9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSAtIFRoZSBpZCBvZiB0aGUgY2F0ZWdvcnkgdGhhdCB3YXMgY3JlYXRlZFxuICAgKi9cbiAgY3JlYXRlKGNhdGVnb3J5OiBDcmVhdGVDYXRlZ29yeUlucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGNyZWF0ZUNhdGVnb3J5TXV0YXRpb24gKCRjYXRlZ29yeTogQ3JlYXRlQ2F0ZWdvcnlJbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ2F0ZWdvcnkoY2F0ZWdvcnk6ICRjYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgY2F0ZWdvcnlcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlQ2F0ZWdvcnkuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGNhdGVnb3J5XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBjYXRlZ29yeSBpZCB0aGF0IHdpbGwgYmUgZGVsZXRlZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZGVsZXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gZGVsZXRlQ2F0ZWdvcnlNdXRhdGlvbiAoJGlkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNhdGVnb3J5KGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRlbGV0ZUNhdGVnb3J5KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBjYXRlZ29yeVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIGNhdGVnb3J5IHRoYXQgd2lsbCBiZSB1cGRhdGVkXG4gICAqIEBwYXJhbSB7VXBkYXRlQ2F0ZWdvcnlJbnB1dH0gY2F0ZWdvcnkgLSBUaGUgdXBkYXRlZCBjYXRlZ29yeSBvYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBSZXR1cm5zIHRoZSBpZCBvZiB0aGUgdXBkYXRlZCBjYXRlZ29yeVxuICAgKi9cbiAgdXBkYXRlKGlkOiBzdHJpbmcsIGNhdGVnb3J5OiBVcGRhdGVDYXRlZ29yeUlucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIHVwZGF0ZUNhdGVnb3J5TXV0YXRpb24gKCRpZDogU3RyaW5nISwgJGNhdGVnb3J5OiBVcGRhdGVDYXRlZ29yeUlucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDYXRlZ29yeShpZDogJGlkLCBjYXRlZ29yeTogJGNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBjYXRlZ29yeVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC51cGRhdGVDYXRlZ29yeS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2ggdXBkYXRlIGEgbGlzdCBvZiBjYXRlZ29yaWVzLlxuICAgKiBAcGFyYW0ge0FycmF5PEJhdGNoVXBkYXRlQ2F0ZWdvcmllc0lucHV0Pn0gY2F0ZWdvcmllcyBMaXN0IG9mIEJhdGNoVXBkYXRlQ2F0ZWdvcmllc0lucHV0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5PENhdGVnb3J5Pj59IExpc3Qgb2YgY2F0ZWdvcmllcyB3aXRoIF9pZCBmaWVsZFxuICAgKi9cbiAgYmF0Y2hVcGRhdGUoXG4gICAgY2F0ZWdvcmllczogQXJyYXk8QmF0Y2hVcGRhdGVDYXRlZ29yaWVzSW5wdXQ+XG4gICk6IFByb21pc2U8QXJyYXk8Q2F0ZWdvcnk+PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGNhdGVnb3JpZXM6IFtCYXRjaFVwZGF0ZUNhdGVnb3JpZXNJbnB1dF0hKXtcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hVcGRhdGVDYXRlZ29yaWVzKGNhdGVnb3JpZXM6ICRjYXRlZ29yaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBjYXRlZ29yaWVzXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmJhdGNoVXBkYXRlQ2F0ZWdvcmllcyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FydCB9IGZyb20gXCIuL0NhcnRDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBSZXNldENvZGVTZW5kTWV0aG9kIH0gZnJvbSBcIi4vRW1wbG95ZWVDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBEZWZhdWx0Q29udHJvbGxlciB9IGZyb20gXCIuL0NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFNlbGVjdElucHV0IH0gZnJvbSBcIi4vQ29tbW9uSW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBMb3lhbHR5Q2FyZCB9IGZyb20gXCIuL0xveWFsdHlDYXJkQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ291cG9uIH0gZnJvbSBcIi4vQ291cG9uQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgVmVuZG9yIH0gZnJvbSBcIi4vVmVuZG9yQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tIFwiLi9NZW51SXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5leHBvcnQgaW50ZXJmYWNlIENyZWRpdENhcmQge1xuICBpZD86IHN0cmluZztcbiAgYnJhbmQ/OiBzdHJpbmc7XG4gIGxhc3Q0Pzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBHcm91cCB7XG4gIF9pZD86IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbiAgY3VzdG9tZXJzPzogQXJyYXk8Q3VzdG9tZXI+O1xufVxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21lciBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyLCBDdXN0b21lck9wdGlvbnMge1xuICBlbWFpbF9hZGRyZXNzPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBwYXNzd29yZD86IHN0cmluZztcbiAgcGhvbmVfbnVtYmVyPzogc3RyaW5nO1xuICBhcG5zX3Rva2Vucz86IEFycmF5PHN0cmluZz47XG4gIGZjbV90b2tlbnM/OiBBcnJheTxzdHJpbmc+O1xuICBjcmVkaXRfY2FyZD86IENyZWRpdENhcmQ7XG4gIGVtYWlsX3ByZWZlcmVuY2VzPzogRW1haWxQcmVmZXJlbmNlcztcbiAgbW9iaWxlX25vdGlmaWNhdGlvbnM/OiBib29sZWFuO1xuICBsb3lhbHR5X2NhcmRzKHNlbGVjdDogU2VsZWN0SW5wdXQpOiBBcnJheTxMb3lhbHR5Q2FyZD47XG4gIGlzX3Rlc3Q/OiBib29sZWFuO1xuICB3YWxsZXQ/OiBDb3Vwb247XG4gIGNhcnQ/OiBDYXJ0O1xuICBmYXZvdXJpdGVfdmVuZG9ycz86IEFycmF5PFZlbmRvcj47XG4gIGZhdm91cml0ZV9pdGVtcz86IEFycmF5PE1lbnVJdGVtPjtcbiAgdGVzdF92ZW5kb3JzPzogQXJyYXk8VmVuZG9yPjtcbiAgZ3JvdXBzPzogQXJyYXk8R3JvdXA+O1xufVxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21lck9wdGlvbnMge1xuICBwcm9maWxlX3BpY3R1cmU/OiBzdHJpbmc7XG4gIGJpcnRoZGF5Pzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBFbWFpbFByZWZlcmVuY2VzSW5wdXQge1xuICBwcm9tb3Rpb25hbDogYm9vbGVhbjtcbiAgdHJhbnNhY3Rpb25hbDogYm9vbGVhbjtcbiAgc3lzdGVtOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBFbWFpbFByZWZlcmVuY2VzIHtcbiAgcHJvbW90aW9uYWw/OiBib29sZWFuO1xuICB0cmFuc2FjdGlvbmFsPzogYm9vbGVhbjtcbiAgc3lzdGVtPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQ3VzdG9tZXJJbnB1dCBleHRlbmRzIEN1c3RvbWVyT3B0aW9ucyB7XG4gIGVtYWlsX2FkZHJlc3M6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBwaG9uZV9udW1iZXI6IHN0cmluZztcbiAgdmVyaWZpY2F0aW9uX3JlcXVlc3RfaWQ6IHN0cmluZztcbiAgdmVyaWZpY2F0aW9uX2NvZGU6IHN0cmluZztcbiAgZW1haWxfcHJlZmVyZW5jZXM6IEVtYWlsUHJlZmVyZW5jZXNJbnB1dDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQ3VzdG9tZXJJbnB1dCBleHRlbmRzIEN1c3RvbWVyT3B0aW9ucyB7XG4gIG1vYmlsZV9ub3RpZmljYXRpb25zPzogYm9vbGVhbjtcbiAgZW1haWxfcHJlZmVyZW5jZXM/OiBFbWFpbFByZWZlcmVuY2VzSW5wdXQ7XG59XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIGN1c3RvbWVycy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tZXJDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZUNyZWRpdENhcmQgPSB0aGlzLnVwZGF0ZUNyZWRpdENhcmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmVucm9sbEFwbnNUb2tlbiA9IHRoaXMuZW5yb2xsQXBuc1Rva2VuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXZva2VBcG5zVG9rZW4gPSB0aGlzLnJldm9rZUFwbnNUb2tlbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZW5yb2xsRmNtVG9rZW4gPSB0aGlzLmVucm9sbEZjbVRva2VuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZXZva2VGY21Ub2tlbiA9IHRoaXMucmV2b2tlRmNtVG9rZW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZVdhbGxldCA9IHRoaXMuY3JlYXRlV2FsbGV0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZWxvYWRXYWxsZXQgPSB0aGlzLnJlbG9hZFdhbGxldC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2VuZFBhc3N3b3JkUmVzZXRDb2RlID0gdGhpcy5zZW5kUGFzc3dvcmRSZXNldENvZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlc2V0UGFzc3dvcmQgPSB0aGlzLnJlc2V0UGFzc3dvcmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlZnVuZFdhbGxldCA9IHRoaXMucmVmdW5kV2FsbGV0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5jcmVhdGVXYWxsZXRUcmFuc2FjdGlvbiA9IHRoaXMuY3JlYXRlV2FsbGV0VHJhbnNhY3Rpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZEZhdm91cml0ZVZlbmRvciA9IHRoaXMuYWRkRmF2b3VyaXRlVmVuZG9yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZW1vdmVGYXZvdXJpdGVWZW5kb3IgPSB0aGlzLnJlbW92ZUZhdm91cml0ZVZlbmRvci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWRkRmF2b3VyaXRlSXRlbSA9IHRoaXMuYWRkRmF2b3VyaXRlSXRlbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVtb3ZlRmF2b3VyaXRlSXRlbSA9IHRoaXMucmVtb3ZlRmF2b3VyaXRlSXRlbS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGN1c3RvbWVyLCByZXR1cm4gY3VzdG9tZXIgSUQgaWYgc3VjY2Vzc2Z1bFxuICAgKiBAcGFyYW0ge0NyZWF0ZUN1c3RvbWVySW5wdXR9IGN1c3RvbWVyIC0gVGhlIEN1c3RvbWVyIG9iamVjdCB0byBiZSBjcmVhdGVkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBDdXN0b21lciBvYmplY3QgdGhhdCB3YXMgY3JlYXRlZFxuICAgKi9cbiAgY3JlYXRlKGN1c3RvbWVyOiBDcmVhdGVDdXN0b21lcklucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGNyZWF0ZUN1c3RvbWVyTXV0YXRpb24gKCRjdXN0b21lcjogQ3JlYXRlQ3VzdG9tZXJJbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ3VzdG9tZXIoY3VzdG9tZXI6ICRjdXN0b21lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgY3VzdG9tZXJcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlQ3VzdG9tZXIuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIGN1c3RvbWVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgQ3VzdG9tZXIgb2JqZWN0XG4gICAqIEBwYXJhbSB7VXBkYXRlQ3VzdG9tZXJJbnB1dH0gY3VzdG9tZXIgLSBUaGUgdXBkYXRlZCBDdXN0b21lciBvYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyIE9iamVjdCB0aGF0IHdhcyB1cGRhdGVkXG4gICAqL1xuICB1cGRhdGUoaWQ6IHN0cmluZywgY3VzdG9tZXI6IFVwZGF0ZUN1c3RvbWVySW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gdXBkYXRlQ3VzdG9tZXJNdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkY3VzdG9tZXI6IFVwZGF0ZUN1c3RvbWVySW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUN1c3RvbWVyKGlkOiAkaWQsIGN1c3RvbWVyOiAkY3VzdG9tZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIGN1c3RvbWVyXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZUN1c3RvbWVyLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnJvbGwgYSBuZXcgQVBOcyB0b2tlblxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyIE9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBUaGUgQVBOUyBUb2tlblxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDdXN0b21lcj59XG4gICAqL1xuICBlbnJvbGxBcG5zVG9rZW4oaWQ6IHN0cmluZywgdG9rZW46IHN0cmluZyk6IFByb21pc2U8Q3VzdG9tZXI+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGVucm9sbEN1c3RvbWVyQXBuc1Rva2VuTXV0YXRpb24gKCRpZDogU3RyaW5nISwgJHRva2VuOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGVucm9sbEN1c3RvbWVyQXBuc1Rva2VuKGlkOiAkaWQsIHRva2VuOiAkdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHRva2VuXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmVucm9sbEN1c3RvbWVyQXBuc1Rva2VuKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldm9rZSBhbiBBUE5zIHRva2VuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgQ3VzdG9tZXIgT2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFRoZSBBUE5TIFRva2VuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEN1c3RvbWVyPn1cbiAgICovXG4gIHJldm9rZUFwbnNUb2tlbihpZDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxDdXN0b21lcj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gcmV2b2tlQ3VzdG9tZXJBcG5zVG9rZW5NdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkdG9rZW46IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV2b2tlQ3VzdG9tZXJBcG5zVG9rZW4oaWQ6ICRpZCwgdG9rZW46ICR0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdG9rZW5cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQucmV2b2tlQ3VzdG9tZXJBcG5zVG9rZW4pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRW5yb2xsIGEgbmV3IEZDTSB0b2tlblxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyIE9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBUaGUgRkNNIFRva2VuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEN1c3RvbWVyPn1cbiAgICovXG4gIGVucm9sbEZjbVRva2VuKGlkOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEN1c3RvbWVyPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBlbnJvbGxDdXN0b21lckZjbVRva2VuTXV0YXRpb24gKCRpZDogU3RyaW5nISwgJHRva2VuOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGVucm9sbEN1c3RvbWVyRmNtVG9rZW4oaWQ6ICRpZCwgdG9rZW46ICR0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdG9rZW5cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZW5yb2xsQ3VzdG9tZXJGY21Ub2tlbik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXZva2UgYW4gRkNNIHRva2VuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgQ3VzdG9tZXIgT2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFRoZSBGQ00gVG9rZW5cbiAgICogQHJldHVybnMge1Byb21pc2U8Q3VzdG9tZXI+fVxuICAgKi9cbiAgcmV2b2tlRmNtVG9rZW4oaWQ6IHN0cmluZywgdG9rZW46IHN0cmluZyk6IFByb21pc2U8Q3VzdG9tZXI+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIHJldm9rZUN1c3RvbWVyRmNtVG9rZW5NdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkdG9rZW46IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV2b2tlQ3VzdG9tZXJGY21Ub2tlbihpZDogJGlkLCB0b2tlbjogJHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0b2tlblxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5yZXZva2VDdXN0b21lckZjbVRva2VuKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIGN1c3RvbWVyJ3MgY3JlZGl0IGNhcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBDdXN0b21lciBPYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gVGhlIFN0cmlwZSBUb2tlblxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxDdXN0b21lcj59XG4gICAqL1xuICB1cGRhdGVDcmVkaXRDYXJkKGlkOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEN1c3RvbWVyPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiB1cGRhdGVDdXN0b21lckNyZWRpdENhcmRNdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkdG9rZW46IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ3VzdG9tZXJDcmVkaXRDYXJkKGlkOiAkaWQsIHRva2VuOiAkdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHRva2VuXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZUN1c3RvbWVyQ3JlZGl0Q2FyZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgQ3VzdG9tZXIgV2FsbGV0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgQ3VzdG9tZXIgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSB3YWxsZXQgdGhhdCB3YXMgY3JlYXRlZFxuICAgKi9cbiAgLy9RVUVTVElPTjogV2h5IGRvZXMgdGhpcyByZXR1cm4gY291cG9uPz9cbiAgY3JlYXRlV2FsbGV0KGlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlQ3VzdG9tZXJXYWxsZXQgKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVDdXN0b21lcldhbGxldChpZDogJGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVDdXN0b21lcldhbGxldC5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVsb2FkIGN1c3RvbWVyIHdhbGxldFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyIE9iamVjdFxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IGFtb3VudCAtIFRoZSBhbW91bnQgdG8gbG9hZCB0aGUgd2FsbGV0IChpbiBjZW50cylcbiAgICogQHBhcmFtICB7c3RyaW5nfSBwYXltZW50X21ldGhvZCAtIFRoZSBzZWxlY3RlZCBwYXltZW50IG1ldGhvZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSAtIFRoZSBpZCBvZiB0aGUgd2FsbGV0IHRoYXQgd2FzIHJlbG9hZGVkXG4gICAqL1xuICAvL1FVRVNUSU9OOiBXaHkgZG9lcyB0aGlzIHJldHVybiBjb3Vwb24/P1xuICByZWxvYWRXYWxsZXQoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhbW91bnQ6IG51bWJlcixcbiAgICBwYXltZW50X21ldGhvZDogc3RyaW5nXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiByZWxvYWRDdXN0b21lcldhbGxldCAoJGlkOiBTdHJpbmchLCAkYW1vdW50OiBJbnQhLCAkcGF5bWVudF9tZXRob2Q6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsb2FkQ3VzdG9tZXJXYWxsZXQoaWQ6ICRpZCwgYW1vdW50OiAkYW1vdW50LCBwYXltZW50X21ldGhvZDogJHBheW1lbnRfbWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgcGF5bWVudF9tZXRob2RcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQucmVsb2FkQ3VzdG9tZXJXYWxsZXQuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgcGFzc3dvcmQgcmVzZXQgY29kZSB0byBjdXN0b21lclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGVtYWlsX2FkZHJlc3MgLSBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgY3VzdG9tZXJcbiAgICogQHBhcmFtICB7UmVzZXRDb2RlU2VuZE1ldGhvZH0gbWV0aG9kIC0gVGhlIG1ldGhvZCB0byByZWNlaXZlIHRoZSBjb2RlIG9uLCBlaXRoZXIgRU1BSUwgKGRlZmF1bHQpIG9yIFNNU1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgc2VuZFBhc3N3b3JkUmVzZXRDb2RlKFxuICAgIGVtYWlsX2FkZHJlc3M6IHN0cmluZyxcbiAgICBtZXRob2Q6IFJlc2V0Q29kZVNlbmRNZXRob2QgPSBSZXNldENvZGVTZW5kTWV0aG9kLkVNQUlMXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBzZW5kQ3VzdG9tZXJQYXNzd29yZFJlc2V0Q29kZSAoJGVtYWlsX2FkZHJlc3M6IFN0cmluZyEsICRtZXRob2Q6IFJlc2V0Q29kZVNlbmRNZXRob2QpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEN1c3RvbWVyUGFzc3dvcmRSZXNldENvZGUoZW1haWxfYWRkcmVzczogJGVtYWlsX2FkZHJlc3MsIG1ldGhvZDokbWV0aG9kKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBlbWFpbF9hZGRyZXNzLFxuICAgICAgICAgIG1ldGhvZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5zZW5kQ3VzdG9tZXJQYXNzd29yZFJlc2V0Q29kZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBDdXN0b21lciBQYXNzd29yZFxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGVtYWlsX2FkZHJlc3MgLSBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgY3VzdG9tZXJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBjb2RlIC0gVGVtcG9yYXJ5IENvZGUgZm9yIFBhc3N3b3JkIFJlc2V0c1xuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHBhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgcmVzZXRQYXNzd29yZChcbiAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmcsXG4gICAgY29kZTogc3RyaW5nLFxuICAgIHBhc3N3b3JkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIHJlc2V0Q3VzdG9tZXJQYXNzd29yZCAoJGVtYWlsX2FkZHJlc3M6IFN0cmluZyEsICRjb2RlOiBTdHJpbmchLCAkcGFzc3dvcmQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXN0b21lclBhc3N3b3JkKGVtYWlsX2FkZHJlc3M6ICRlbWFpbF9hZGRyZXNzLCBjb2RlOiAkY29kZSwgcGFzc3dvcmQ6ICRwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICBjb2RlLFxuICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnJlc2V0Q3VzdG9tZXJQYXNzd29yZC5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVmdW5kIGN1c3RvbWVyIHdhbGxldCBieSB2ZW5kb3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBDdXN0b21lclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZlbmRvcl9pZCAtIElEIG9mIHRoZSBWZW5kb3IgaXNzdWluZyB0aGUgcmVmdW5kXG4gICAqIEBwYXJhbSAge251bWJlcn0gYW1vdW50IC0gVGhlIGFtb3VudCB0byByZWZ1bmQgdGhlIHdhbGxldCAoaW4gY2VudHMpXG4gICAqIEBwYXJhbSAge3N0cmluZ30gb3JkZXJfaWQgLSBPcHRpb25hbCBvcmRlcklkIHNlbGVjdGVkIHBheW1lbnQgbWV0aG9kXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSB3YWxsZXQgdGhhdCB3YXMgcmVsb2FkZWRcbiAgICovXG4gIC8vUVVFU1RJT046IFdoeSBkb2VzIHRoaXMgcmV0dXJuIGNvdXBvbj8/XG4gIHJlZnVuZFdhbGxldChcbiAgICBpZDogc3RyaW5nLFxuICAgIHZlbmRvcl9pZDogc3RyaW5nLFxuICAgIGFtb3VudDogbnVtYmVyLFxuICAgIG9yZGVyX2lkOiBzdHJpbmcgfCBudWxsXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkdmVuZG9yX2lkOiBTdHJpbmchLCAkYW1vdW50OiBJbnQhLCAkb3JkZXJfaWQ6IFN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICByZWZ1bmRDdXN0b21lcldhbGxldChpZDogJGlkLCB2ZW5kb3JfaWQ6ICR2ZW5kb3JfaWQsIGFtb3VudDogJGFtb3VudCwgb3JkZXJfaWQ6ICRvcmRlcl9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdmVuZG9yX2lkLFxuICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICBvcmRlcl9pZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5yZWZ1bmRDdXN0b21lcldhbGxldC5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgd2FsbGV0IHRyYW5zYWN0aW9uIGZvciBjdXN0b21lclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdHJhbnNhY3Rpb25fdHlwZSAtIFRyYW5zYWN0aW9uIHR5cGUsIGVpdGhlciAncmVsb2FkJyBvciAncHVyY2hhc2UnXG4gICAqIEBwYXJhbSAge251bWJlcn0gYW1vdW50IC0gVGhlIGFtb3VudCBpbiBjZW50c1xuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGRlc2NyaXB0aW9uIC0gT3B0aW9uYWwgZGVzY3JpcHRpb24gZm9yIHRyYW5zYWN0aW9uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSB3YWxsZXQgdGhhdCB3YXMgcmVsb2FkZWRcbiAgICovXG4gIC8vUVVFU1RJT046IFdoeSBkb2VzIHRoaXMgcmV0dXJuIGNvdXBvbj8/XG4gIGNyZWF0ZVdhbGxldFRyYW5zYWN0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdHJhbnNhY3Rpb25fdHlwZTogc3RyaW5nLFxuICAgIGFtb3VudDogbnVtYmVyLFxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkdHJhbnNhY3Rpb25fdHlwZTogU3RyaW5nISwgJGFtb3VudDogSW50ISwgJGRlc2NyaXB0aW9uOiBTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ3VzdG9tZXJXYWxsZXRUcmFuc2FjdGlvbihpZDogJGlkLCB0cmFuc2FjdGlvbl90eXBlOiAkdHJhbnNhY3Rpb25fdHlwZSwgYW1vdW50OiAkYW1vdW50LCBkZXNjcmlwdGlvbjogJGRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlLFxuICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICBkZXNjcmlwdGlvblxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVDdXN0b21lcldhbGxldFRyYW5zYWN0aW9uLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBmYXZvdXJpdGUgdmVuZG9yIGZvciBjdXN0b21lclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVuZG9yX2lkIC0gVGhlIGlkIG9mIHRoZSB2ZW5kb3JcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgY3VzdG9tZXIgd2hvc2UgZmF2b3VyaXRlIHZlbmRvciB3YXMgdXBkYXRlZFxuICAgKi9cbiAgYWRkRmF2b3VyaXRlVmVuZG9yKGlkOiBzdHJpbmcsIHZlbmRvcl9pZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEsICR2ZW5kb3JfaWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRmF2b3VyaXRlVmVuZG9yRm9yQ3VzdG9tZXIgKGlkOiAkaWQsIHZlbmRvcl9pZDogJHZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdmVuZG9yX2lkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmFkZEZhdm91cml0ZVZlbmRvckZvckN1c3RvbWVyLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmYXZvdXJpdGUgdmVuZG9yIGZvciBjdXN0b21lclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIEN1c3RvbWVyXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVuZG9yX2lkIC0gVGhlIGlkIG9mIHRoZSB2ZW5kb3JcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgY3VzdG9tZXIgd2hvc2UgZmF2b3VyaXRlIHZlbmRvciB3YXMgdXBkYXRlZFxuICAgKi9cbiAgcmVtb3ZlRmF2b3VyaXRlVmVuZG9yKGlkOiBzdHJpbmcsIHZlbmRvcl9pZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEsICR2ZW5kb3JfaWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRmF2b3VyaXRlVmVuZG9yRm9yQ3VzdG9tZXIgKGlkOiAkaWQsIHZlbmRvcl9pZDogJHZlbmRvcl9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdmVuZG9yX2lkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnJlbW92ZUZhdm91cml0ZVZlbmRvckZvckN1c3RvbWVyLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBmYXZvdXJpdGUgaXRlbSBmb3IgY3VzdG9tZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBDdXN0b21lclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGl0ZW1faWQgLSBUaGUgaWQgb2YgdGhlIGl0ZW1cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgY3VzdG9tZXIgd2hvc2UgZmF2b3VyaXRlIGl0ZW0gd2FzIHVwZGF0ZWRcbiAgICovXG4gIGFkZEZhdm91cml0ZUl0ZW0oaWQ6IHN0cmluZywgaXRlbV9pZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEsICRpdGVtX2lkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEZhdm91cml0ZUl0ZW1Gb3JDdXN0b21lciAoaWQ6ICRpZCwgaXRlbV9pZDogJGl0ZW1faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIGl0ZW1faWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuYWRkRmF2b3VyaXRlSXRlbUZvckN1c3RvbWVyLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmYXZvdXJpdGUgaXRlbSBmb3IgY3VzdG9tZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBDdXN0b21lclxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGl0ZW1faWQgLSBUaGUgaWQgb2YgdGhlIGl0ZW1cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgY3VzdG9tZXIgd2hvc2UgZmF2b3VyaXRlIGl0ZW0gd2FzIHVwZGF0ZWRcbiAgICovXG4gIHJlbW92ZUZhdm91cml0ZUl0ZW0oaWQ6IHN0cmluZywgaXRlbV9pZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6U3RyaW5nISwgJGl0ZW1faWQ6U3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVGYXZvdXJpdGVJdGVtRm9yQ3VzdG9tZXIgKGlkOiRpZCwgaXRlbV9pZDokaXRlbV9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgaXRlbV9pZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5yZW1vdmVGYXZvdXJpdGVJdGVtRm9yQ3VzdG9tZXIuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvbnRyb2xsZXIgZm9yIGN1c3RvbWVyIHRva2Vucy5cbiAqL1xuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21lclRva2VuIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXIge1xuICBib2R5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQ3VzdG9tZXJUb2tlbkNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLmNyZWF0ZSA9IHRoaXMuY3JlYXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQ3VzdG9tZXJUb2tlbiwgcmV0dXJuIEN1c3RvbWVyVG9rZW4gSUQgaWYgc3VjY2Vzc2Z1bFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWxfYWRkcmVzcyAtIFRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSBDdXN0b21lclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgLSBUaGUgcGFzc3dvcmQgb2YgdGhlIEN1c3RvbWVyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEN1c3RvbWVyVG9rZW4+fVxuICAgKi9cbiAgY3JlYXRlKGVtYWlsX2FkZHJlc3M6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Q3VzdG9tZXJUb2tlbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlQ3VzdG9tZXJUb2tlbk11dGF0aW9uICgkZW1haWxfYWRkcmVzczogU3RyaW5nISwgJHBhc3N3b3JkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUN1c3RvbWVyVG9rZW4oZW1haWxfYWRkcmVzczogJGVtYWlsX2FkZHJlc3MsIHBhc3N3b3JkOiAkcGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlQ3VzdG9tZXJUb2tlbik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgVmVuZG9yIH0gZnJvbSBcIi4vVmVuZG9yQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9DdXN0b21lckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tIFwiLi9NZW51SXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFNlbGVjdElucHV0IH0gZnJvbSBcIi4vQ29tbW9uSW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBPcmRlciB9IGZyb20gXCIuL09yZGVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcbi8vIGltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9hZGFwdG9ycy9DaGVhcHJFYXRzR3JhcGhRTEFkYXB0b3JcIjtcbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZHMge1xuICBhcHBsZV9wYXk/OiBib29sZWFuO1xuICBhbmRyb2lkX3BheT86IGJvb2xlYW47XG4gIGNyZWRpdF9jYXJkPzogYm9vbGVhbjtcbiAgaW5fcGVyc29uPzogYm9vbGVhbjtcbiAgd2FsbGV0PzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZHNJbnB1dCB7XG4gIGFwcGxlX3BheT86IGJvb2xlYW47IC8vIGRlZmF1bHQgVFJVRVxuICBhbmRyb2lkX3BheT86IGJvb2xlYW47IC8vIGRlZmF1bHQgVFJVRVxuICBjcmVkaXRfY2FyZD86IGJvb2xlYW47IC8vIGRlZmF1bHQgVFJVRVxuICBpbl9wZXJzb24/OiBib29sZWFuOyAvLyBkZWZhdWx0IFRSVUVcbiAgd2FsbGV0PzogYm9vbGVhbjsgLy8gZGVmYXVsdCBUUlVFXG59XG5leHBvcnQgaW50ZXJmYWNlIENvdXBvblRyYW5zYWN0aW9uIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXIge1xuICBjb3Vwb24/OiBDb3Vwb247XG4gIHRyYW5zYWN0aW9uX3R5cGU/OiBzdHJpbmc7XG4gIHZhbHVlPzogc3RyaW5nO1xuICBvcmRlcj86IE9yZGVyO1xuICBjdXN0b21lcj86IEN1c3RvbWVyO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVDb3Vwb25JbnB1dCB7XG4gIGNvZGU6IHN0cmluZztcbiAgY291cG9uX3R5cGU6IHN0cmluZztcbiAgdmFsdWU6IG51bWJlcjtcbiAgaXRlbV9zY29wZT86IHN0cmluZztcbiAgdmVuZG9yX3Njb3BlPzogc3RyaW5nO1xuICBjdXN0b21lcl9zY29wZT86IHN0cmluZztcbiAgdXNlczogbnVtYmVyO1xuICB1c2VzX3Blcl9jdXN0b21lcjogbnVtYmVyO1xuICBjYW5fY29tYmluZTogYm9vbGVhbjtcbiAgY2Fycnlfb3ZlcjogYm9vbGVhbjtcbiAgZXhwaXJlX2F0OiBzdHJpbmc7XG4gIHBhaWRfYnlfdmVuZG9yOiBib29sZWFuO1xuICBtaW5fcHVyY2hhc2U6IG51bWJlcjtcbiAgcGF5bWVudF9tZXRob2RzPzogUGF5bWVudE1ldGhvZHNJbnB1dDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ291cG9uIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXIge1xuICBjb2RlPzogc3RyaW5nO1xuICBjb3Vwb25fdHlwZT86IHN0cmluZztcbiAgdmFsdWU/OiBudW1iZXI7XG4gIHJlYWxfdmFsdWU/OiBudW1iZXI7XG4gIGl0ZW1fc2NvcGU/OiBNZW51SXRlbTtcbiAgdmVuZG9yX3Njb3BlPzogVmVuZG9yO1xuICBjdXN0b21lcl9zY29wZT86IEN1c3RvbWVyO1xuICB1c2VzPzogbnVtYmVyO1xuICB1c2VzX3Blcl9jdXN0b21lcj86IG51bWJlcjtcbiAgY2FuX2NvbWJpbmU/OiBib29sZWFuO1xuICBjYXJyeV9vdmVyPzogYm9vbGVhbjtcbiAgZXhwaXJlX2F0Pzogc3RyaW5nO1xuICBwYWlkX2J5X3ZlbmRvcj86IGJvb2xlYW47XG4gIG1pbl9wdXJjaGFzZT86IG51bWJlcjtcbiAgdHJhbnNhY3Rpb25zKHNlbGVjdDogU2VsZWN0SW5wdXQpOiBBcnJheTxDb3Vwb25UcmFuc2FjdGlvbj47XG59XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIGNvdXBvbnMuXG4gKi9cblxuZXhwb3J0IGNsYXNzIENvdXBvbkNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLmNyZWF0ZSA9IHRoaXMuY3JlYXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgY291cG9uLCByZXR1cm4gY291cG9uIElEIGlmIHN1Y2Nlc3NmdWxcbiAgICogQHBhcmFtIHtDcmVhdGVDb3Vwb25JbnB1dH0gY2F0ZWdvcnkgLSBUaGUgQ291cG9uIE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgY3JlYXRlKGNvdXBvbjogQ3JlYXRlQ291cG9uSW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlQ291cG9uTXV0YXRpb24gKCRjb3Vwb246IENyZWF0ZUNvdXBvbklucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVDb3Vwb24oY291cG9uOiAkY291cG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBjb3Vwb25cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlQ291cG9uLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb250cm9sbGVyIGZvciBlbXBsb3llZSB0b2tlbnMuXG4gKi9cbmltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcblxuZXhwb3J0IGludGVyZmFjZSBFbXBsb3llZVRva2VuIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXIge1xuICBib2R5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgRW1wbG95ZWVUb2tlbkNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLmNyZWF0ZSA9IHRoaXMuY3JlYXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgRW1wbG95ZWVUb2tlbiwgcmV0dXJuIEVtcGxveWVlVG9rZW4gSUQgaWYgc3VjY2Vzc2Z1bFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmVuZG9yX2lkIC0gVGhlIGlkIG9mIHRoZSBWZW5kb3IgdGhpcyBlbXBsb3llZSB3aWxsIGJlIGFzc2lnbmVkIHRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VybmFtZSAtIFRoZSBVc2VybmFtZSBvZiB0aGUgRW1wbG95ZWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVGhlIHBhc3N3b3JkIG9mIHRoZSBFbXBsb3llZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgY3JlYXRlKFxuICAgIHZlbmRvcl9pZDogc3RyaW5nLFxuICAgIHVzZXJuYW1lOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlRW1wbG95ZWVUb2tlbk11dGF0aW9uICgkdmVuZG9yX2lkOiBTdHJpbmchLCAkdXNlcm5hbWU6IFN0cmluZyEsICRwYXNzd29yZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbXBsb3llZVRva2VuKHZlbmRvcl9pZDogJHZlbmRvcl9pZCwgdXNlcm5hbWU6ICR1c2VybmFtZSwgcGFzc3dvcmQ6ICRwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIHZlbmRvcl9pZCxcbiAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICBwYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVFbXBsb3llZVRva2VuLmJvZHkpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IENhdGVnb3J5IH0gZnJvbSBcIi4vQ2F0ZWdvcnlDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBDb3Vwb24gfSBmcm9tIFwiLi9Db3Vwb25Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBDdXN0b21lciwgR3JvdXAgfSBmcm9tIFwiLi9DdXN0b21lckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEVtcGxveWVlIH0gZnJvbSBcIi4vRW1wbG95ZWVDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBFeHBsb3JlUGFnZSB9IGZyb20gXCIuL0V4cGxvcmVQYWdlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgRmxhc2hTYWxlIH0gZnJvbSBcIi4vRmxhc2hTYWxlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgSGVhZE9mZmljZSB9IGZyb20gXCIuL0hlYWRPZmZpY2VDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBMb3lhbHR5Q2FyZCB9IGZyb20gXCIuL0xveWFsdHlDYXJkQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tIFwiLi9NZW51SXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE9yZGVyIH0gZnJvbSBcIi4vT3JkZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBQYXlvdXQsIFNlcnZpY2VDaGFyZ2UgfSBmcm9tIFwiLi9QYXlvdXRDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBSYXdDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vUmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFN1cnZleSB9IGZyb20gXCIuL1N1cnZleUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFZlbmRvciB9IGZyb20gXCIuL1ZlbmRvckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFZlcmlmaWNhdGlvblNlc3Npb24gfSBmcm9tIFwiLi9WZXJpZmljYXRpb25Db250cm9sbGVyXCI7XG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5UmVzdWx0IHtcbiAgdGhlX2N1c3RvbWVyPzogQ3VzdG9tZXI7XG4gIHRoZV9lbXBsb3llZT86IEVtcGxveWVlO1xuICBjYXRlZ29yaWVzPzogQXJyYXk8Q2F0ZWdvcnk+O1xuICBjb3Vwb25zPzogQXJyYXk8Q291cG9uPjtcbiAgdmFsaWRfY291cG9uPzogQ291cG9uO1xuICBjdXN0b21lcl9lbWFpbF9hZGRyZXNzX2F2YWlsYWJsZT86IGJvb2xlYW47XG4gIGN1c3RvbWVyX3Bob25lX251bWJlcl9hdmFpbGFibGU/OiBib29sZWFuO1xuICBjdXN0b21lcnM/OiBBcnJheTxDdXN0b21lcj47XG4gIGVtcGxveWVlPzogRW1wbG95ZWU7XG4gIGV4cGxvcmVfcGFnZT86IEV4cGxvcmVQYWdlO1xuICBleHBsb3JlX3BhZ2VfYXJjaGl2ZXM/OiBBcnJheTxFeHBsb3JlUGFnZT47XG4gIHZlcnNpb25fZGV0YWlscz86IFZlcnNpb25EZXRhaWxzO1xuICBpc19zZGtfdmVyc2lvbl9zdXBwb3J0ZWQ/OiBib29sZWFuO1xuICBhdXRoX3Rva2VuX3Njb3BlPzogVXNlclR5cGVzO1xuICBtZW51X2l0ZW1zPzogQXJyYXk8TWVudUl0ZW0+O1xuICBtZW51X2l0ZW0/OiBNZW51SXRlbTtcbiAgbG95YWx0eV9jYXJkcz86IEFycmF5PExveWFsdHlDYXJkPjtcbiAgb3JkZXJzPzogQXJyYXk8T3JkZXI+O1xuICBwYXlvdXRzPzogQXJyYXk8UGF5b3V0PjtcbiAgdmVuZG9ycz86IEFycmF5PFZlbmRvcj47XG4gIGhlYWRfb2ZmaWNlcz86IEFycmF5PEhlYWRPZmZpY2U+O1xuICBzZXJ2aWNlX2NoYXJnZXM/OiBBcnJheTxTZXJ2aWNlQ2hhcmdlPjtcbiAgc2VydmljZV9jaGFyZ2U/OiBTZXJ2aWNlQ2hhcmdlO1xuICBzdXJ2ZXlzPzogQXJyYXk8U3VydmV5PjtcbiAgZmxhc2hfc2FsZXM/OiBBcnJheTxGbGFzaFNhbGU+O1xuICB2ZXJmaWNhdGlvbl9zZXNzaW9uPzogVmVyaWZpY2F0aW9uU2Vzc2lvbjtcbiAgZ3JvdXBzPzogQXJyYXk8R3JvdXA+O1xuICBtZXJnZWRfY29uZmlndXJhdGlvbj86IE1lcmdlZENvbmZpZ3VyYXRpb247XG4gIHJhd19jb25maWd1cmF0aW9ucz86IEFycmF5PFJhd0NvbmZpZ3VyYXRpb24+O1xufVxuZXhwb3J0IGludGVyZmFjZSBWZXJzaW9uRGV0YWlscyB7XG4gIHZlcnNpb24/OiBzdHJpbmc7XG4gIGJ1aWxkPzogc3RyaW5nO1xuICBjb21wYXRpYmxlX3Nka192ZXJzaW9uPzogc3RyaW5nO1xufVxuZXhwb3J0IGVudW0gVXNlclR5cGVzIHtcbiAgVkVORE9SX0FETUlOID0gXCJWRU5ET1JfQURNSU5cIixcbiAgVkVORE9SX0VNUExPWUVFID0gXCJWRU5ET1JfRU1QTE9ZRUVcIixcbiAgQ1VTVE9NRVIgPSBcIkNVU1RPTUVSXCIsXG4gIE1BU1RFUiA9IFwiTUFTVEVSXCIsXG4gIElOVkFMSUQgPSBcIklOVkFMSURcIlxufVxuZXhwb3J0IGludGVyZmFjZSBNZXJnZWRDb25maWd1cmF0aW9uIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkYXRhOiBzdHJpbmc7XG59XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIHRoZSBncmFwaC5cbiAqL1xuXG5leHBvcnQgY2xhc3MgR3JhcGhDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vIEFERCBNVVRBVElPTiBNRVRIT0RTIEJFTE9XXG5cbiAgcXVlcnkocXVlcnk6IHN0cmluZywgdmFyaWFibGVzOiBvYmplY3QgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmFwcC5nZXRBZGFwdG9yKCkucXVlcnkocXVlcnksIHZhcmlhYmxlcyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IFZlbmRvciB9IGZyb20gXCIuL1ZlbmRvckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcbi8qKlxuICogQ29udHJvbGxlciBmb3IgaGVhZCBvZmZpY2VzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRPZmZpY2UgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlciB7XG4gIHZlbmRvcnM6IEFycmF5PFZlbmRvcj47XG4gIGlkZW50aWZpZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEhlYWRPZmZpY2VDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgSGVhZE9mZmljZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciAtIFRoZSBpZGVudGlmaWVyIGZvciB0aGUgSGVhZCBPZmZpY2UgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBIZWFkIE9mZmljZSBvYmplY3RcbiAgICovXG4gIGNyZWF0ZShpZGVudGlmaWVyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlSGVhZE9mZmljZSAoJGlkZW50aWZpZXI6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlSGVhZE9mZmljZShpZGVudGlmaWVyOiAkaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWRlbnRpZmllclxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVIZWFkT2ZmaWNlLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSBIZWFkT2ZmaWNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgSGVhZCBPZmZpY2UgT2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIC0gVGhlIGlkZW50aWZpZXIgZm9yIHRoZSBIZWFkIE9mZmljZSBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIEhlYWQgT2ZmaWNlIG9iamVjdFxuICAgKi9cbiAgdXBkYXRlKGlkOiBzdHJpbmcsIGlkZW50aWZpZXI6IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gdXBkYXRlSGVhZE9mZmljZSAoJGlkOiBTdHJpbmchLCAkaWRlbnRpZmllcjogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVIZWFkT2ZmaWNlKGlkOiAkaWQsIGlkZW50aWZpZXI6ICRpZGVudGlmaWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBpZGVudGlmaWVyXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZUhlYWRPZmZpY2UuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIEhlYWRPZmZpY2UgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBIZWFkIE9mZmljZSBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGRlbGV0ZUhlYWRPZmZpY2UgKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVIZWFkT2ZmaWNlKGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRlbGV0ZUhlYWRPZmZpY2UpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IE1vZGlmaWVyIH0gZnJvbSBcIi4vTW9kaWZpZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBDYXRlZ29yeSB9IGZyb20gXCIuL0NhdGVnb3J5Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgRmxhc2hTYWxlSXRlbSB9IGZyb20gXCIuL0ZsYXNoU2FsZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVNZW51SXRlbUlucHV0IHtcbiAgbmFtZTogc3RyaW5nO1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIGltYWdlczogQXJyYXk8c3RyaW5nPjtcbiAgY2Fsb3JpZXM6IG51bWJlcjtcbiAgdGFnczogQXJyYXk8VGFnSW5wdXQ+O1xuICBpbmdyZWRpZW50czogQXJyYXk8VGFnSW5wdXQ+O1xuICBmZWVzOiBBcnJheTxGZWVJbnB1dD47XG4gIHJlY3ljbGVfaW5mbzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBkYWlseV9zcGVjaWFsX2RheT86IHN0cmluZztcbiAgcHJpY2U6IG51bWJlcjtcbiAgb3JpZ2luYWxfcHJpY2U6IG51bWJlcjtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIHdhcm5pbmdfbGFiZWw/OiBzdHJpbmc7XG4gIGNhdGVnb3J5X2lkOiBzdHJpbmc7XG4gIHNvcnRfb3JkZXI/OiBudW1iZXI7XG4gIGVzdGltYXRlZF90aW1lPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBUYWdJbnB1dCB7XG4gIG5hbWU6IHN0cmluZztcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBUYWcge1xuICBuYW1lPzogc3RyaW5nO1xuICBpZGVudGlmaWVyPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBGZWVJbnB1dCB7XG4gIG5hbWU6IHN0cmluZztcbiAgZmVlX3R5cGU6IHN0cmluZztcbiAgYW1vdW50OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIEZlZSB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGZlZV90eXBlPzogc3RyaW5nO1xuICBhbW91bnQ/OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIE1lbnVJdGVtQ29tbW9uUHJvcGVydGllcyB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gIGltYWdlcz86IEFycmF5PHN0cmluZz47XG4gIGNhbG9yaWVzPzogbnVtYmVyO1xuICByZWN5Y2xlX2luZm8/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBkYWlseV9zcGVjaWFsX2RheT86IHN0cmluZztcbiAgcHJpY2U/OiBudW1iZXI7XG4gIG9yaWdpbmFsX3ByaWNlPzogbnVtYmVyO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIHdhcm5pbmdfbGFiZWw/OiBzdHJpbmc7XG4gIHNvcnRfb3JkZXI/OiBudW1iZXI7XG4gIGVzdGltYXRlZF90aW1lPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVNZW51SXRlbUlucHV0IGV4dGVuZHMgTWVudUl0ZW1Db21tb25Qcm9wZXJ0aWVzIHtcbiAgdGFncz86IEFycmF5PFRhZ0lucHV0PjtcbiAgaW5ncmVkaWVudHM/OiBBcnJheTxUYWdJbnB1dD47XG4gIGZlZXM/OiBBcnJheTxGZWVJbnB1dD47XG59XG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoVXBkYXRlTWVudUl0ZW1zSW5wdXQge1xuICBpZDogc3RyaW5nO1xuICBtZW51X2l0ZW06IFVwZGF0ZU1lbnVJdGVtSW5wdXQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIE1lbnVJdGVtIGV4dGVuZHMgTWVudUl0ZW1Db21tb25Qcm9wZXJ0aWVzLCBEZWZhdWx0Q29udHJvbGxlciB7XG4gIG1vZGlmaWVycz86IEFycmF5PE1vZGlmaWVyPjtcbiAgdGFncz86IEFycmF5PFRhZz47XG4gIGluZ3JlZGllbnRzPzogQXJyYXk8VGFnPjtcbiAgZmVlcz86IEFycmF5PEZlZT47XG4gIGNhdGVnb3J5PzogQ2F0ZWdvcnk7XG4gIGZsYXNoX3NhbGVfaW5mbz86IEZsYXNoU2FsZUl0ZW07XG59XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIG1lbnUgaXRlbXMuXG4gKi9cblxuZXhwb3J0IGNsYXNzIE1lbnVJdGVtQ29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMuY3JlYXRlID0gdGhpcy5jcmVhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZSA9IHRoaXMudXBkYXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGUgPSB0aGlzLmRlbGV0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYmF0Y2hVcGRhdGUgPSB0aGlzLmJhdGNoVXBkYXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgTWVudUl0ZW0sIHJldHVybnMgTWVudUl0ZW0gX2lkIGlmIHN1Y2Nlc3NmdWxcbiAgICogQHBhcmFtIHtDcmVhdGVNZW51SXRlbUlucHV0fSBtZW51X2l0ZW0gLSBUaGUgTWVudUl0ZW0gb2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBNZW51SXRlbSBvYmplY3RcbiAgICovXG4gIGNyZWF0ZShtZW51X2l0ZW06IENyZWF0ZU1lbnVJdGVtSW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlTWVudUl0ZW1NdXRhdGlvbiAoJG1lbnVfaXRlbTogQ3JlYXRlTWVudUl0ZW1JbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTWVudUl0ZW0obWVudV9pdGVtOiAkbWVudV9pdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBtZW51X2l0ZW1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlTWVudUl0ZW0uX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbiBleGlzdGluZyBNZW51SXRlbSBiYXNlZCBvbiBnaXZlbiBJRC9tZW51X2l0ZW0sIHJldHVybnMgX2lkIGlmIHN1Y2Nlc3NmdWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBNZW51SXRlbSBPYmplY3RcbiAgICogQHBhcmFtIHtVcGRhdGVNZW51SXRlbUlucHV0fSBtZW51X2l0ZW0gLSBUaGUgTWVudUl0ZW0gT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBNZW51SXRlbSBvYmplY3RcbiAgICovXG4gIHVwZGF0ZShpZDogc3RyaW5nLCBtZW51X2l0ZW06IFVwZGF0ZU1lbnVJdGVtSW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gdXBkYXRlTWVudUl0ZW1NdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkbWVudV9pdGVtOiBVcGRhdGVNZW51SXRlbUlucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVNZW51SXRlbShpZDogJGlkLCBtZW51X2l0ZW06ICRtZW51X2l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIG1lbnVfaXRlbVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC51cGRhdGVNZW51SXRlbS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2ggdXBkYXRlIGEgbGlzdCBvZiBtZW51IGl0ZW1zLlxuICAgKiBAcGFyYW0ge0FycmF5PEJhdGNoVXBkYXRlTWVudUl0ZW1zSW5wdXQ+fSBtZW51X2l0ZW1zIExpc3Qgb2YgQmF0Y2hVcGRhdGVNZW51SXRlbXNJbnB1dFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheTxNZW51SXRlbT4+fSBMaXN0IG9mIG1lbnUgaXRlbXMgd2l0aCBfaWQgZmllbGRcbiAgICovXG4gIGJhdGNoVXBkYXRlKFxuICAgIG1lbnVfaXRlbXM6IEFycmF5PEJhdGNoVXBkYXRlTWVudUl0ZW1zSW5wdXQ+XG4gICk6IFByb21pc2U8QXJyYXk8TWVudUl0ZW0+PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBiYXRjaFVwZGF0ZU1lbnVJdGVtcyAoJG1lbnVfaXRlbXM6IFtCYXRjaFVwZGF0ZU1lbnVJdGVtc0lucHV0XSEpIHtcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hVcGRhdGVNZW51SXRlbXMobWVudV9pdGVtczogJG1lbnVfaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIG1lbnVfaXRlbXNcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuYmF0Y2hVcGRhdGVNZW51SXRlbXMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgTWVudUl0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBNZW51SXRlbSBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IC0gVGhlIGlkIG9mIHRoZSBNZW51SXRlbSBvYmplY3RcbiAgICovXG4gIC8vUVVFU1RJT04gY29ycmVjdCB1c2FnZSBvZiB2b2lkP1xuICBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gZGVsZXRlTWVudUl0ZW1NdXRhdGlvbiAoJGlkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZU1lbnVJdGVtKGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGlmaWVyQ2hvaWNlSW5wdXQge1xuICBuYW1lOiBzdHJpbmc7XG4gIGlkZW50aWZpZXI6IHN0cmluZztcbiAgYXZhaWxhYmxlOiBib29sZWFuO1xuICBwcmljZTogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBNb2RpZmllckNob2ljZSB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gIGF2YWlsYWJsZT86IGJvb2xlYW47XG4gIHByaWNlPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBNb2RpZmllckNvbW1vblByb3BlcnRpZXMge1xuICBuYW1lPzogc3RyaW5nO1xuICBpZGVudGlmaWVyPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xuICBkZWZhdWx0Pzogc3RyaW5nO1xuICBkZWZhdWx0X2Nob2ljZXM/OiBBcnJheTxzdHJpbmc+O1xuICBpc190b3BwaW5nPzogYm9vbGVhbjtcbiAgbWF4X2Nob2ljZT86IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlTW9kaWZpZXJJbnB1dCB7XG4gIG5hbWU6IHN0cmluZztcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICByZXF1aXJlZDogYm9vbGVhbjtcbiAgY2hvaWNlczogQXJyYXk8TW9kaWZpZXJDaG9pY2VJbnB1dD47XG4gIGRlZmF1bHQ/OiBzdHJpbmc7XG4gIGRlZmF1bHRfY2hvaWNlczogQXJyYXk8c3RyaW5nPjtcbiAgbWVudV9pdGVtX2lkOiBzdHJpbmc7XG4gIGlzX3RvcHBpbmc6IGJvb2xlYW47XG4gIG1heF9jaG9pY2U/OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZU1vZGlmaWVySW5wdXQgZXh0ZW5kcyBNb2RpZmllckNvbW1vblByb3BlcnRpZXMge1xuICBjaG9pY2VzPzogQXJyYXk8TW9kaWZpZXJDaG9pY2VJbnB1dD47XG59XG5leHBvcnQgaW50ZXJmYWNlIE1vZGlmaWVyIGV4dGVuZHMgTW9kaWZpZXJDb21tb25Qcm9wZXJ0aWVzLCBEZWZhdWx0Q29udHJvbGxlciB7XG4gIGNob2ljZXM/OiBBcnJheTxNb2RpZmllckNob2ljZT47XG59XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIG1vZGlmaWVycy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgTW9kaWZpZXJDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgTW9kaWZpZXJcbiAgICogQHBhcmFtIHtDcmVhdGVNb2RpZmllcklucHV0fSBtb2RpZmllciAtIFRoZSBNb2RpZmllciBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIE1vZGlmaWVyIE9iamVjdFxuICAgKi9cbiAgY3JlYXRlKG1vZGlmaWVyOiBDcmVhdGVNb2RpZmllcklucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGNyZWF0ZU1vZGlmaWVyICgkbW9kaWZpZXI6IENyZWF0ZU1vZGlmaWVySW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU1vZGlmaWVyKG1vZGlmaWVyOiAkbW9kaWZpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIG1vZGlmaWVyXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmNyZWF0ZU1vZGlmaWVyLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYW4gZXhpc3RpbmcgTW9kaWZpZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBNb2RpZmllciBPYmplY3RcbiAgICogQHBhcmFtIHtVcGRhdGVNb2RpZmllcklucHV0fSBtb2RpZmllciAtIFRoZSBNb2RpZmllciBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIE1vZGlmaWVyIE9iamVjdFxuICAgKi9cbiAgdXBkYXRlKGlkOiBzdHJpbmcsIG1vZGlmaWVyOiBVcGRhdGVNb2RpZmllcklucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIHVwZGF0ZU1vZGlmaWVyICgkaWQ6IFN0cmluZyEsICRtb2RpZmllcjogVXBkYXRlTW9kaWZpZXJJbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTW9kaWZpZXIoaWQ6ICRpZCwgbW9kaWZpZXI6ICRtb2RpZmllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbW9kaWZpZXJcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQudXBkYXRlTW9kaWZpZXIuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhbiBleGlzdGluZyBNb2RpZmllclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIE1vZGlmaWVyIE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIC8vUVVFU1RJT04gY29ycmVjdCB1c2FnZSBvZiB2b2lkP1xuICBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gZGVsZXRlTW9kaWZpZXIgKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVNb2RpZmllcihpZDogJGlkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgUGF5bWVudE1ldGhvZHNJbnB1dCxcbiAgUGF5bWVudE1ldGhvZHMsXG4gIENvdXBvblxufSBmcm9tIFwiLi9Db3Vwb25Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBUYWdJbnB1dCwgTWVudUl0ZW0sIFRhZyB9IGZyb20gXCIuL01lbnVJdGVtQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBFbXBsb3llZSB9IGZyb20gXCIuL0VtcGxveWVlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ2F0ZWdvcnkgfSBmcm9tIFwiLi9DYXRlZ29yeUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEhlYWRPZmZpY2UgfSBmcm9tIFwiLi9IZWFkT2ZmaWNlQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgUGF5b3V0UGxhbiwgUGF5b3V0IH0gZnJvbSBcIi4vUGF5b3V0Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgTG95YWx0eVByb2dyYW0gfSBmcm9tIFwiLi9Mb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFN1cnZleSB9IGZyb20gXCIuL1N1cnZleUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEZsYXNoU2FsZSB9IGZyb20gXCIuL0ZsYXNoU2FsZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlVmVuZG9yV2l0aEVtcGxveWVlSW5wdXQge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsX2FkZHJlc3M6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgcGxhbjogc3RyaW5nO1xufVxuZXhwb3J0IGVudW0gVmVuZG9yQXBwcm92YWxTdGF0dXMge1xuICBOT1RfQVBQUk9WRUQgPSBcIk5PVF9BUFBST1ZFRFwiLFxuICBQRU5ESU5HID0gXCJQRU5ESU5HXCIsXG4gIEFQUFJPVkVEID0gXCJBUFBST1ZFRFwiXG59XG5leHBvcnQgZW51bSBQYXlvdXRBdXRvUmVxdWVzdFNjaGVkdWxlIHtcbiAgT0ZGID0gXCJPRkZcIixcbiAgV0VFS0xZID0gXCJXRUVLTFlcIixcbiAgQklfV0VFS0xZID0gXCJCSV9XRUVLTFlcIixcbiAgTU9OVEhMWSA9IFwiTU9OVEhMWVwiXG59XG5leHBvcnQgaW50ZXJmYWNlIFZlbmRvckRhaWx5RGVhbHNNZW51IHtcbiAgbW9uZGF5PzogQXJyYXk8TWVudUl0ZW0+O1xuICB0dWVzZGF5PzogQXJyYXk8TWVudUl0ZW0+O1xuICB3ZWRuZXNkYXk/OiBBcnJheTxNZW51SXRlbT47XG4gIHRodXJzZGF5PzogQXJyYXk8TWVudUl0ZW0+O1xuICBmcmlkYXk/OiBBcnJheTxNZW51SXRlbT47XG4gIHNhdHVyZGF5PzogQXJyYXk8TWVudUl0ZW0+O1xuICBzdW5kYXk/OiBBcnJheTxNZW51SXRlbT47XG59XG5leHBvcnQgaW50ZXJmYWNlIFZlbmRvck9yZGVyVHlwZXMge1xuICBlYXRfaW46IGJvb2xlYW47XG4gIHRha2Vfb3V0OiBib29sZWFuO1xuICBkZWxpdmVyeTogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVmVuZG9yQW5hbHl0aWNzQ291cG9uVXNhZ2Uge1xuICBjb3Vwb24/OiBDb3Vwb247XG4gIHVzZV9jb3VudD86IG51bWJlcjtcbn1cbmV4cG9ydCBlbnVtIFZlbmRvckFuYWx5dGljc0N1c3RvbWVyVHlwZSB7XG4gIEZJUlNUX1RJTUUgPSBcIkZJUlNUX1RJTUVcIixcbiAgQ0FTVUFMID0gXCJDQVNVQUxcIixcbiAgUkVHVUxBUiA9IFwiUkVHVUxBUlwiXG59XG5leHBvcnQgaW50ZXJmYWNlIFZlbmRvckFuYWx5dGljc0N1c3RvbWVyQW5hbHlzaXMge1xuICBjdXN0b21lcl9pZD86IHN0cmluZztcbiAgY3VzdG9tZXJfbmFtZT86IHN0cmluZztcbiAgY3VzdG9tZXJfZW1haWxfYWRkcmVzcz86IHN0cmluZztcbiAgdmlzaXRfY291bnQ/OiBudW1iZXI7XG4gIGxhc3RfdmlzaXRfZGF0ZT86IHN0cmluZztcbiAgY3VzdG9tZXJfdHlwZT86IFZlbmRvckFuYWx5dGljc0N1c3RvbWVyVHlwZTtcbiAgaXNfc3RvcmVfZmF2b3VyaXRlZD86IGJvb2xlYW47XG4gIGZhdm91cml0ZWRfaXRlbXM/OiBBcnJheTxNZW51SXRlbT47XG59XG5leHBvcnQgaW50ZXJmYWNlIFZlbmRvckFuYWx5dGljcyB7XG4gIG9yZGVyX2NvdW50PzogbnVtYmVyO1xuICB0b3RhbF9zYWxlcz86IG51bWJlcjtcbiAgaXRlbV9jb3VudD86IG51bWJlcjtcbiAgY291cG9uX3VzYWdlPzogQXJyYXk8VmVuZG9yQW5hbHl0aWNzQ291cG9uVXNhZ2U+O1xuICBjdXN0b21lcl9hbmFseXNpcz86IEFycmF5PFZlbmRvckFuYWx5dGljc0N1c3RvbWVyQW5hbHlzaXM+O1xufVxuZXhwb3J0IGludGVyZmFjZSBWZW5kb3IgZXh0ZW5kcyBWZW5kb3JDb21tb25Qcm9wZXJ0aWVzLCBEZWZhdWx0Q29udHJvbGxlciB7XG4gIGVtcGxveWVlcz86IEFycmF5PEVtcGxveWVlPjtcbiAgY2F0ZWdvcmllcz86IEFycmF5PENhdGVnb3J5PjtcbiAgaGVhZF9vZmZpY2U/OiBIZWFkT2ZmaWNlO1xuICB0YWdzPzogQXJyYXk8VGFnPjtcbiAgbG9jYXRpb24/OiBMb2NhdGlvbjtcbiAgb3Blbl9ob3Vycz86IE9wZW5Ib3VycztcbiAgcGF5bWVudF9tZXRob2RzPzogUGF5bWVudE1ldGhvZHM7XG4gIGRpcmVjdF9kZXBvc2l0X2luZm8/OiBEaXJlY3REZXBvc2l0SW5mb0lucHV0O1xuICB0aW1lem9uZT86IHN0cmluZztcbiAgcGF5b3V0X3BsYW4/OiBQYXlvdXRQbGFuO1xuICBsb3lhbHR5X3Byb2dyYW1zPzogQXJyYXk8TG95YWx0eVByb2dyYW0+O1xuICBwYXlvdXRzPzogQXJyYXk8UGF5b3V0PjtcbiAgc3VydmV5cz86IEFycmF5PFN1cnZleT47XG4gIGNvdXBvbnM/OiBBcnJheTxDb3Vwb24+O1xuICByZXF1ZXN0ZWRfcGF5b3V0PzogYm9vbGVhbjtcbiAgYW5hbHl0aWNzKGZyb206IHN0cmluZywgdG86IHN0cmluZyk6IFZlbmRvckFuYWx5dGljcztcbiAgYWN0aXZlX2ZsYXNoX3NhbGU/OiBGbGFzaFNhbGU7XG4gIGlzX3Rlc3Q/OiBib29sZWFuO1xuICBhcHByb3ZhbF9zdGF0dXM/OiBWZW5kb3JBcHByb3ZhbFN0YXR1cztcbiAgdGVzdGVycz86IEFycmF5PFZlbmRvclRlc3Rlcj47XG4gIGRhaWx5X2RlYWxzX21lbnU6IFZlbmRvckRhaWx5RGVhbHNNZW51O1xuICBvcmRlcl90eXBlcz86IFZlbmRvck9yZGVyVHlwZXM7XG59XG5leHBvcnQgaW50ZXJmYWNlIFRpbWVTcGFuSW5wdXQge1xuICBmcm9tOiBzdHJpbmc7XG4gIHRvOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIFRpbWVTcGFuIHtcbiAgZnJvbT86IHN0cmluZztcbiAgdG8/OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIE9wZW5Ib3Vyc0lucHV0IHtcbiAgbW9uZGF5OiBBcnJheTxUaW1lU3BhbklucHV0PjtcbiAgdHVlc2RheTogQXJyYXk8VGltZVNwYW5JbnB1dD47XG4gIHdlZG5lc2RheTogQXJyYXk8VGltZVNwYW5JbnB1dD47XG4gIHRodXJzZGF5OiBBcnJheTxUaW1lU3BhbklucHV0PjtcbiAgZnJpZGF5OiBBcnJheTxUaW1lU3BhbklucHV0PjtcbiAgc2F0dXJkYXk6IEFycmF5PFRpbWVTcGFuSW5wdXQ+O1xuICBzdW5kYXk6IEFycmF5PFRpbWVTcGFuSW5wdXQ+O1xufVxuZXhwb3J0IGludGVyZmFjZSBPcGVuSG91cnMge1xuICBtb25kYXk/OiBBcnJheTxUaW1lU3BhbklucHV0PjtcbiAgdHVlc2RheT86IEFycmF5PFRpbWVTcGFuSW5wdXQ+O1xuICB3ZWRuZXNkYXk/OiBBcnJheTxUaW1lU3BhbklucHV0PjtcbiAgdGh1cnNkYXk/OiBBcnJheTxUaW1lU3BhbklucHV0PjtcbiAgZnJpZGF5PzogQXJyYXk8VGltZVNwYW5JbnB1dD47XG4gIHNhdHVyZGF5PzogQXJyYXk8VGltZVNwYW5JbnB1dD47XG4gIHN1bmRheT86IEFycmF5PFRpbWVTcGFuSW5wdXQ+O1xufVxuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbklucHV0IHtcbiAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gIGxhdGl0dWRlOiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIExvY2F0aW9uIHtcbiAgbG9uZ2l0dWRlPzogbnVtYmVyO1xuICBsYXRpdHVkZT86IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGlyZWN0RGVwb3NpdEluZm9JbnB1dCB7XG4gIHRyYW5zaXRfbm86IHN0cmluZztcbiAgaW5zdGl0dXRpb25fbm86IHN0cmluZztcbiAgYWNjb3VudF9ubzogc3RyaW5nO1xuICBjaGVxdWVfaW1hZ2U6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGlyZWN0RGVwb3NpdEluZm8ge1xuICB0cmFuc2l0X25vPzogc3RyaW5nO1xuICBpbnN0aXR1dGlvbl9ubz86IHN0cmluZztcbiAgYWNjb3VudF9ubz86IHN0cmluZztcbiAgY2hlcXVlX2ltYWdlPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBWZW5kb3JDb21tb25Qcm9wZXJ0aWVzIHtcbiAgbmFtZT86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGltYWdlcz86IEFycmF5PHN0cmluZz47XG4gIGFkZHJlc3M/OiBzdHJpbmc7XG4gIHBob25lX251bWJlcj86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBwYXlvdXRfZW1haWxfYWRkcmVzcz86IHN0cmluZztcbiAgZGlyZWN0aW9uczogc3RyaW5nO1xuICByZWNlaXZlX3Ntc19ub3RpZmljYXRpb25zPzogYm9vbGVhbjtcbiAgYXV0b19vcGVuPzogYm9vbGVhbjtcbiAgYXV0b19jbG9zZT86IGJvb2xlYW47XG4gIHBheW91dF9hdXRvX3JlcXVlc3Rfc2NoZWR1bGU/OiBQYXlvdXRBdXRvUmVxdWVzdFNjaGVkdWxlO1xuICBnbG9iYWxfdGF4X3JhdGU/OiBudW1iZXI7XG4gIHBvc3RhbF9jb2RlPzogc3RyaW5nO1xuICBzdG9yZV9sb2dvPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVWZW5kb3JJbnB1dCBleHRlbmRzIFZlbmRvckNvbW1vblByb3BlcnRpZXMge1xuICB0YWdzPzogQXJyYXk8VGFnSW5wdXQ+O1xuICBvcGVuX2hvdXJzPzogT3BlbkhvdXJzSW5wdXQ7XG4gIGxvY2F0aW9uPzogTG9jYXRpb25JbnB1dDtcbiAgZGlyZWN0X2RlcG9zaXRfaW5mbz86IERpcmVjdERlcG9zaXRJbmZvSW5wdXQ7XG4gIHBheW1lbnRfbWV0aG9kcz86IFBheW1lbnRNZXRob2RzSW5wdXQ7XG4gIG9yZGVyX3R5cGVzPzogT3JkZXJUeXBlc0lucHV0O1xufVxuZXhwb3J0IGludGVyZmFjZSBPcmRlclR5cGVzSW5wdXQge1xuICBlYXRfaW4/OiBib29sZWFuO1xuICB0YWtlX291dD86IGJvb2xlYW47XG4gIGRlbGl2ZXJ5PzogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVmVuZG9yVGVzdGVyIHtcbiAgX2lkPzogc3RyaW5nO1xuICBlbWFpbF9hZGRyZXNzPzogc3RyaW5nO1xuICB2ZW5kb3I/OiBWZW5kb3I7XG59XG5cbi8qKlxuICogQ29udHJvbGxlciBmb3IgdmVuZG9ycy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgVmVuZG9yQ29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMuZGVsZXRlVmVuZG9yVGVzdGVyID0gdGhpcy5kZWxldGVWZW5kb3JUZXN0ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmFkZFZlbmRvclRlc3RlckJ5RW1haWxBZGRyZXNzID0gdGhpcy5hZGRWZW5kb3JUZXN0ZXJCeUVtYWlsQWRkcmVzcy5iaW5kKFxuICAgICAgdGhpc1xuICAgICk7XG4gICAgdGhpcy51cGRhdGVWZW5kb3JBcHByb3ZhbFN0YXR1cyA9IHRoaXMudXBkYXRlVmVuZG9yQXBwcm92YWxTdGF0dXMuYmluZChcbiAgICAgIHRoaXNcbiAgICApO1xuICAgIHRoaXMucmVxdWVzdFZlbmRvckFwcHJvdmFsID0gdGhpcy5yZXF1ZXN0VmVuZG9yQXBwcm92YWwuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZSA9IHRoaXMuY3JlYXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3JlYXRlV2l0aEVtcGxveWVlID0gdGhpcy5jcmVhdGVXaXRoRW1wbG95ZWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZUFsbE1lbnVJdGVtc1N0YXR1cyA9IHRoaXMudXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBEZWxldGUgYSB2ZW5kb3IgdGVzdGVyIGJ5IElELlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVmVuZG9yIHRlc3RlcidzIElELlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZGVsZXRlVmVuZG9yVGVzdGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVWZW5kb3JUZXN0ZXIoaWQ6ICRpZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuZGVsZXRlVmVuZG9yVGVzdGVyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyB2ZW5kb3IgdGVzdGVyIGJ5IGVtYWlsIGFkZHJlc3MuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBWZW5kb3IncyBJRC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsX2FkZHJlc3MgQ3VzdG9tZXIncyBlbWFpbCBhZGRyZXNzIHRvIGFkZCBhcyBhIHRlc3Rlci5cbiAgICogQHJldHVybnMge1Byb21pc2U8VmVuZG9yVGVzdGVyPn1cbiAgICovXG4gIGFkZFZlbmRvclRlc3RlckJ5RW1haWxBZGRyZXNzKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgZW1haWxfYWRkcmVzczogc3RyaW5nXG4gICk6IFByb21pc2U8VmVuZG9yVGVzdGVyPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkZW1haWxfYWRkcmVzczogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBhZGRWZW5kb3JUZXN0ZXJCeUVtYWlsQWRkcmVzcyhpZDogJGlkLCBlbWFpbF9hZGRyZXNzOiAkZW1haWxfYWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgZW1haWxfYWRkcmVzc1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5hZGRWZW5kb3JUZXN0ZXJCeUVtYWlsQWRkcmVzcyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYSB2ZW5kb3IncyBhcHByb3ZhbCBzdGF0dXMsIHRoaXMgY2FuIG9ubHkgYmUgY2FsbGVkIGJ5IG1hc3Rlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSB2ZW5kb3IuXG4gICAqIEBwYXJhbSB7VmVuZG9yQXBwcm92YWxTdGF0dXN9IGFwcHJvdmFsX3N0YXR1cyBOZXcgYXBwcm92YWwgc3RhdHVzLCBjYW4gYmUgQVBQUk9WRUQsIFBFTkRJTkcsIE5PVF9BUFBST1ZFRFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cblxuICB1cGRhdGVWZW5kb3JBcHByb3ZhbFN0YXR1cyhcbiAgICBpZDogc3RyaW5nLFxuICAgIGFwcHJvdmFsX3N0YXR1czogVmVuZG9yQXBwcm92YWxTdGF0dXNcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEsICRhcHByb3ZhbF9zdGF0dXM6IFZlbmRvckFwcHJvdmFsU3RhdHVzISkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVWZW5kb3JBcHByb3ZhbFN0YXR1cyhpZDogJGlkLCBhcHByb3ZhbF9zdGF0dXM6ICRhcHByb3ZhbF9zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIGFwcHJvdmFsX3N0YXR1c1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC51cGRhdGVWZW5kb3JBcHByb3ZhbFN0YXR1cy5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBwcm9maWxlIGFwcHJvdmFsIGZyb20gYWRtaW5pc3RyYXRvcnMgYmVmb3JlIHB1Ymxpc2hpbmcgdGhlIHN0b3JlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIHZlbmRvci5cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIHJlcXVlc3RWZW5kb3JBcHByb3ZhbChpZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFZlbmRvckFwcHJvdmFsKGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnJlcXVlc3RWZW5kb3JBcHByb3ZhbCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPOiBEZXByZWNhdGUgdGhpcyBtZXRob2RcbiAgICogQ3JlYXRlIGEgbmV3IHZlbmRvciwgcmV0dXJuIHZlbmRvciBJRCBpZiBzdWNjZXNzZnVsXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2ZW5kb3IgLSBUaGUgVmVuZG9yIE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgLy9RVUVTVElPTiBpcyB0aGlzIGZ1bGx5IGRlcHJlY2F0ZWQ/PyBCZWNhdXNlIG5vdCBpbiBwbGF5Z3JvdW5kXG4gIGNyZWF0ZSh2ZW5kb3I6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJWZW5kb3IuY3JlYXRlIGlzIGRlcHJlY2F0ZWQsIGl0IGlzIHJlY29tbWVuZGVkIGZvciB5b3UgdG8gbW92ZSB0byBWZW5kb3IuY3JlYXRlV2l0aEVtcGxveWVlXCJcbiAgICApO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlVmVuZG9yTXV0YXRpb24gKCR2ZW5kb3I6IENyZWF0ZVZlbmRvcklucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVWZW5kb3IodmVuZG9yOiAkdmVuZG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICB2ZW5kb3JcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgLy9AdHMtaWdub3JlIGRlcHJlY2F0ZWRcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVWZW5kb3IuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBWZW5kb3IgT2JqZWN0IHdpdGggYW4gRW1wbG95ZWUgT2JqZWN0XG4gICAqIEBwYXJhbSB7Q3JlYXRlVmVuZG9yV2l0aEVtcGxveWVlSW5wdXR9IHZlbmRvciAtIFRoZSBWZW5kb3IgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBWZW5kb3IgT2JqZWN0XG4gICAqL1xuICBjcmVhdGVXaXRoRW1wbG95ZWUodmVuZG9yOiBDcmVhdGVWZW5kb3JXaXRoRW1wbG95ZWVJbnB1dCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBjcmVhdGVWZW5kb3JXaXRoRW1wbG95ZWVNdXRhdGlvbigkdmVuZG9yOiBDcmVhdGVWZW5kb3JXaXRoRW1wbG95ZWVJbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVmVuZG9yV2l0aEVtcGxveWVlKHZlbmRvcjogJHZlbmRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgdmVuZG9yXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmNyZWF0ZVZlbmRvcldpdGhFbXBsb3llZS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGEgdmVuZG9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgVmVuZG9yIE9iamVjdFxuICAgKiBAcGFyYW0ge1VwZGF0ZVZlbmRvcklucHV0fSB2ZW5kb3IgLSBUaGUgVmVuZG9yIE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgdXBkYXRlKGlkOiBzdHJpbmcsIHZlbmRvcjogVXBkYXRlVmVuZG9ySW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gdXBkYXRlVmVuZG9yTXV0YXRpb24gKCRpZDogU3RyaW5nISwgJHZlbmRvcjogVXBkYXRlVmVuZG9ySW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZlbmRvcihpZDogJGlkLCB2ZW5kb3I6ICR2ZW5kb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHZlbmRvclxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC51cGRhdGVWZW5kb3IuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIHZlbmRvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmVuZG9yX2lkIC0gVGhlIGlkIG9mIHRoZSBWZW5kb3IgT2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgLSBVcGRhdGVkIHN0YXR1cyBvZiB0aGUgaXRlbXNcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIHVwZGF0ZUFsbE1lbnVJdGVtc1N0YXR1cyh2ZW5kb3JfaWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCR2ZW5kb3JfaWQ6IFN0cmluZyEsICRzdGF0dXM6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWxsTWVudUl0ZW1zU3RhdHVzRm9yVmVuZG9yKHZlbmRvcl9pZDogJHZlbmRvcl9pZCwgc3RhdHVzOiAkc3RhdHVzKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICB2ZW5kb3JfaWQsXG4gICAgICAgICAgc3RhdHVzXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZUFsbE1lbnVJdGVtc1N0YXR1c0ZvclZlbmRvcik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb250cm9sbGVyIGZvciB2ZXJpZmljYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmVyaWZpY2F0aW9uU2Vzc2lvbiB7XG4gIHV1aWQ6IHN0cmluZztcbiAgcGhvbmVfbnVtYmVyOiBzdHJpbmc7XG4gIHZlcmlmaWVkX3N0YXR1czogYm9vbGVhbjtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuZXhwb3J0IGNsYXNzIFZlcmlmaWNhdGlvbkNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLnN0YXJ0VmVyaWZpY2F0aW9uU2Vzc2lvbiA9IHRoaXMuc3RhcnRWZXJpZmljYXRpb25TZXNzaW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jaGVja1ZlcmlmaWNhdGlvblNlc3Npb24gPSB0aGlzLmNoZWNrVmVyaWZpY2F0aW9uU2Vzc2lvbi5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcbiAgLy8gUVVFU1RJT04gb25seSByZXN1bHQgaXMgcmV0dXJuZWQgc28gSSBjYW5ub3Qgc3BlY2lmeSB3aGljaCBrZXkgd2l0aGluIHJlc3VsdCBpcyBhY3R1YWxseSBwcmVzZW50XG4gIC8qKlxuICAgKiBTdGFydCBhIG5ldyBTTVMgdmVyaWZpY2F0aW9uIFNlc3Npb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBob25lX251bWJlciAtIFRoZSBwaG9uZSB0byBiZSB2ZXJpZmllZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxNdXRhdGVSZXN1bHQ+fSAtIFRoZSB1dWlkIHJlcXVpcmVkIHRvIHZlcmlmeSB0aGUgdmVyaWZpY2F0aW9uIGNvZGVcbiAgICovXG4gIHN0YXJ0VmVyaWZpY2F0aW9uU2Vzc2lvbihwaG9uZV9udW1iZXI6IHN0cmluZyk6IFByb21pc2U8TXV0YXRlUmVzdWx0PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiBjcmVhdGVTbXNWZXJpZmljYXRpb25TZXNzaW9uTXV0YXRpb24gKCRwaG9uZV9udW1iZXI6U3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTbXNWZXJpZmljYXRpb25TZXNzaW9uKHBob25lX251bWJlcjokcGhvbmVfbnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dWlkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgcGhvbmVfbnVtYmVyXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmeSBhbiBQaG9uZSBudW1iZXIgdmlhIGNvZGUgcmVjZWl2ZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHV1aWQgLSBVVUlEIG9mIHRoZSB2ZXJpZmljYXRpb24gcmVxdWVzdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmVyaWZpY2F0aW9uX2NvZGUgLSBWZXJpZmljYXRpb24gY29kZSByZWNlaXZlZCBvbiB0aGUgZGV2aWNlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE11dGF0ZVJlc3VsdD59IC0gdmVyaWZpY2F0aW9uIHN0YXR1cyBhbG9uZyB3aXRoIHRoZSBudW1iZXIgY29ycmVzcG9uZGluZyB0byB0aGUgVVVJRFxuICAgKi9cbiAgY2hlY2tWZXJpZmljYXRpb25TZXNzaW9uKFxuICAgIHV1aWQ6IHN0cmluZyxcbiAgICB2ZXJpZmljYXRpb25fY29kZTogc3RyaW5nXG4gICk6IFByb21pc2U8TXV0YXRlUmVzdWx0PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiB2ZXJpZnlTbXNWZXJpZmljYXRpb25TZXNzaW9uTXV0YXRpb24gKCR1dWlkOlN0cmluZyEsICR2ZXJpZmljYXRpb25fY29kZTpTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlcmlmeVNtc1ZlcmlmaWNhdGlvblNlc3Npb24odXVpZDokdXVpZCwgdmVyaWZpY2F0aW9uX2NvZGU6JHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZV9udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZF9zdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICB1dWlkLFxuICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBIdHRwTGluayB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0h0dHBMaW5rXCI7XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIHZhbGlkYXRpb24gc2VydmljZXMuXG4gKi9cbmltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uQ29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMuY3VzdG9tZXJTaWdudXBFbWFpbCA9IHRoaXMuY3VzdG9tZXJTaWdudXBFbWFpbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3VzdG9tZXJTaWdudXBQaG9uZSA9IHRoaXMuY3VzdG9tZXJTaWdudXBQaG9uZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgZ2V0SHR0cExpbmsoYXBwZW5kID0gXCJcIik6IEh0dHBMaW5rIHtcbiAgICByZXR1cm4gbmV3IEh0dHBMaW5rKFxuICAgICAgdGhpcy5hcHAuZ2V0Q29uZmlndXJhdGlvbigpLmVuZHBvaW50cy52YWxpZGF0aW9uRW5kcG9pbnQucHJvZHVjdGlvbiArXG4gICAgICAgIGFwcGVuZFxuICAgICk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBlbWFpbCBjYW4gYmUgdXNlZCBmb3IgY3VzdG9tZXIgYWNjb3VudCBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBBbiBlbWFpbFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgY3VzdG9tZXJTaWdudXBFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGxpbmsgPSB0aGlzLmdldEh0dHBMaW5rKFwiL2N1c3RvbWVyL3NpZ251cC9lbWFpbFwiKTtcbiAgICAgIGxpbmtcbiAgICAgICAgLnBvc3Qoe1xuICAgICAgICAgIGRhdGE6IHsgZW1haWwgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoZGF0YTogeyBkYXRhOiBhbnkgfSkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoZGF0YS5kYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwaG9uZSBudW1iZXIgY2FuIGJlIHVzZWQgZm9yIGN1c3RvbWVyIGFjY291bnQgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBob25lIC0gVGhlIHBob25lIG51bWJlciB0byBzZW5kIHRoZSBjb2RlIHRvIChXaXRob3V0IENvdW50cnkgQ29kZSAmIG5vIHNwYWNlcy9zcGVjaWFsIGNoYXJhY3RlcnMpXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBjdXN0b21lclNpZ251cFBob25lKHBob25lOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbGluayA9IHRoaXMuZ2V0SHR0cExpbmsoXCIvY3VzdG9tZXIvc2lnbnVwL3Bob25lXCIpO1xuICAgICAgbGlua1xuICAgICAgICAucG9zdCh7XG4gICAgICAgICAgZGF0YTogeyBwaG9uZSB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChkYXRhOiB7IGRhdGE6IGFueSB9KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShkYXRhLmRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBheGlvczsiLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBEZWZhdWx0Q29udHJvbGxlclJlcXVpcmVkIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi9DdXN0b21lckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE9yZGVyIH0gZnJvbSBcIi4vT3JkZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuXG5leHBvcnQgZW51bSBTdXJ2ZXlRdWVzdGlvblR5cGUge1xuICBDSEVDS0JPWCA9IFwiQ0hFQ0tCT1hcIixcbiAgTVVMVElfQ0hFQ0tCT1ggPSBcIk1VTFRJX0NIRUNLQk9YXCIsXG4gIFNIT1JUX0FOU1dFUiA9IFwiU0hPUlRfQU5TV0VSXCIsXG4gIFJBVElORyA9IFwiUkFUSU5HXCJcbn1cbmV4cG9ydCBlbnVtIFN1cnZleURlbGl2ZXJ5UnVsZSB7XG4gIEFGVEVSX09SREVSID0gXCJBRlRFUl9PUkRFUlwiXG59XG5leHBvcnQgaW50ZXJmYWNlIFN1cnZleVF1ZXN0aW9uUmVzcG9uc2Uge1xuICBfaWQ6IHN0cmluZztcbiAgcXVlc3Rpb25faWQ6IHN0cmluZztcbiAgYW5zd2VyOiBBcnJheTxzdHJpbmc+O1xufVxuZXhwb3J0IGludGVyZmFjZSBTdXJ2ZXlSZXNwb25zZSBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyUmVxdWlyZWQge1xuICBjdXN0b21lcjogQ3VzdG9tZXI7XG4gIHJlc3BvbnNlczogQXJyYXk8U3VydmV5UXVlc3Rpb25SZXNwb25zZT47XG4gIG9yZGVyPzogT3JkZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIFN1cnZleVF1ZXN0aW9uIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXJSZXF1aXJlZCB7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBxdWVzdGlvbl90eXBlOiBzdHJpbmc7XG4gIGNob2ljZXM/OiBBcnJheTxzdHJpbmc+O1xuICBtYXhfcmF0aW5nPzogbnVtYmVyO1xuICByZXF1aXJlZDogYm9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU3VydmV5IGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXJSZXF1aXJlZCB7XG4gIHZlbmRvcl9pZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBxdWVzdGlvbnM6IEFycmF5PFN1cnZleVF1ZXN0aW9uPjtcbiAgZGVsaXZlcnlfcnVsZTogc3RyaW5nO1xuICBsb3lhbHR5X3Jld2FyZD86IG51bWJlcjtcbiAgd2FsbGV0X3Jld2FyZD86IG51bWJlcjtcbiAgcmVzcG9uc2VzPzogQXJyYXk8U3VydmV5UmVzcG9uc2U+O1xuICByZWxlYXNlZF9hdD86IHN0cmluZztcbiAgYXJjaGl2ZWRfYXQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VydmV5UXVlc3Rpb25JbnB1dCB7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBxdWVzdGlvbl90eXBlOiBTdXJ2ZXlRdWVzdGlvblR5cGU7XG4gIGNob2ljZXM/OiBBcnJheTxzdHJpbmc+O1xuICBtYXhfcmF0aW5nPzogbnVtYmVyO1xuICByZXF1aXJlZD86IGJvb2xlYW47IC8vIGRlZmF1bHQgRmFsc2Vcbn1cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlU3VydmV5SW5wdXQge1xuICB0aXRsZTogc3RyaW5nO1xuICB2ZW5kb3JfaWQ6IHN0cmluZztcbiAgcXVlc3Rpb25zOiBBcnJheTxTdXJ2ZXlRdWVzdGlvbklucHV0PjtcbiAgZGVsaXZlcnlfcnVsZT86IFN1cnZleURlbGl2ZXJ5UnVsZTsgLy8gZGVmYXVsdCBBRlRFUl9PUkRFUlxuICBsb3lhbHR5X3Jld2FyZD86IG51bWJlcjtcbiAgd2FsbGV0X3Jld2FyZD86IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlU3VydmV5SW5wdXQge1xuICB0aXRsZT86IHN0cmluZztcbiAgcXVlc3Rpb25zPzogQXJyYXk8U3VydmV5UXVlc3Rpb25JbnB1dD47XG4gIGRlbGl2ZXJ5X3J1bGU/OiBTdXJ2ZXlEZWxpdmVyeVJ1bGU7XG4gIGxveWFsdHlfcmV3YXJkPzogbnVtYmVyO1xuICB3YWxsZXRfcmV3YXJkPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBTdXJ2ZXlRdWVzdGlvblJlc3BvbnNlSW5wdXQge1xuICBxdWVzdGlvbl9pZDogc3RyaW5nO1xuICBhbnN3ZXI6IEFycmF5PHN0cmluZz47XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVN1cnZleVJlc3BvbnNlSW5wdXQge1xuICBjdXN0b21lcl9pZDogc3RyaW5nO1xuICByZXNwb25zZXM6IEFycmF5PFN1cnZleVF1ZXN0aW9uUmVzcG9uc2VJbnB1dD47XG4gIG9yZGVyX2lkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgU3VydmV5Q29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMuY3JlYXRlID0gdGhpcy5jcmVhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZSA9IHRoaXMudXBkYXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hcmNoaXZlID0gdGhpcy5hcmNoaXZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGUgPSB0aGlzLmRlbGV0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVsZWFzZSA9IHRoaXMucmVsZWFzZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3JlYXRlU3VydmV5UmVzcG9uc2UgPSB0aGlzLmNyZWF0ZVN1cnZleVJlc3BvbnNlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgU3VydmV5IGFuZCByZXR1cm4gdGhlIElEIG9mIHRoZSBjcmVhdGVkIG9iamVjdCBpZiBzdWNjZXNzZnVsXG4gICAqIEBwYXJhbSB7Q3JlYXRlU3VydmV5SW5wdXR9IHN1cnZleSAtIFRoZSBTdXJ2ZXkgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICBjcmVhdGUoc3VydmV5OiBDcmVhdGVTdXJ2ZXlJbnB1dCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJHN1cnZleTogQ3JlYXRlU3VydmV5SW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVN1cnZleShzdXJ2ZXk6ICRzdXJ2ZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIHN1cnZleVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVTdXJ2ZXkuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIFN1cnZleSBhbmQgcmV0dXJuIHRoZSBJRCBvZiB0aGUgdXBkYXRlZCBvYmplY3QgaWYgc3VjY2Vzc2Z1bFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIHN1cnZleSB0byBiZSBtb2RpZmllZFxuICAgKiBAcGFyYW0ge1VwZGF0ZVN1cnZleUlucHV0fSBzdXJ2ZXkgLSBUaGUgTW9kaWZpZWQgU3VydmV5IE9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgdXBkYXRlKGlkOiBzdHJpbmcsIHN1cnZleTogVXBkYXRlU3VydmV5SW5wdXQpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZDogU3RyaW5nISwgJHN1cnZleTogVXBkYXRlU3VydmV5SW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN1cnZleShpZDogJGlkLCBzdXJ2ZXk6ICRzdXJ2ZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHN1cnZleVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC51cGRhdGVTdXJ2ZXkuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFyY2hpdmUgYSBTdXJ2ZXlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBTdXJ2ZXkgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPFN1cnZleT59IC0gQ29uZmlybWF0aW9uIFN0cmluZ1xuICAgKi9cbiAgYXJjaGl2ZShpZDogc3RyaW5nKTogUHJvbWlzZTxTdXJ2ZXk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZVN1cnZleShpZDogJGlkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5hcmNoaXZlU3VydmV5KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIFN1cnZleVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIFN1cnZleSBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBDb25maXJtYXRpb24gU3RyaW5nXG4gICAqL1xuICBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVN1cnZleShpZDogJGlkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kZWxldGVTdXJ2ZXkpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVsZWFzZSBhIFN1cnZleVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIFN1cnZleSBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIFN1cnZleSBvYmplY3RcbiAgICovXG4gIHJlbGVhc2UoaWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbGVhc2VTdXJ2ZXkoaWQ6ICRpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQucmVsZWFzZVN1cnZleS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgU3VydmV5UmVzcG9uc2Ugb2JqZWN0IGZvciBhIFN1cnZleSBvYmplY3QgYW5kIHJldHVybnMgdGhlIFN1cnZleVJlc3BvbnNlIElEIGlmIHN1Y2Nlc3NmdWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1cnZleV9pZCAtIFRoZSBTdXJ2ZXkgT2JqZWN0IElEXG4gICAqIEBwYXJhbSB7Q3JlYXRlU3VydmV5UmVzcG9uc2VJbnB1dH0gc3VydmV5X3Jlc3BvbnNlIC0gVGhlIHN1cnZleSByZXNwb25zZSBvYmplY3Q7IHRoZSBDcmVhdGVTdXJ2ZXlSZXNwb25zZUlucHV0IG9iamVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgY3JlYXRlU3VydmV5UmVzcG9uc2UoXG4gICAgc3VydmV5X2lkOiBzdHJpbmcsXG4gICAgc3VydmV5X3Jlc3BvbnNlOiBDcmVhdGVTdXJ2ZXlSZXNwb25zZUlucHV0XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJHN1cnZleV9pZDogU3RyaW5nISwgJHN1cnZleV9yZXNwb25zZTogQ3JlYXRlU3VydmV5UmVzcG9uc2VJbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlU3VydmV5UmVzcG9uc2Uoc3VydmV5X2lkOiAkc3VydmV5X2lkLCBzdXJ2ZXlfcmVzcG9uc2U6ICRzdXJ2ZXlfcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIHN1cnZleV9pZCxcbiAgICAgICAgICBzdXJ2ZXlfcmVzcG9uc2VcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlU3VydmV5UmVzcG9uc2UuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBEZWZhdWx0Q29udHJvbGxlciB9IGZyb20gXCIuL0NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4vQ3VzdG9tZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBWZW5kb3IgfSBmcm9tIFwiLi9WZW5kb3JDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBTdXJ2ZXksIFN1cnZleVJlc3BvbnNlIH0gZnJvbSBcIi4vU3VydmV5Q29udHJvbGxlclwiO1xuaW1wb3J0IHsgVGlwIH0gZnJvbSBcIi4vVGlwQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgQ2F0ZWdvcnkgfSBmcm9tIFwiLi9DYXRlZ29yeUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IFRhZywgRmVlIH0gZnJvbSBcIi4vTWVudUl0ZW1Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNb2RpZmllckNob2ljZSB9IGZyb20gXCIuL01vZGlmaWVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcblxuZXhwb3J0IGVudW0gT3JkZXJUeXBlIHtcbiAgRUFUX0lOID0gXCJFQVRfSU5cIixcbiAgVEFLRV9PVVQgPSBcIlRBS0VfT1VUXCIsXG4gIERFTElWRVJZID0gXCJERUxJVkVSWVwiXG59XG5leHBvcnQgZW51bSBPcmRlckNhbmNlbGxhdGlvblJlYXNvbiB7XG4gIFZFTkRPUl9DQU5DRUxMRUQgPSBcIlZFTkRPUl9DQU5DRUxMRURcIixcbiAgVkVORE9SX1BSRVBfQ0FOQ0VMTEVEID0gXCJWRU5ET1JfUFJFUF9DQU5DRUxMRURcIixcbiAgVkVORE9SX0lURU1fU09MRF9PVVQgPSBcIlZFTkRPUl9JVEVNX1NPTERfT1VUXCIsXG4gIFZFTkRPUl9TVE9SRV9DTE9TSU5HX1NPT04gPSBcIlZFTkRPUl9TVE9SRV9DTE9TSU5HX1NPT05cIixcbiAgQ1VTVE9NRVJfTk9UX1BJQ0tFRF9VUCA9IFwiQ1VTVE9NRVJfTk9UX1BJQ0tFRF9VUFwiLFxuICBDVVNUT01FUl9DQU5DRUxMRUQgPSBcIkNVU1RPTUVSX0NBTkNFTExFRFwiLFxuICBPVEhFUiA9IFwiT1RIRVJcIlxufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVPcmRlck1vZGlmaWVySW5wdXQge1xuICBtb2RpZmllcl9pZDogc3RyaW5nO1xuICBjaG9pY2VzOiBBcnJheTxzdHJpbmc+O1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVPcmRlcnNJdGVtc0lucHV0IHtcbiAgaXRlbV9pZDogc3RyaW5nO1xuICBtb2RpZmllcnM6IEFycmF5PENyZWF0ZU9yZGVyTW9kaWZpZXJJbnB1dD47XG59XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZU9yZGVySW5wdXQge1xuICB2ZW5kb3JfaWQ6IHN0cmluZztcbiAgcGF5bWVudF9tZXRob2Q6IHN0cmluZztcbiAgaXRlbXM6IEFycmF5PENyZWF0ZU9yZGVyc0l0ZW1zSW5wdXQ+O1xuICBub3RlPzogc3RyaW5nO1xuICBjb3Vwb25zPzogQXJyYXk8c3RyaW5nPjtcbiAgc2NoZWR1bGVkX3BpY2t1cDogc3RyaW5nO1xuICBvcmRlcl90eXBlPzogT3JkZXJUeXBlOyAvLyBkZWZhdWx0IFRBS0VfT1VUXG59XG5leHBvcnQgaW50ZXJmYWNlIE9yZGVyTW9kaWZpZXIge1xuICBfaWQ/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBjaG9pY2VzPzogTW9kaWZpZXJDaG9pY2U7XG59XG5leHBvcnQgaW50ZXJmYWNlIE9yZGVySXRlbSB7XG4gIF9pZD86IHN0cmluZztcbiAgbmFtZT86IHN0cmluZztcbiAgaWRlbnRpZmllcj86IHN0cmluZztcbiAgY2F0ZWdvcnk/OiBDYXRlZ29yeTtcbiAgdGFncz86IFRhZztcbiAgcmVjeWNsZV9pbmZvPzogc3RyaW5nO1xuICBwcmljZT86IG51bWJlcjtcbiAgZmVlcz86IEZlZTtcbiAgZXN0aW1hdGVkX3RpbWU/OiBudW1iZXI7XG4gIG1vZGlmaWVycz86IE9yZGVyTW9kaWZpZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zYWN0aW9uRGF0YSB7XG4gIGlkPzogc3RyaW5nO1xuICBhbW91bnQ/OiBudW1iZXI7XG4gIGNhcHR1cmVkPzogYm9vbGVhbjtcbiAgY3JlYXRlZD86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNhY3Rpb24ge1xuICBfaWQ/OiBzdHJpbmc7XG4gIGRhdGE/OiBUcmFuc2FjdGlvbkRhdGE7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgcmVmdW5kPzogUmVmdW5kO1xuICBjaGFyZ2VfdHlwZT86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmVmdW5kIHtcbiAgaWQ/OiBzdHJpbmc7XG4gIGFtb3VudD86IG51bWJlcjtcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBjcmVhdGVkPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBPcmRlclN0YXR1cyB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gIGRhdGE/OiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIE9yZGVyIGV4dGVuZHMgRGVmYXVsdENvbnRyb2xsZXIge1xuICBpdGVtcz86IEFycmF5PE9yZGVySXRlbT47XG4gIHRyYW5zYWN0aW9ucz86IEFycmF5PFRyYW5zYWN0aW9uPjtcbiAgY3VzdG9tZXI/OiBDdXN0b21lcjtcbiAgdmVuZG9yPzogVmVuZG9yO1xuICBzdWJ0b3RhbD86IG51bWJlcjtcbiAgdG90YWw/OiBudW1iZXI7XG4gIG5vdGU/OiBzdHJpbmc7XG4gIHBheW1lbnRfbWV0aG9kPzogc3RyaW5nO1xuICBzdGF0dXNfaGlzdG9yeT86IEFycmF5PE9yZGVyU3RhdHVzPjtcbiAgc2NoZWR1bGVkX3BpY2t1cD86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBjYW5jZWxfcmVhc29uPzogT3JkZXJDYW5jZWxsYXRpb25SZWFzb247XG4gIGNhbmNlbF9kZXNjcmlwdGlvbj86IHN0cmluZztcbiAgc2V0dGxlZF9hdD86IHN0cmluZztcbiAgcHJlcGFyaW5nX2F0Pzogc3RyaW5nO1xuICBlc3RpbWF0ZWRfcHJlcGFyaW5nX3NlYz86IG51bWJlcjtcbiAgYXRhY2hlZF9zdXJ2ZXk/OiBTdXJ2ZXk7XG4gIGF0dGFjaGVkX3N1cnZleV9yZXNwb25zZT86IFN1cnZleVJlc3BvbnNlO1xuICB0aXA/OiBUaXA7XG4gIG9yZGVyX3R5cGU/OiBPcmRlclR5cGU7XG4gIGRpc2NvdW50PzogbnVtYmVyO1xufVxuLyoqXG4gKiBDb250cm9sbGVyIGZvciBvcmRlcnMuXG4gKi9cblxuZXhwb3J0IGNsYXNzIE9yZGVyQ29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMuY3JlYXRlID0gdGhpcy5jcmVhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbmNlbCA9IHRoaXMuY2FuY2VsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5iZWdpblByZXBhcmluZyA9IHRoaXMuYmVnaW5QcmVwYXJpbmcuYmluZCh0aGlzKTtcbiAgICB0aGlzLnByZXBhcmVkID0gdGhpcy5wcmVwYXJlZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY29tcGxldGUgPSB0aGlzLmNvbXBsZXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBQbGFjZSBhIG5ldyBvcmRlciwgeW91IG11c3QgYmUgYXV0aGVudGljYXRlZCBhcyBhIGN1c3RvbWVyIHRvIHVzZSB0aGlzXG4gICAqIEBwYXJhbSB7Q3JlYXRlT3JkZXJJbnB1dH0gb3JkZXIgLSBUaGUgT3JkZXIgT2JqZWN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RyeV0gLSBJbmRpY2F0b3IgZm9yIGRyeSBvcmRlciBwbGFjZW1lbnRcbiAgICogQHBhcmFtIHtib29sZWFufSBbY2xlYXJfY2FydF0gLSBJbmRpY2F0b3IgdG8gY2xlYXIgYWxsIGNhcnQgYWZ0ZXIgb3JkZXIgcGxhY2VtZW50XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBPcmRlciBPYmplY3RcbiAgICovXG4gIGNyZWF0ZShcbiAgICBvcmRlcjogQ3JlYXRlT3JkZXJJbnB1dCxcbiAgICBkcnk6IGJvb2xlYW4gfCBudWxsLCAvLyBkZWZhdWx0IEZhbHNlXG4gICAgY2xlYXJfY2FydDogYm9vbGVhbiB8IG51bGwgLy8gZGVmYXVsdCBGYWxzZVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gY3JlYXRlT3JkZXJNdXRhdGlvbiAoJG9yZGVyOiBDcmVhdGVPcmRlcklucHV0ISwgJGRyeTogQm9vbGVhbiwgJGNsZWFyX2NhcnQ6IEJvb2xlYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlT3JkZXIob3JkZXI6ICRvcmRlciwgZHJ5OiAkZHJ5LCBjbGVhcl9jYXJ0OiAkY2xlYXJfY2FydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgb3JkZXIsXG4gICAgICAgICAgZHJ5LFxuICAgICAgICAgIGNsZWFyX2NhcnRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlT3JkZXIuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8vUVVFU1RJT04gYmVjYXVzZSBvbmx5IHJlc3VsdCBpcyByZXR1cm5lZCBJIGNhbid0IGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBNdXRhdGVSZXN1bHRcbiAgLy8gVXN1YWxseSBpdCBpcyByZXN1bHQuW211dGF0aW9uIG5hbWVdIGFuZCB0aGVuIGl0IGlzIG1vcmUgc3BlY2lmaWMgd2hhdCBpcyB3aXRoaW4gdGhlIHJlc3VsdFxuICAvKipcbiAgICogQ2FuY2VsIGEgb3JkZXIsIG11c3QgYmUgYXV0aGVudGljYXRlZCBhcyB2ZW5kb3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBPcmRlciBPYmplY3RcbiAgICogQHBhcmFtIHtPcmRlckNhbmNlbGxhdGlvblJlYXNvbn0gcmVhc29uIC0gaW5wdXQgdHlwZSBPcmRlckNhbmNlbGxhdGlvblJlYXNvbiBlbnVtIGluZGljYXRpbmcgcmVhc29uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjcmlwdGlvbiAtIEFkZGl0aW9uYWwgZGV0YWlscyBvbiBvcmRlciBjYW5jZWxsYXRpb25cbiAgICogQHJldHVybnMge1Byb21pc2U8TXV0YXRlUmVzdWx0Pn1cbiAgICovXG4gIGNhbmNlbChcbiAgICBpZDogc3RyaW5nLFxuICAgIHJlYXNvbjogT3JkZXJDYW5jZWxsYXRpb25SZWFzb24sXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGxcbiAgKTogUHJvbWlzZTxNdXRhdGVSZXN1bHQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGNhbmNlbE9yZGVyTXV0YXRpb24gKCRpZDogU3RyaW5nISwgJHJlYXNvbjogT3JkZXJDYW5jZWxsYXRpb25SZWFzb24hLCAkZGVzY3JpcHRpb246IFN0cmluZyl7XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbE9yZGVyKGlkOiAkaWQsIHJlYXNvbjogJHJlYXNvbiwgZGVzY3JpcHRpb246ICRkZXNjcmlwdGlvbil7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICByZWFzb24sXG4gICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgb3JkZXIgYXMgcHJlcGFyaW5nIHdpdGggZXN0aW1hdGVkIHRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBPcmRlciBPYmplY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVzdGltYXRlZF9wcmVwYXJpbmdfc2VjIC0gVGhlIGFtb3VudCBvZiB0aW1lIHRoZSBPcmRlciB3aWxsIHRha2UgYmVmb3JlIGl0IHdpbGwgYmUgcHJlcGFyZWRcbiAgICogQHJldHVybnMge1Byb21pc2U8TXV0YXRlUmVzdWx0Pn1cbiAgICovXG4gIGJlZ2luUHJlcGFyaW5nKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgZXN0aW1hdGVkX3ByZXBhcmluZ19zZWM6IG51bWJlclxuICApOiBQcm9taXNlPE11dGF0ZVJlc3VsdD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gYmVnaW5QcmVwYXJpbmdPcmRlcigkaWQ6IFN0cmluZyEsICRlc3RpbWF0ZWRfcHJlcGFyaW5nX3NlYzogSW50ISl7XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luUHJlcGFyaW5nT3JkZXIoaWQ6ICRpZCwgZXN0aW1hdGVkX3ByZXBhcmluZ19zZWM6ICRlc3RpbWF0ZWRfcHJlcGFyaW5nX3NlYyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBlc3RpbWF0ZWRfcHJlcGFyaW5nX3NlY1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgb3JkZXIgYXMgcHJlcGFyZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBPcmRlciBPYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8TXV0YXRlUmVzdWx0Pn1cbiAgICovXG4gIHByZXBhcmVkKGlkOiBzdHJpbmcpOiBQcm9taXNlPE11dGF0ZVJlc3VsdD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gcHJlcGFyZWRPcmRlck11dGF0aW9uICgkaWQ6IFN0cmluZyEpe1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlZE9yZGVyIChpZDogJGlkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBsZXRlIGFuIG9yZGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgT3JkZXIgT2JqZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE11dGF0ZVJlc3VsdD59XG4gICAqL1xuICBjb21wbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxNdXRhdGVSZXN1bHQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGNvbXBsZXRlT3JkZXJNdXRhdGlvbiAoJGlkOiBTdHJpbmchKXtcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVPcmRlcihpZDogJGlkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBIdHRwTGluayB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0h0dHBMaW5rXCI7XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIGltYWdlIHNlcnZpY2VzLlxuICovXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5leHBvcnQgY2xhc3MgSW1hZ2VDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy51cGxvYWQgPSB0aGlzLnVwbG9hZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0TGluayA9IHRoaXMuZ2V0TGluay5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBIdHRwTGluayBhcHBlbmRlZCB3aXRoIGFwcGVuZFxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGFwcGVuZD1cIlwiXG4gICAqIEByZXR1cm5zIHtIdHRwTGlua31cbiAgICovXG4gIGdldEh0dHBMaW5rKGFwcGVuZDogc3RyaW5nID0gXCJcIik6IEh0dHBMaW5rIHtcbiAgICByZXR1cm4gbmV3IEh0dHBMaW5rKFxuICAgICAgdGhpcy5hcHAuZ2V0Q29uZmlndXJhdGlvbigpLmVuZHBvaW50cy5pbWFnZUVuZHBvaW50LnByb2R1Y3Rpb24gKyBhcHBlbmRcbiAgICApO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvKipcbiAgICogVXBsb2FkIGFuIG5ldyBpbWFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaW1hZ2UgLSBJbWFnZSBpbiBiYXNlNjQgZm9ybWF0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuXG4gIHVwbG9hZChpbWFnZTogc3RyaW5nKTogUHJvbWlzZTx7IGlkOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IGxpbmsgPSB0aGlzLmdldEh0dHBMaW5rKFwiL3VwbG9hZFwiKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGlua1xuICAgICAgICAucG9zdCh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaW1hZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IHsgZGF0YTogeyBpZDogc3RyaW5nIH0gfSkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGltYWdlIGxpbmsgd2l0aCBzaXplXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2l6ZSAoMTAwcHgsIDMwMHB4LCA2MDBweCBvciAxMjAwcHgpXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXRMaW5rKGlkOiBzdHJpbmcsIHNpemU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuYXBwLmdldENvbmZpZ3VyYXRpb24oKS5lbmRwb2ludHMuaW1hZ2VFbmRwb2ludC5kaXN0cmlidXRpb24gK1xuICAgICAgXCIvXCIgK1xuICAgICAgaWQgK1xuICAgICAgXCItXCIgK1xuICAgICAgc2l6ZSArXG4gICAgICBcIi5wbmdcIlxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgVmVuZG9yIH0gZnJvbSBcIi4vVmVuZG9yQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgT3JkZXIgfSBmcm9tIFwiLi9PcmRlckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5cbmV4cG9ydCBlbnVtIFBheW91dE1ldGhvZCB7XG4gIE1BTlVBTCA9IFwiTUFOVUFMXCJcbn1cbmV4cG9ydCBlbnVtIFBheW91dFN0YXR1cyB7XG4gIFBFTkRJTkcgPSBcIlBFTkRJTkdcIixcbiAgSU5fVFJBTlNJVCA9IFwiSU5fVFJBTlNJVFwiLFxuICBQQUlEID0gXCJQQUlEXCIsXG4gIENBTkNFTExFRCA9IFwiQ0FOQ0VMTEVEXCJcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGF5b3V0UGxhbiB7XG4gIGZpeGVkX3Blcl90cmFuc2FjdGlvbj86IG51bWJlcjtcbiAgcGVyZWNlbnRhZ2VfcGVyX3RyYW5zYWN0aW9uPzogbnVtYmVyO1xuICBmaXhlZF9wZXJfcGF5b3V0PzogbnVtYmVyO1xuICBwZXJjZW50YWdlX3Blcl9wYXlvdXQ/OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVBheW91dElucHV0IHtcbiAgb3JkZXJzPzogQXJyYXk8c3RyaW5nPjtcbiAgc2VydmljZV9jaGFyZ2VzPzogQXJyYXk8c3RyaW5nPjtcbiAgbm90ZT86IHN0cmluZztcbiAgbWV0aG9kPzogUGF5b3V0TWV0aG9kOyAvLyBkZWZhdWx0IE1BTlVBTFxuICBzdGF0dXM/OiBQYXlvdXRTdGF0dXM7IC8vIGRlZmF1bHQgUEVORElOR1xufVxuZXhwb3J0IGVudW0gU2VydmljZUNoYXJnZVR5cGUge1xuICBDUkVESVQgPSBcIkNSRURJVFwiLFxuICBERUJJVCA9IFwiREVCSVRcIlxufVxuZXhwb3J0IGVudW0gU2VydmljZUNoYXJnZVJlYXNvbiB7XG4gIE9SREVSX1RSQU5TQUNUSU9OX0ZFRSA9IFwiT1JERVJfVFJBTlNBQ1RJT05fRkVFXCIsXG4gIFBBWU9VVF9SRVFVRVNUX0ZFRSA9IFwiUEFZT1VUX1JFUVVFU1RfRkVFXCIsXG4gIE9USEVSID0gXCJPVEhFUlwiLFxuICBPVEhFUl9UQVhBQkxFID0gXCJPVEhFUl9UQVhBQkxFXCIsXG4gIFRBWCA9IFwiVEFYXCJcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmljZUNoYXJnZSBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyIHtcbiAgdmVuZG9yX2lkPzogc3RyaW5nO1xuICBhbW91bnQ6IG51bWJlcjtcbiAgdHlwZTogU2VydmljZUNoYXJnZVR5cGU7XG4gIHJlYXNvbjogU2VydmljZUNoYXJnZVJlYXNvbjtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHNldHRsZWRfYXQ/OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIFBheW91dCBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyIHtcbiAgdmVuZG9yX2lkOiBzdHJpbmc7XG4gIHZlbmRvcj86IFZlbmRvcjtcbiAgdG90YWw/OiBudW1iZXI7XG4gIG9yZGVycz86IEFycmF5PE9yZGVyPjtcbiAgc2VydmljZV9jaGFyZ2VzPzogQXJyYXk8U2VydmljZUNoYXJnZT47XG4gIG5vdGU/OiBzdHJpbmc7XG4gIG1ldGhvZD86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xufVxuLyoqXG4gKiBDb250cm9sbGVyIHJlbGF0ZWQgdG8gcGF5b3V0c1xuICovXG5cbmV4cG9ydCBjbGFzcyBQYXlvdXRDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FuY2VsID0gdGhpcy5jYW5jZWwuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vIEFERCBNVVRBVElPTiBNRVRIT0RTIEJFTE9XXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwYXlvdXQgcmVxdWVzdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmVuZG9yX2lkIC0gVmVuZG9yIElEXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZHJ5IC0gRHJ5IHJ1biBvciBub3RcbiAgICogQHJldHVybnMge1Byb21pc2U8UGF5b3V0Pn1cbiAgICovXG4gIHJlcXVlc3QoXG4gICAgdmVuZG9yX2lkOiBzdHJpbmcsXG4gICAgZHJ5OiBib29sZWFuIHwgbnVsbCAvLyBkZWZhdWx0IEZhbHNlXG4gICk6IFByb21pc2U8UGF5b3V0PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJHZlbmRvcl9pZDogU3RyaW5nISwgJGRyeTogQm9vbGVhbikge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0UGF5b3V0KHZlbmRvcl9pZDogJHZlbmRvcl9pZCwgZHJ5OiAkZHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgdmVuZG9yX2lkLFxuICAgICAgICAgIGRyeVxuICAgICAgICB9KVxuICAgICAgICAvL1FVRVNUSU9OIG9ubHkgX2lkIGFuZCB0b3RhbCB3aWxsIGJlIGFjY2Vzc2libGUgaXMgdGhpcyB0aGUgZXhwZWN0ZWQgYmVoYXZpb3VyXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnJlcXVlc3RQYXlvdXQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFuIGV4aXN0aW5nIHBlbmRpbmcgcGF5b3V0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFBheW91dCBJRFxuICAgKiBAcGFyYW0ge1VwZGF0ZVBheW91dElucHV0fSBwYXlvdXQgLSBVcGRhdGVkIHBheW91dCBvYmplY3RcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIHVwZGF0ZShpZDogc3RyaW5nLCBwYXlvdXQ6IFVwZGF0ZVBheW91dElucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEsICRwYXlvdXQ6VXBkYXRlUGF5b3V0SW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBheW91dChpZDogJGlkLCBwYXlvdXQ6ICRwYXlvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHBheW91dFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC51cGRhdGVQYXlvdXQuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhIFBheW91dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBQYXlvdXQgSURcbiAgICogQHJldHVybnMge1Byb21pc2U8UGF5b3V0Pn1cbiAgICovXG4gIGNhbmNlbChpZDogc3RyaW5nKTogUHJvbWlzZTxQYXlvdXQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsUGF5b3V0KGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmNhbmNlbFBheW91dCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBDb3Vwb24gfSBmcm9tIFwiLi9Db3Vwb25Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuZXhwb3J0IGludGVyZmFjZSBBZHZlcnRpc2VtZW50IHtcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGxpbms/OiBzdHJpbmc7XG4gIGltYWdlPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgRGFpbHlEZWFsIHtcbiAgbGluaz86IHN0cmluZztcbiAgbWVudV9pdGVtX2lkOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIFNwZWNpYWxEZWFsIGV4dGVuZHMgRGFpbHlEZWFsIHt9XG5leHBvcnQgaW50ZXJmYWNlIFRpbWVseURlYWwge1xuICBtZW51X2l0ZW1faWQ6IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGxpbms/OiBzdHJpbmc7XG4gIGZyb20/OiBzdHJpbmc7XG4gIHRvPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBFeHBsb3JlUGFnZSBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyIHtcbiAgYWR2ZXJ0aXNlbWVudHM/OiBBcnJheTxBZHZlcnRpc2VtZW50PjtcbiAgZGFpbHlfZGVhbHM/OiBBcnJheTxEYWlseURlYWw+O1xuICBzcGVjaWFsX2RlYWxzPzogQXJyYXk8U3BlY2lhbERlYWw+O1xuICB0aW1lbHlfZGVhbHM/OiBBcnJheTxUaW1lbHlEZWFsPjtcbiAgY291cG9ucz86IEFycmF5PENvdXBvbj47XG4gIGlzX2N1cnJlbnQ/OiBib29sZWFuO1xufVxuLyoqXG4gKiBDb250cm9sbGVyIHJlbGF0ZWQgdG8gZXhwbG9yZSBwYWdlXG4gKi9cblxuZXhwb3J0IGNsYXNzIEV4cGxvcmVQYWdlQ29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMucmVwbGFjZSA9IHRoaXMucmVwbGFjZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvKipcbiAgICogUmVwbGFjZSB0aGUgZXhwbG9yZSBwYWdlXG4gICAqIEBwYXJhbSB7QXJyYXk8QWR2ZXJ0aXNlbWVudHM+fSBhZHZlcnRpc2VtZW50cyAtIExpc3Qgb2YgRXhwbG9yZSBwYWdlIEFkc1xuICAgKiBAcGFyYW0ge0FycmF5PERhaWx5RGVhbHM+fSBkYWlseV9kZWFscyAtIExpc3Qgb2YgRXhwbG9yZSBwYWdlIERhaWx5IEFkc1xuICAgKiBAcGFyYW0ge0FycmF5PFNwZWNpYWxEZWFscz59IHNwZWNpYWxfZGVhbHMgLSBMaXN0IG9mIEV4cGxvcmUgcGFnZSBTcGVjaWFsIERlYWxzXG4gICAqIEBwYXJhbSB7QXJyYXk8VGltZWx5RGVhbHM+fSB0aW1lbHlfZGVhbHMgLSBMaXN0IG9mIEV4cGxvcmUgcGFnZSBUaW1lbHkgRGVhbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8U3RyaW5nPn0gLSBVcGRhdGVkIGF0XG4gICAqL1xuICByZXBsYWNlKFxuICAgIGFkdmVydGlzZW1lbnRzOiBBcnJheTxBZHZlcnRpc2VtZW50PixcbiAgICBkYWlseV9kZWFsczogQXJyYXk8RGFpbHlEZWFsPixcbiAgICBzcGVjaWFsX2RlYWxzOiBBcnJheTxTcGVjaWFsRGVhbD4sXG4gICAgdGltZWx5X2RlYWxzOiBBcnJheTxUaW1lbHlEZWFsPlxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vUVVFU1RJT04gUFIgY291cG9ucyBpcyBub3QgaW5jbHVkZWQgYXMgb3B0aW9uIGluIG11dGF0aW9uIGJ1dCBleGlzdHMgYXMgYW4gb3B0aW9uIGluIHRoZSBzY2hlbWE/P1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRhZHZlcnRpc2VtZW50czogW0FkdmVydGlzZW1lbnRJbnB1dF0sICRkYWlseV9kZWFsczogW0RhaWx5RGVhbHNJbnB1dF0sICRzcGVjaWFsX2RlYWxzOiBbU3BlY2lhbERlYWxzSW5wdXRdLCAkdGltZWx5X2RlYWxzOiBbVGltZWx5RGVhbHNJbnB1dF0pIHsgXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VFeHBsb3JlUGFnZShhZHZlcnRpc2VtZW50czogJGFkdmVydGlzZW1lbnRzLCBkYWlseV9kZWFsczogJGRhaWx5X2RlYWxzLCBzcGVjaWFsX2RlYWxzOiAkc3BlY2lhbF9kZWFscywgdGltZWx5X2RlYWxzOiAkdGltZWx5X2RlYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgYWR2ZXJ0aXNlbWVudHMsXG4gICAgICAgICAgZGFpbHlfZGVhbHMsXG4gICAgICAgICAgc3BlY2lhbF9kZWFscyxcbiAgICAgICAgICB0aW1lbHlfZGVhbHNcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQucmVwbGFjZUV4cGxvcmVQYWdlLnVwZGF0ZWRfYXQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcbmV4cG9ydCBpbnRlcmZhY2UgRmxhc2hTYWxlSXRlbUlucHV0IHtcbiAgX2lkOiBzdHJpbmc7XG4gIHByaWNlOiBudW1iZXI7XG59XG5leHBvcnQgZW51bSBGbGFzaFNhbGVUeXBlIHtcbiAgRE9MTEFSID0gXCJET0xMQVJcIixcbiAgUEVSQ0VOVEFHRSA9IFwiUEVSQ0VOVEFHRVwiXG59XG5leHBvcnQgaW50ZXJmYWNlIEZsYXNoU2FsZUl0ZW0ge1xuICBfaWQ/OiBzdHJpbmc7XG4gIHByaWNlPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBGbGFzaFNhbGUgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlciB7XG4gIHR5cGU/OiBGbGFzaFNhbGVUeXBlO1xuICBhbW91bnQ/OiBudW1iZXI7XG4gIHZlbmRvcl9pZD86IHN0cmluZztcbiAgaXRlbXM/OiBBcnJheTxGbGFzaFNhbGVJdGVtPjtcbiAgc3RhcnRfYXQ/OiBzdHJpbmc7XG4gIGVuZF9hdD86IHN0cmluZztcbn1cbi8qKlxuICogQ29udHJvbGxlciByZWxhdGVkIHRvIGZsYXNoIHNhbGVzXG4gKi9cblxuZXhwb3J0IGNsYXNzIEZsYXNoU2FsZUNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLmNyZWF0ZSA9IHRoaXMuY3JlYXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZsYXNoIHNhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZlbmRvcl9pZCAtIFZlbmRvciBJRFxuICAgKiBAcGFyYW0ge0ZsYXNoU2FsZVR5cGV9IHR5cGUgLSBJZiB0aGUgZmxhc2ggc2FsZSBpcyBvbiBQRVJDRU5UQUdFIG9yIERPTExBUiBiYXNpc1xuICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IC0gQW1vdW50IGluIGNlbnRzIHRvIGJhc2UgdGhlIGZsYXNoIHNhbGUgb2ZmIG9mXG4gICAqIEBwYXJhbSB7QXJyYXk8Rmxhc2hTYWxlSXRlbUlucHV0Pn0gaXRlbXMgLSBMaXN0IG9mIGl0ZW1zIGluY2x1ZGVkIGluIEZsYXNoIFNhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXJ0X2F0IC0gU3RhcnQgdGltZSBmb3IgRmxhc2ggU2FsZSBpbiBJU08gZm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRfYXQgLSBFbmQgdGltZSBmb3IgRmxhc2ggU2FsZSBpbiBJU08gZm9ybWF0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICBjcmVhdGUoXG4gICAgdmVuZG9yX2lkOiBzdHJpbmcsXG4gICAgdHlwZTogRmxhc2hTYWxlVHlwZSxcbiAgICBhbW91bnQ6IG51bWJlcixcbiAgICBpdGVtczogQXJyYXk8Rmxhc2hTYWxlSXRlbUlucHV0PixcbiAgICBzdGFydF9hdDogc3RyaW5nLFxuICAgIGVuZF9hdDogc3RyaW5nXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbigkdmVuZG9yX2lkOiBTdHJpbmchLCAkdHlwZTogRmxhc2hTYWxlVHlwZSEsICRhbW91bnQ6IEludCEsICRpdGVtczogW0ZsYXNoU2FsZUl0ZW1JbnB1dF0hLCAkc3RhcnRfYXQ6IFN0cmluZyEsICRlbmRfYXQ6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmxhc2hTYWxlKHZlbmRvcl9pZDogJHZlbmRvcl9pZCwgdHlwZTogJHR5cGUsIGFtb3VudDogJGFtb3VudCwgaXRlbXM6JGl0ZW1zLCBzdGFydF9hdDokc3RhcnRfYXQsIGVuZF9hdDokZW5kX2F0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICB2ZW5kb3JfaWQsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgc3RhcnRfYXQsXG4gICAgICAgICAgZW5kX2F0XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmNyZWF0ZUZsYXNoU2FsZS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGV4aXN0aW5nIGZsYXNoIHNhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gRmxhc2ggU2FsZSBJRFxuICAgKiBAcGFyYW0ge0FycmF5PEZsYXNoU2FsZUl0ZW1zPn0gaXRlbXMgLSBVcGRhdGVkIExpc3Qgb2YgaXRlbXMgZm9yIEZsYXNoIFNhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVuZF9hdCAtIEVuZCB0aW1lIGZvciBGbGFzaCBTYWxlIGluIElTTyBmb3JtYXRcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIGl0ZW1zOiBBcnJheTxGbGFzaFNhbGVJdGVtSW5wdXQ+IHwgbnVsbCxcbiAgICBlbmRfYXQ6IHN0cmluZyB8IG51bGxcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uKCRpZDogU3RyaW5nISwgJGl0ZW1zOiBbRmxhc2hTYWxlSXRlbUlucHV0XSwgJGVuZF9hdDogU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZsYXNoU2FsZShpZDogJGlkLCBpdGVtczokaXRlbXMsIGVuZF9hdDokZW5kX2F0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICBlbmRfYXRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQudXBkYXRlRmxhc2hTYWxlLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBPcmRlciB9IGZyb20gXCIuL09yZGVyQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTXV0YXRlUmVzdWx0IH0gZnJvbSBcIi4uL2xpbmtzL3N5bmNocm9ub3VzbGlua3MvR3JhcGhRTExpbmtcIjtcblxuZXhwb3J0IGludGVyZmFjZSBUaXAgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlciB7XG4gIGFtb3VudD86IG51bWJlcjtcbiAgb3JkZXI/OiBPcmRlcjtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBUaXBDb250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvKipcbiAgICogQ3JlYXRlIGEgdGlwXG4gICAqIEBwYXJhbSAge3N0cmluZ30gb3JkZXJfaWQgLSBJRCBvZiB0aGUgb3JkZXIgdGlwIGlzIGlzc3VlZCBmb3JcbiAgICogQHBhcmFtICB7bnVtYmVyfSBhbW91bnQgLSBUaXAgYW1vdW50IGluIGNlbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gUmV0dXJucyB0aGUgaWQgb2YgdGhlIHRpcCBjcmVhdGVkXG4gICAqL1xuICAvL1FVRVNUSU9OIERlc2NyaXB0aW9uIGlzIG5vdCBpbiBtdXRhdGlvbiBidXQgaXQgaXMgYW4gb3B0aW9uYWwgZmllbGQgaW4gR1JBUEggUUxcbiAgY3JlYXRlKG9yZGVyX2lkOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkb3JkZXJfaWQ6U3RyaW5nISwgJGFtb3VudDpJbnQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRpcChvcmRlcl9pZDokb3JkZXJfaWQsIGFtb3VudDokYW1vdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgIFxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIG9yZGVyX2lkLFxuICAgICAgICAgIGFtb3VudFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVUaXAuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBWZW5kb3IgfSBmcm9tIFwiLi9WZW5kb3JDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBNZW51SXRlbSB9IGZyb20gXCIuL01lbnVJdGVtQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgUmVkZWVtYWJsZUl0ZW0gfSBmcm9tIFwiLi9SZWRlZW1hYmxlSXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5cbmV4cG9ydCBlbnVtIExveWFsdHlQcm9ncmFtVHlwZSB7XG4gIERPTExBUiA9IFwiRE9MTEFSXCIsXG4gIE9SREVSID0gXCJPUkRFUlwiLFxuICBJVEVNID0gXCJJVEVNXCJcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTG95YWx0eUNhcmRBdHRyaWJ1dGVzSW5wdXQge1xuICBjb2xvcjogc3RyaW5nO1xuICBlbW9qaTogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVMb3lhbHR5UHJvZ3JhbUlucHV0IHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgdmVuZG9yX2lkOiBzdHJpbmc7XG4gIGl0ZW1zX3JlcXVpcmVkOiBBcnJheTxzdHJpbmc+O1xuICBwb2ludHM6IG51bWJlcjtcbiAgc2hhcmVhYmxlX3BvaW50czogbnVtYmVyO1xuICBtaW5fcHVyY2hhc2U/OiBudW1iZXI7IC8vIGRlZmF1bHQgMFxuICBwcm9ncmFtX3R5cGU/OiBMb3lhbHR5UHJvZ3JhbVR5cGU7IC8vIGRlZmF1bHQgRE9MTEFSXG4gIHByb2dyYW1fbG95YWx0eV9jYXJkX2F0dHJpYnV0ZXM6IExveWFsdHlDYXJkQXR0cmlidXRlc0lucHV0O1xufVxuZXhwb3J0IGludGVyZmFjZSBMb3lhbHR5UHJvZ3JhbUNvbW1vblByb3BlcnRpZXMge1xuICBuYW1lPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgcG9pbnRzPzogbnVtYmVyO1xuICBzaGFyZWFibGVfcG9pbnRzPzogbnVtYmVyO1xuICBtaW5fcHVyY2hhc2U/OiBudW1iZXI7XG4gIHByb2dyYW1fbG95YWx0eV9jYXJkX2F0dHJpYnV0ZXM/OiBMb3lhbHR5Q2FyZEF0dHJpYnV0ZXNJbnB1dDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlTG95YWx0eVByb2dyYW1JbnB1dFxuICBleHRlbmRzIExveWFsdHlQcm9ncmFtQ29tbW9uUHJvcGVydGllcyB7XG4gIGl0ZW1zX3JlcXVpcmVkPzogQXJyYXk8c3RyaW5nPjtcbiAgcHJvZ3JhbV90eXBlPzogTG95YWx0eVByb2dyYW1UeXBlO1xufVxuZXhwb3J0IGludGVyZmFjZSBMb3lhbHR5UHJvZ3JhbSBleHRlbmRzIExveWFsdHlQcm9ncmFtQ29tbW9uUHJvcGVydGllcyB7XG4gIF9pZD86IHN0cmluZztcbiAgdmVuZG9yPzogVmVuZG9yO1xuICBpdGVtc19yZXF1aXJlZD86IEFycmF5PE1lbnVJdGVtPjtcbiAgcmVkZWVtYW5ibGVfaXRlbXM/OiBBcnJheTxSZWRlZW1hYmxlSXRlbT47XG4gIHByb2dyYW1fdHlwZT86IHN0cmluZztcbn1cbi8qKlxuICogQ29udHJvbGxlciBmb3IgbG95YWx0eSBwcm9ncmFtcy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgTG95YWx0eVByb2dyYW1Db250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgTG95YWx0eSBQcm9ncmFtLCByZXR1cm5zIExveWFsdHlQcm9ncmFtIF9pZCBpZiBzdWNjZXNzZnVsXG4gICAqIEBwYXJhbSB7Q3JlYXRlTG95YWx0eVByb2dyYW1JbnB1dH0gbG95YWx0eV9wcm9ncmFtIC0gVGhlIExveWFsdHlQcm9ncmFtIG9iamVjdCBpbnB1dFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSAtIFRoZSBpZCBvZiB0aGUgTG95YWx0eVByb2dyYW0gb2JqZWN0XG4gICAqL1xuICBjcmVhdGUobG95YWx0eV9wcm9ncmFtOiBDcmVhdGVMb3lhbHR5UHJvZ3JhbUlucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkbG95YWx0eV9wcm9ncmFtOiBDcmVhdGVMb3lhbHR5UHJvZ3JhbUlucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVMb3lhbHR5UHJvZ3JhbShsb3lhbHR5X3Byb2dyYW06ICRsb3lhbHR5X3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGxveWFsdHlfcHJvZ3JhbVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVMb3lhbHR5UHJvZ3JhbS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFuIGV4aXN0aW5nIExveWFsdHkgUHJvZ3JhbSwgcmV0dXJucyBMb3lhbHR5UHJvZ3JhbSBfaWQgaWYgc3VjY2Vzc2Z1bFxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBJRCBvZiB0aGUgTG95YWx0eVByb2dyYW0gb2JqZWN0IHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge1VwZGF0ZUxveWFsdHlQcm9ncmFtSW5wdXR9IGxveWFsdHlfcHJvZ3JhbSAtIFRoZSBMb3lhbHR5UHJvZ3JhbSB1cGRhdGUgb2JqZWN0IGlucHV0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBMb3lhbHR5UHJvZ3JhbSBvYmplY3RcbiAgICovXG4gIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIGxveWFsdHlfcHJvZ3JhbTogVXBkYXRlTG95YWx0eVByb2dyYW1JbnB1dFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZDpTdHJpbmchLCAkbG95YWx0eV9wcm9ncmFtOiBVcGRhdGVMb3lhbHR5UHJvZ3JhbUlucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVMb3lhbHR5UHJvZ3JhbShpZDokaWQsIGxveWFsdHlfcHJvZ3JhbTogJGxveWFsdHlfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbG95YWx0eV9wcm9ncmFtXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZUxveWFsdHlQcm9ncmFtLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBMb3lhbHR5IFByb2dyYW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBMb3lhbHR5IFByb2dyYW1cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBSZXR1cm4gc3RyaW5nXG4gICAqL1xuICBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUxveWFsdHlQcm9ncmFtKGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRlbGV0ZUxveWFsdHlQcm9ncmFtKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi4vQXBwXCI7XG5pbXBvcnQgeyBEZWZhdWx0Q29udHJvbGxlclJlcXVpcmVkIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTG95YWx0eVByb2dyYW0gfSBmcm9tIFwiLi9Mb3lhbHR5UHJvZ3JhbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEN1c3RvbWVyIH0gZnJvbSBcIi4vQ3VzdG9tZXJDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBTZWxlY3RJbnB1dCB9IGZyb20gXCIuL0NvbW1vbkludGVyZmFjZVwiO1xuaW1wb3J0IHsgT3JkZXIgfSBmcm9tIFwiLi9PcmRlckNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUxveWFsdHlDYXJkSW5wdXQge1xuICBsb3lhbHR5X3Byb2dyYW1faWQ6IHN0cmluZztcbiAgY3VzdG9tZXJfaWQ/OiBzdHJpbmc7XG4gIHBob25lX251bWJlcj86IHN0cmluZztcbn1cbmV4cG9ydCBlbnVtIExveWFsdHlUcmFuc2FjdGlvblR5cGUge1xuICBFQVJOSU5HID0gXCJFQVJOSU5HXCIsXG4gIEVBUk5JTkdfRlJJRU5EID0gXCJFQVJOSU5HX0ZSSUVORFwiLFxuICBTSEFSSU5HID0gXCJTSEFSSU5HXCIsXG4gIFJFREVFTUlORyA9IFwiUkVERUVNSU5HXCJcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTG95YWx0eVRyYW5zYWN0aW9uIHtcbiAgX2lkOiBzdHJpbmc7XG4gIGxveWFsdHlfY2FyZDogTG95YWx0eUNhcmQ7XG4gIHRyYW5zYWN0aW9uX3R5cGU6IExveWFsdHlUcmFuc2FjdGlvblR5cGU7XG4gIHZhbHVlOiBudW1iZXI7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIG9yZGVyOiBPcmRlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTG95YWx0eUNhcmQgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlclJlcXVpcmVkIHtcbiAgbG95YWx0eV9wcm9ncmFtOiBMb3lhbHR5UHJvZ3JhbTtcbiAgY3VzdG9tZXI/OiBDdXN0b21lcjtcbiAgcGhvbmVfbnVtYmVyPzogc3RyaW5nO1xuICB0cmFuc2FjdGlvbnMoc2VsZWN0OiBTZWxlY3RJbnB1dCk6IEFycmF5PExveWFsdHlUcmFuc2FjdGlvbj47XG4gIHBvaW50czogbnVtYmVyO1xuICBzaGFyZWFibGVfcG9pbnRzOiBudW1iZXI7XG59XG4vKipcbiAqIENvbnRyb2xsZXIgZm9yIGxveWFsdHkgY2FyZHMuXG4gKi9cblxuZXhwb3J0IGNsYXNzIExveWFsdHlDYXJkQ29udHJvbGxlciB7XG4gIGFwcDogQXBwO1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIC8vIEFERCBCSU5ESU5HUyBCRUxPV1xuICAgIHRoaXMuY3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGwgPSB0aGlzLmNyZWF0ZUxveWFsdHlDYXJkQW5kRW5yb2xsLmJpbmQoXG4gICAgICB0aGlzXG4gICAgKTtcbiAgICB0aGlzLmF3YXJkUG9pbnRzVG9Mb3lhbHR5Q2FyZCA9IHRoaXMuYXdhcmRQb2ludHNUb0xveWFsdHlDYXJkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hd2FyZFNoYXJlYWJsZVBvaW50c1RvTG95YWx0eUNhcmQgPSB0aGlzLmF3YXJkU2hhcmVhYmxlUG9pbnRzVG9Mb3lhbHR5Q2FyZC5iaW5kKFxuICAgICAgdGhpc1xuICAgICk7XG4gICAgdGhpcy5zaGFyZUxveWFsdHlQb2ludHMgPSB0aGlzLnNoYXJlTG95YWx0eVBvaW50cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVkZWVtTG95YWx0eVBvaW50c0ZvckNvdXBvbiA9IHRoaXMucmVkZWVtTG95YWx0eVBvaW50c0ZvckNvdXBvbi5iaW5kKFxuICAgICAgdGhpc1xuICAgICk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgTG95YWx0eSBDYXJkLCBhdXRvbWF0aWNhbGx5IGVucm9sbGluZyB1c2VyIGluIHRoZSBsb3lhbHR5IHByb2dyYW1cbiAgICogQHBhcmFtIHtDcmVhdGVMb3lhbHR5Q2FyZElucHV0fSBsb3lhbHR5X2NhcmQgLSBUaGUgTG95YWx0eUNhcmQgb2JqZWN0IGlucHV0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBMb3lhbHR5Q2FyZCBvYmplY3RcbiAgICovXG4gIGNyZWF0ZUxveWFsdHlDYXJkQW5kRW5yb2xsKFxuICAgIGxveWFsdHlfY2FyZDogQ3JlYXRlTG95YWx0eUNhcmRJbnB1dFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRsb3lhbHR5X2NhcmQ6Q3JlYXRlTG95YWx0eUNhcmRJbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGwobG95YWx0eV9jYXJkOiAkbG95YWx0eV9jYXJkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBsb3lhbHR5X2NhcmRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQuY3JlYXRlTG95YWx0eUNhcmRBbmRFbnJvbGwuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEF3YXJkIHVzYWJsZSBwb2ludHMgdG8gYSBsb3lhbHR5IGNhcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gSUQgb2YgdGhlIGxveWFsdHkgY2FyZCB0byB3aGljaCBwb2ludHMgYXJlIGF3YXJkZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCAtIE51bWJlciBvZiBwb2ludHMgdG8gYXdhcmQgdG8gbG95YWx0eSBjYXJkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gVGhlIGlkIG9mIHRoZSBMb3lhbHR5VHJhbnNhY3Rpb25cbiAgICovXG4gIGF3YXJkUG9pbnRzVG9Mb3lhbHR5Q2FyZChpZDogc3RyaW5nLCBhbW91bnQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOiBTdHJpbmchLCAkYW1vdW50OiBJbnQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YXJkUG9pbnRzVG9Mb3lhbHR5Q2FyZChpZDogJGlkLCBhbW91bnQ6ICRhbW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIGFtb3VudFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5hd2FyZFBvaW50c1RvTG95YWx0eUNhcmQuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEF3YXJkIHNoYXJlYWJsZSBwb2ludHMgdG8gYSBsb3lhbHR5IGNhcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gSUQgb2YgdGhlIGxveWFsdHkgY2FyZCB0byB3aGljaCBzaGFyZWFibGUgcG9pbnRzIGFyZSBhd2FyZGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSBOdW1iZXIgb2Ygc2hhcmVhYmxlIHBvaW50cyB0byBhd2FyZCB0byBsb3lhbHR5IGNhcmRcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIExveWFsdHlUcmFuc2FjdGlvblxuICAgKi9cbiAgYXdhcmRTaGFyZWFibGVQb2ludHNUb0xveWFsdHlDYXJkKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgYW1vdW50OiBudW1iZXJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWQ6IFN0cmluZyEsICRhbW91bnQ6IEludCEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhcmRTaGFyZWFibGVQb2ludHNUb0xveWFsdHlDYXJkKGlkOiAkaWQsIGFtb3VudDogJGFtb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgYW1vdW50XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmF3YXJkU2hhcmVhYmxlUG9pbnRzVG9Mb3lhbHR5Q2FyZC5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIHNoYXJpbmcgb2YgbG95YWx0eSBwb2ludHMgZnJvbSBvbmUgbG95YWx0eSBjYXJkIHRvIGFub3RoZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbmRlcl9jdXN0b21lcl9pZCAtIElEIG9mIHRoZSBjdXN0b21lciB0cmFuc2ZlcnJpbmcgbG95YWx0eSBwb2ludHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlY2VpdmVyX3Bob25lX251bWJlciAtIFBob25lIG51bWJlciBvZiB0aGUgcmVjZWl2ZXIgcmVjZWl2aW5nIHRoZSBwb2ludHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxveWFsdHlfcHJvZ3JhbV9pZCAtIElEIG9mIHRoZSBsb3lhbHR5IHByb2dyYW0gaW4gY29udGV4dCBvZiB3aGljaCBwb2ludHMgYXJlIHNoYXJlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gbm9fb2ZfcG9pbnRzX3RvX3NoYXJlIC0gTnVtYmVyIG9mIHBvaW50cyB0byBzaGFyZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSAtIFRoZSBpZCBvZiB0aGUgTG95YWx0eVRyYW5zYWN0aW9uXG4gICAqL1xuICBzaGFyZUxveWFsdHlQb2ludHMoXG4gICAgc2VuZGVyX2N1c3RvbWVyX2lkOiBzdHJpbmcsXG4gICAgcmVjZWl2ZXJfcGhvbmVfbnVtYmVyOiBzdHJpbmcsXG4gICAgbG95YWx0eV9wcm9ncmFtX2lkOiBzdHJpbmcsXG4gICAgbm9fb2ZfcG9pbnRzX3RvX3NoYXJlOiBudW1iZXJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkc2VuZGVyX2N1c3RvbWVyX2lkOiBTdHJpbmchLCAkcmVjZWl2ZXJfcGhvbmVfbnVtYmVyOiBTdHJpbmchLCAkbG95YWx0eV9wcm9ncmFtX2lkOiBTdHJpbmchLCAkbm9fb2ZfcG9pbnRzX3RvX3NoYXJlOiBJbnQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXJlTG95YWx0eVBvaW50cyhzZW5kZXJfY3VzdG9tZXJfaWQ6ICRzZW5kZXJfY3VzdG9tZXJfaWQsIHJlY2VpdmVyX3Bob25lX251bWJlcjogJHJlY2VpdmVyX3Bob25lX251bWJlciwgbG95YWx0eV9wcm9ncmFtX2lkOiAkbG95YWx0eV9wcm9ncmFtX2lkLCBub19vZl9wb2ludHNfdG9fc2hhcmU6ICRub19vZl9wb2ludHNfdG9fc2hhcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIHNlbmRlcl9jdXN0b21lcl9pZCxcbiAgICAgICAgICByZWNlaXZlcl9waG9uZV9udW1iZXIsXG4gICAgICAgICAgbG95YWx0eV9wcm9ncmFtX2lkLFxuICAgICAgICAgIG5vX29mX3BvaW50c190b19zaGFyZVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5zaGFyZUxveWFsdHlQb2ludHMuX2lkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZGVlbSBhIGNvdXBvbiBpbiBleGNoYW5nZSBvZiBsb3lhbHR5IHBvaW50cyBmb3IgYSBwYXJ0aWN1bGFyIGl0ZW0gcmVkZWVtYWJsZSBpbiBhIHZlbmRvcidzIGxveWFsdHkgcHJvZ3JhbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbG95YWx0eV9jYXJkX2lkIC0gVGhlIGlkIG9mIHRoZSBMb3lhbHR5IENhcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lbnVfaXRlbV9pZCAtIFRoZSBpZCBvZiB0aGUgTWVudSBJRCB3aGljaCBtdXN0IGJlIGEgcmVkZWVtYWJsZSBpbiB0aGUgdmVuZG9yJ3MgbG95YWx0eSBwbGFuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gSUQgb2YgdGhlIENvdXBvbiBnZW5lcmF0ZWRcbiAgICovXG4gIHJlZGVlbUxveWFsdHlQb2ludHNGb3JDb3Vwb24oXG4gICAgbG95YWx0eV9jYXJkX2lkOiBzdHJpbmcsXG4gICAgbWVudV9pdGVtX2lkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uICgkbG95YWx0eV9jYXJkX2lkOiBTdHJpbmchLCAkbWVudV9pdGVtX2lkOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZGVlbUxveWFsdHlQb2ludHNGb3JDb3Vwb24obG95YWx0eV9jYXJkX2lkOiAkbG95YWx0eV9jYXJkX2lkLCBtZW51X2l0ZW1faWQ6ICRtZW51X2l0ZW1faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGxveWFsdHlfY2FyZF9pZCxcbiAgICAgICAgICBtZW51X2l0ZW1faWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQucmVkZWVtTG95YWx0eVBvaW50c0ZvckNvdXBvbi5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuLi9BcHBcIjtcbmltcG9ydCB7IERlZmF1bHRDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tIFwiLi9NZW51SXRlbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IExveWFsdHlQcm9ncmFtIH0gZnJvbSBcIi4vTG95YWx0eVByb2dyYW1Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBNdXRhdGVSZXN1bHQgfSBmcm9tIFwiLi4vbGlua3Mvc3luY2hyb25vdXNsaW5rcy9HcmFwaFFMTGlua1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVJlZGVlbWFibGVJdGVtSW5wdXQge1xuICBsb3lhbHR5X3Byb2dyYW1faWQ6IHN0cmluZztcbiAgbWVudV9pdGVtX2lkOiBzdHJpbmc7XG4gIHBvaW50c19yZXF1aXJlZDogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVSZWRlZW1hYmxlSXRlbUlucHV0IHtcbiAgcG9pbnRzX3JlcXVpcmVkPzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBSZWRlZW1hYmxlSXRlbSBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyIHtcbiAgbWVudV9pdGVtPzogTWVudUl0ZW07XG4gIHBvaW50c19yZXF1aXJlZD86IG51bWJlcjtcbiAgbG95YWx5X3Byb2dyYW0/OiBMb3lhbHR5UHJvZ3JhbTtcbn1cbi8qKlxuICogQ29udHJvbGxlciBmb3IgcmVkZWVtYWJsZSBpdGVtcy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgUmVkZWVtYWJsZUl0ZW1Db250cm9sbGVyIHtcbiAgYXBwOiBBcHA7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgLy8gQUREIEJJTkRJTkdTIEJFTE9XXG4gICAgdGhpcy5jcmVhdGUgPSB0aGlzLmNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZSA9IHRoaXMuZGVsZXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvLyBBREQgTVVUQVRJT04gTUVUSE9EUyBCRUxPV1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgUmVkZWVtYWJsZSBJdGVtLCByZXR1cm5zIFJlZGVlbWFibGVJdGVtIF9pZCBpZiBzdWNjZXNzZnVsXG4gICAqIEBwYXJhbSB7Q3JlYXRlUmVkZWVtYWJsZUl0ZW1JbnB1dH0gcmVkZWVtYWJsZV9pdGVtIC0gVGhlIFJlZGVlbWFibGVJdGVtIG9iamVjdCBpbnB1dFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSAtIFRoZSBpZCBvZiB0aGUgUmVkZWVtYWJsZUl0ZW0gb2JqZWN0XG4gICAqL1xuICBjcmVhdGUocmVkZWVtYWJsZV9pdGVtOiBDcmVhdGVSZWRlZW1hYmxlSXRlbUlucHV0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IG11dGF0aW9uU3RyaW5nID0gYFxuICAgICAgICAgICAgICAgIG11dGF0aW9uIGNyZWF0ZVJlZGVlbWFibGVJdGVtICgkcmVkZWVtYWJsZV9pdGVtOiBDcmVhdGVSZWRlZW1hYmxlSXRlbUlucHV0ISkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVSZWRlZW1hYmxlSXRlbShyZWRlZW1hYmxlX2l0ZW06ICRyZWRlZW1hYmxlX2l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIHJlZGVlbWFibGVfaXRlbVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5jcmVhdGVSZWRlZW1hYmxlSXRlbS5faWQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFuIGV4aXN0aW5nIFJlZGVlbWFibGVJdGVtLCByZXR1cm5zIFJlZGVlbWFibGVJdGVtIF9pZCBpZiBzdWNjZXNzZnVsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIElEIG9mIHRoZSBSZWRlZW1hYmxlSXRlbSBvYmplY3QgdG8gdXBkYXRlXG4gICAqIEBwYXJhbSB7VXBkYXRlUmVkZWVtYWJsZUl0ZW1JbnB1dH0gcmVkZWVtYWJsZV9pdGVtIC0gVGhlIFJlZGVlbWFibGVJdGVtIHVwZGF0ZSBvYmplY3QgaW5wdXRcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gLSBUaGUgaWQgb2YgdGhlIFJlZGVlbWFibGVJdGVtIG9iamVjdFxuICAgKi9cbiAgdXBkYXRlKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgcmVkZWVtYWJsZV9pdGVtOiBVcGRhdGVSZWRlZW1hYmxlSXRlbUlucHV0XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkOlN0cmluZyEsICRyZWRlZW1hYmxlX2l0ZW06IFVwZGF0ZVJlZGVlbWFibGVJdGVtSW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlZGVlbWFibGVJdGVtKGlkOiAkaWQsIHJlZGVlbWFibGVfaXRlbTogJHJlZGVlbWFibGVfaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgdGhpcy5hcHBcbiAgICAgICAgLmdldEFkYXB0b3IoKVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgcmVkZWVtYWJsZV9pdGVtXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnVwZGF0ZVJlZGVlbWFibGVJdGVtLl9pZCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBSZWRlZW1hYmxlSXRlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgaWQgb2YgdGhlIFJlZGVlbWFibGVJdGVtXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gUmV0dXJuIHN0cmluZ1xuICAgKi9cbiAgZGVsZXRlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVSZWRlZW1hYmxlSXRlbShpZDogJGlkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICBpZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzdWx0OiBNdXRhdGVSZXN1bHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5kZWxldGVSZWRlZW1hYmxlSXRlbSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL0FwcFwiO1xuaW1wb3J0IHsgRGVmYXVsdENvbnRyb2xsZXJSZXF1aXJlZCB9IGZyb20gXCIuL0NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE11dGF0ZVJlc3VsdCB9IGZyb20gXCIuLi9saW5rcy9zeW5jaHJvbm91c2xpbmtzL0dyYXBoUUxMaW5rXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlUmF3Q29uZmlndXJhdGlvbklucHV0IHtcbiAgbmFtZT86IHN0cmluZztcbiAgdmVyc2lvbl9tYXNrPzogc3RyaW5nO1xuICBkYXRhPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVSYXdDb25maWd1cmF0aW9uSW5wdXQge1xuICBuYW1lOiBzdHJpbmc7XG4gIHZlcnNpb25fbWFzazogc3RyaW5nO1xuICBkYXRhOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbmZpZ3VyYXRpb25cbiAgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlclJlcXVpcmVkLFxuICAgIENyZWF0ZVJhd0NvbmZpZ3VyYXRpb25JbnB1dCB7fVxuLyoqXG4gKiBDb250cm9sbGVyIGZvciByZW1vdGUgY29uZmlndXJhdGlvbi5cbiAqL1xuXG5leHBvcnQgY2xhc3MgUmVtb3RlQ29uZmlndXJhdGlvbkNvbnRyb2xsZXIge1xuICBhcHA6IEFwcDtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAvLyBBREQgQklORElOR1MgQkVMT1dcbiAgICB0aGlzLmZldGNoID0gdGhpcy5mZXRjaC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlUmF3Q29uZmlndXJhdGlvbiA9IHRoaXMuZGVsZXRlUmF3Q29uZmlndXJhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlUmF3Q29uZmlndXJhdGlvbiA9IHRoaXMudXBkYXRlUmF3Q29uZmlndXJhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3JlYXRlUmF3Q29uZmlndXJhdGlvbiA9IHRoaXMuY3JlYXRlUmF3Q29uZmlndXJhdGlvbi5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy8gQUREIE1VVEFUSU9OIE1FVEhPRFMgQkVMT1dcblxuICAvL1FVRVNUSU9OIGlzIGl0IGNvcnJlY3QgdG8gdXNlIEpTT04gdHlwZSBoZXJlXG4gIGZldGNoKG5hbWU6IHN0cmluZywgdmVyc2lvbjogc3RyaW5nKTogUHJvbWlzZTxKU09OPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBtdXRhdGlvblN0cmluZyA9IGBcbiAgICAgICAgICAgICAgICBxdWVyeSAoJG5hbWU6IFN0cmluZyEsICR2ZXJzaW9uOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZF9jb25maWd1cmF0aW9uKG5hbWU6ICRuYW1lLCB2ZXJzaW9uOiAkdmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLy9RVUVTVElPTiB0aGlzIGlzIGEgbXV0YXRlIGNhbGwgYnV0IHRoZSBtdXRhdGlvbiBzdHJpbmcgYWJvdmUgaXMgYSBxdWVyeSwgc2hvdWxkIGJlIGEgcXVlcnkgY2FsbFxuICAgICAgICAvLyBJIGNhbiBub3QgY2hhbmdlIGl0IHJpZ2h0IG5vdyBiZWNhdXNlIEkgZG8gbm90IGtub3cgd2hhdCB1c2luZyBpdCwgc28gSSBoYXZlIGFkZGVkIGEgbm90ZSBpbiB0aGVcbiAgICAgICAgLy8gTXV0YXRlUmVzdWx0IGludGVyZmFjZVxuICAgICAgICAubXV0YXRlKG11dGF0aW9uU3RyaW5nLCB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB2ZXJzaW9uXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZShyZXN1bHQubWVyZ2VkX2NvbmZpZ3VyYXRpb24uZGF0YSkpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVSYXdDb25maWd1cmF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZDogU3RyaW5nISkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVSYXdDb25maWd1cmF0aW9uKGlkOiAkaWQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmRlbGV0ZVJhd0NvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVSYXdDb25maWd1cmF0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgcmF3Q29uZmlndXJhdGlvbjogVXBkYXRlUmF3Q29uZmlndXJhdGlvbklucHV0XG4gICk6IFByb21pc2U8UmF3Q29uZmlndXJhdGlvbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZDogU3RyaW5nISwgJHJhd0NvbmZpZ3VyYXRpb246IFVwZGF0ZVJhd0NvbmZpZ3VyYXRpb25JbnB1dCEpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmF3Q29uZmlndXJhdGlvbihpZDogJGlkLCByYXdfY29uZmlndXJhdGlvbjogJHJhd0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYDtcbiAgICAgIHRoaXMuYXBwXG4gICAgICAgIC5nZXRBZGFwdG9yKClcbiAgICAgICAgLm11dGF0ZShtdXRhdGlvblN0cmluZywge1xuICAgICAgICAgIGlkLFxuICAgICAgICAgIHJhd0NvbmZpZ3VyYXRpb25cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogTXV0YXRlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQudXBkYXRlUmF3Q29uZmlndXJhdGlvbik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVJhd0NvbmZpZ3VyYXRpb24oXG4gICAgcmF3Q29uZmlndXJhdGlvbjogQ3JlYXRlUmF3Q29uZmlndXJhdGlvbklucHV0XG4gICk6IFByb21pc2U8UmF3Q29uZmlndXJhdGlvbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbXV0YXRpb25TdHJpbmcgPSBgXG4gICAgICAgICAgICAgICAgbXV0YXRpb24gKCRyYXdDb25maWd1cmF0aW9uOiBDcmVhdGVSYXdDb25maWd1cmF0aW9uSW5wdXQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVJhd0NvbmZpZ3VyYXRpb24ocmF3X2NvbmZpZ3VyYXRpb246ICRyYXdDb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICB0aGlzLmFwcFxuICAgICAgICAuZ2V0QWRhcHRvcigpXG4gICAgICAgIC5tdXRhdGUobXV0YXRpb25TdHJpbmcsIHtcbiAgICAgICAgICByYXdDb25maWd1cmF0aW9uXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXN1bHQ6IE11dGF0ZVJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LmNyZWF0ZVJhd0NvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IHtcbiAgZ3JhcGhRTEVuZHBvaW50OiB7XG4gICAgcHJvZHVjdGlvbjogXCJodHRwczovL2dyYXBocWwtdjEuY2hlYXByZWF0cy5jb20vZ3JhcGhxbFwiXG4gIH0sXG4gIHZlcmlmaWNhdGlvbkVuZHBvaW50OiB7XG4gICAgcHJvZHVjdGlvbjogXCJodHRwczovL21zLXZlcmlmaWNhdGlvbi12MS5jaGVhcHJlYXRzLmNvbVwiXG4gIH0sXG4gIHZhbGlkYXRpb25FbmRwb2ludDoge1xuICAgIHByb2R1Y3Rpb246IFwiaHR0cHM6Ly9tcy12YWxpZGF0aW9uLXYxLmNoZWFwcmVhdHMuY29tXCJcbiAgfSxcbiAgaW1hZ2VFbmRwb2ludDoge1xuICAgIHByb2R1Y3Rpb246IFwiaHR0cHM6Ly9tcy1pbWFnZS12MS5jaGVhcHJlYXRzLmNvbVwiLFxuICAgIGRpc3RyaWJ1dGlvbjogXCJodHRwczovL3N0YXRpYy5jaGVhcHJlYXRzLmNvbVwiXG4gIH1cbn07XG4iXSwic291cmNlUm9vdCI6IiJ9